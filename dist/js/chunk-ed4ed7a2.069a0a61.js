(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ed4ed7a2"],{"00da":function(t,e,a){"use strict";a("23cf")},"0d42":function(t,e,a){"use strict";a("e829")},1227:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return t.isOutlineEdit?e("div",{ref:"outlineEditContainer",staticClass:"outlineEditContainer",class:{isDark:t.isDark}},[e("div",{staticClass:"btnList"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("outline.print"),placement:"top"}},[e("div",{staticClass:"btn",on:{click:t.onPrint}},[e("span",{staticClass:"icon iconfont iconprinting"})])]),e("div",{staticClass:"btn",on:{click:t.onClose}},[e("span",{staticClass:"icon iconfont iconguanbi"})])],1),e("div",{ref:"outlineEditBox",staticClass:"outlineEditBox",attrs:{id:"fullScreenOutlineEditBox"}},[e("div",{staticClass:"outlineEdit"},[e("el-tree",{ref:"tree",staticClass:"outlineTree",class:{isDark:t.isDark},attrs:{"node-key":"uid",draggable:"","default-expand-all":"",data:t.data,props:t.defaultProps,"highlight-current":!0,"expand-on-click-node":!1,"allow-drag":t.checkAllowDrag},on:{"node-drop":t.onNodeDrop,"current-change":t.onCurrentChange},scopedSlots:t._u([{key:"default",fn:function({node:a,data:i}){return e("span",{staticClass:"customNode",attrs:{"data-id":i.uid}},[e("span",{key:t.getKey(),staticClass:"nodeEdit",attrs:{contenteditable:!t.isReadonly},domProps:{innerHTML:t._s(a.label)},on:{blur:function(e){return t.onBlur(e,a)},keydown:function(e){return e.stopPropagation(),t.onNodeInputKeydown(e,a)},keyup:function(t){t.stopPropagation()},paste:function(e){return t.onPaste(e,a)}}})])}}],null,!1,485109613)})],1)])]):t._e()},n=[],o=(a("14d9"),a("0643"),a("4e3e"),a("2f62")),s=a("d17d"),r=a("365c"),l=a("ed08"),c={props:{mindMap:{type:Object}},data(){return{data:[],defaultProps:{label:"label"},currentData:null}},computed:{...Object(o["c"])({isReadonly:t=>t.isReadonly,isDark:t=>t.localConfig.isDark,isOutlineEdit:t=>t.isOutlineEdit})},watch:{isOutlineEdit(t){t&&(this.refresh(),this.$nextTick(()=>{document.body.appendChild(this.$refs.outlineEditContainer)}))}},created(){window.addEventListener("keydown",this.onKeyDown)},beforeDestroy(){window.removeEventListener("keydown",this.onKeyDown)},methods:{...Object(o["b"])(["setIsOutlineEdit"]),refresh(){let t=this.mindMap.getData();t.root=!0;let e=t=>{let a=t.data.richText?Object(s["hb"])(t.data.text):t.data.text;a=Object(s["V"])(a),a=a.replace(/\n/g,"<br>"),t.textCache=a,t.label=a,t.uid=t.data.uid,t.children&&t.children.length>0&&t.children.forEach(t=>{e(t)})};e(t),this.data=[t]},checkAllowDrag(t){return!t.data.root},onNodeDrop(){this.save()},onCurrentChange(t){this.currentData=t},onBlur(t,e){if(e.data.textCache===t.target.innerHTML)return;const a=e.data.data.richText,i=a?t.target.innerHTML:t.target.innerText;e.data.data.text=a?Object(s["vb"])(i):i,e.data.textCache=t.target.innerHTML,this.save()},onNodeInputKeydown(t,e){const a=!!e.data.data.richText,i=Object(s["r"])(),n=this.$t("outline.nodeDefaultText"),o={textCache:n,uid:i,label:n,data:{text:a?Object(s["vb"])(n):n,uid:i,richText:a},children:[]};if(13===t.keyCode&&!t.shiftKey){if(t.preventDefault(),e.data.root)return;this.$refs.tree.insertAfter(o,e)}9===t.keyCode&&(t.preventDefault(),t.shiftKey?(this.$refs.tree.insertAfter(e.data,e.parent),this.$refs.tree.remove(e)):this.$refs.tree.append(o,e)),this.save(),this.$nextTick(()=>{this.$refs.tree.setCurrentKey(i);const t=document.querySelector(`.customNode[data-id="${i}"] .nodeEdit`);if(t){let e=window.getSelection(),a=document.createRange();a.selectNodeContents(t),e.removeAllRanges(),e.addRange(a);let i=t.offsetTop;this.scrollTo(i)}})},onKeyDown(t){this.isOutlineEdit&&[46,8].includes(t.keyCode)&&this.currentData&&(t.stopPropagation(),this.$refs.tree.remove(this.currentData),this.currentData=null,this.save())},onPaste(t){Object(s["T"])(t)},getKey(){return Math.random()},onPrint(){Object(l["d"])(this.$refs.outlineEditBox)},onClose(){this.setIsOutlineEdit(!1),this.$bus.$emit("setData",this.getData())},scrollTo(t){let e=this.$refs.outlineEditBox,a=e.offsetHeight,i=e.scrollTop;t+=50,t>i+a&&e.scrollTo(0,t-a/2)},getData(){let t={},e=this.data[0],a=(t,e)=>{e.data=t.data,e.children=[],(t.children||[]).forEach(t=>{const i={};e.children.push(i),a(t,i)})};return a(e,t),Object(s["tb"])(t)},save(){Object(r["f"])({root:this.getData()})}}},d=c,h=(a("48a9"),a("e0d3"),a("2877")),u=Object(h["a"])(d,i,n,!1,null,"101432aa",null);e["a"]=u.exports},"23cf":function(t,e,a){},"254c":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("Sidebar",{ref:"sidebar",attrs:{title:t.$t("setting.title")}},[t.configData?e("div",{staticClass:"sidebarContent customScrollbar",class:{isDark:t.isDark}},[e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:t.watermarkShowChange},model:{value:t.watermarkConfig.show,callback:function(e){t.$set(t.watermarkConfig,"show",e)},expression:"watermarkConfig.show"}},[t._v(t._s(t.$t("setting.showWatermark")))])],1)]),t.watermarkConfig.show?[e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:t.updateWatermarkConfig},model:{value:t.watermarkConfig.onlyExport,callback:function(e){t.$set(t.watermarkConfig,"onlyExport",e)},expression:"watermarkConfig.onlyExport"}},[t._v(t._s(t.$t("setting.onlyExport")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:t.updateWatermarkConfig},model:{value:t.watermarkConfig.belowNode,callback:function(e){t.$set(t.watermarkConfig,"belowNode",e)},expression:"watermarkConfig.belowNode"}},[t._v(t._s(t.$t("setting.belowNode")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.watermarkText")))]),e("el-input",{attrs:{size:"small"},on:{change:t.updateWatermarkConfig},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:t.watermarkConfig.text,callback:function(e){t.$set(t.watermarkConfig,"text",e)},expression:"watermarkConfig.text"}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.watermarkTextColor")))]),e("span",{directives:[{name:"popover",rawName:"v-popover:popover3",arg:"popover3"}],staticClass:"block",style:{backgroundColor:t.watermarkConfig.textStyle.color}}),e("el-popover",{ref:"popover3",attrs:{placement:"bottom",trigger:"click"}},[e("Color",{attrs:{color:t.watermarkConfig.textStyle.color},on:{change:e=>{t.watermarkConfig.textStyle.color=e,t.updateWatermarkConfig()}}})],1)],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.watermarkTextOpacity")))]),e("el-slider",{staticStyle:{width:"170px"},attrs:{min:0,max:1,step:.1},on:{change:t.updateWatermarkConfig},model:{value:t.watermarkConfig.textStyle.opacity,callback:function(e){t.$set(t.watermarkConfig.textStyle,"opacity",e)},expression:"watermarkConfig.textStyle.opacity"}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.watermarkTextFontSize")))]),e("el-input-number",{attrs:{size:"small",min:0,max:50,step:1},on:{change:t.updateWatermarkConfig},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:t.watermarkConfig.textStyle.fontSize,callback:function(e){t.$set(t.watermarkConfig.textStyle,"fontSize",e)},expression:"watermarkConfig.textStyle.fontSize"}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.watermarkAngle")))]),e("el-input-number",{attrs:{size:"small",min:0,max:90,step:10},on:{change:t.updateWatermarkConfig},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:t.watermarkConfig.angle,callback:function(e){t.$set(t.watermarkConfig,"angle",e)},expression:"watermarkConfig.angle"}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.watermarkLineSpacing")))]),e("el-input-number",{attrs:{size:"small",step:10},on:{change:t.updateWatermarkConfig},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:t.watermarkConfig.lineSpacing,callback:function(e){t.$set(t.watermarkConfig,"lineSpacing",e)},expression:"watermarkConfig.lineSpacing"}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.watermarkTextSpacing")))]),e("el-input-number",{attrs:{size:"small",step:10},on:{change:t.updateWatermarkConfig},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:t.watermarkConfig.textSpacing,callback:function(e){t.$set(t.watermarkConfig,"textSpacing",e)},expression:"watermarkConfig.textSpacing"}})],1)])]:t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:e=>{t.updateOtherConfig("openPerformance",e)}},model:{value:t.config.openPerformance,callback:function(e){t.$set(t.config,"openPerformance",e)},expression:"config.openPerformance"}},[t._v(t._s(t.$t("setting.openPerformance")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:e=>{t.updateOtherConfig("enableFreeDrag",e)}},model:{value:t.config.enableFreeDrag,callback:function(e){t.$set(t.config,"enableFreeDrag",e)},expression:"config.enableFreeDrag"}},[t._v(t._s(t.$t("setting.enableFreeDrag")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:t.enableNodeRichTextChange},model:{value:t.enableNodeRichText,callback:function(e){t.enableNodeRichText=e},expression:"enableNodeRichText"}},[t._v(t._s(t.$t("setting.isEnableNodeRichText")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:function(e){return t.updateOtherConfig("openRealtimeRenderOnNodeTextEdit",e)}},model:{value:t.config.openRealtimeRenderOnNodeTextEdit,callback:function(e){t.$set(t.config,"openRealtimeRenderOnNodeTextEdit",e)},expression:"config.openRealtimeRenderOnNodeTextEdit"}},[t._v(t._s(t.$t("setting.openRealtimeRenderOnNodeTextEdit")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:function(e){return t.updateLocalConfig("isShowScrollbar",e)}},model:{value:t.localConfigs.isShowScrollbar,callback:function(e){t.$set(t.localConfigs,"isShowScrollbar",e)},expression:"localConfigs.isShowScrollbar"}},[t._v(t._s(t.$t("setting.isShowScrollbar")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:function(e){return t.updateOtherConfig("alwaysShowExpandBtn",e)}},model:{value:t.config.alwaysShowExpandBtn,callback:function(e){t.$set(t.config,"alwaysShowExpandBtn",e)},expression:"config.alwaysShowExpandBtn"}},[t._v(t._s(t.$t("setting.alwaysShowExpandBtn")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:function(e){return t.updateOtherConfig("enableAutoEnterTextEditWhenKeydown",e)}},model:{value:t.config.enableAutoEnterTextEditWhenKeydown,callback:function(e){t.$set(t.config,"enableAutoEnterTextEditWhenKeydown",e)},expression:"config.enableAutoEnterTextEditWhenKeydown"}},[t._v(t._s(t.$t("setting.enableAutoEnterTextEditWhenKeydown")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:function(e){return t.updateLocalConfig("enableDragImport",e)}},model:{value:t.localConfigs.enableDragImport,callback:function(e){t.$set(t.localConfigs,"enableDragImport",e)},expression:"localConfigs.enableDragImport"}},[t._v(t._s(t.$t("setting.enableDragImport")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:function(e){return t.updateOtherConfig("enableInheritAncestorLineStyle",e)}},model:{value:t.config.enableInheritAncestorLineStyle,callback:function(e){t.$set(t.config,"enableInheritAncestorLineStyle",e)},expression:"config.enableInheritAncestorLineStyle"}},[t._v(t._s(t.$t("setting.enableInheritAncestorLineStyle")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:function(e){return t.updateLocalConfig("enableAi",e)}},model:{value:t.localConfigs.enableAi,callback:function(e){t.$set(t.localConfigs,"enableAi",e)},expression:"localConfigs.enableAi"}},[t._v(t._s(t.$t("setting.enableAi")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.mousewheelAction")))]),e("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:""},on:{change:e=>{t.updateOtherConfig("mousewheelAction",e)}},model:{value:t.config.mousewheelAction,callback:function(e){t.$set(t.config,"mousewheelAction",e)},expression:"config.mousewheelAction"}},[e("el-option",{attrs:{label:t.$t("setting.zoomView"),value:"zoom"}}),e("el-option",{attrs:{label:t.$t("setting.moveViewUpDown"),value:"move"}})],1)],1)]),"zoom"===t.config.mousewheelAction?e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.mousewheelZoomActionReverse")))]),e("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:""},on:{change:e=>{t.updateOtherConfig("mousewheelZoomActionReverse",e)}},model:{value:t.config.mousewheelZoomActionReverse,callback:function(e){t.$set(t.config,"mousewheelZoomActionReverse",e)},expression:"config.mousewheelZoomActionReverse"}},[e("el-option",{attrs:{label:t.$t("setting.mousewheelZoomActionReverse1"),value:!1}}),e("el-option",{attrs:{label:t.$t("setting.mousewheelZoomActionReverse2"),value:!0}})],1)],1)]):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.createNewNodeBehavior")))]),e("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:""},on:{change:e=>{t.updateOtherConfig("createNewNodeBehavior",e)}},model:{value:t.config.createNewNodeBehavior,callback:function(e){t.$set(t.config,"createNewNodeBehavior",e)},expression:"config.createNewNodeBehavior"}},[e("el-option",{attrs:{label:t.$t("setting.default"),value:"default"}}),e("el-option",{attrs:{label:t.$t("setting.notActive"),value:"notActive"}}),e("el-option",{attrs:{label:t.$t("setting.activeOnly"),value:"activeOnly"}})],1)],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.imgTextMargin")))]),e("el-slider",{staticStyle:{width:"150px"},on:{change:e=>{t.updateOtherConfig("imgTextMargin",e)}},model:{value:t.config.imgTextMargin,callback:function(e){t.$set(t.config,"imgTextMargin",e)},expression:"config.imgTextMargin"}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.textContentMargin")))]),e("el-slider",{staticStyle:{width:"150px"},on:{change:e=>{t.updateOtherConfig("textContentMargin",e)}},model:{value:t.config.textContentMargin,callback:function(e){t.$set(t.config,"textContentMargin",e)},expression:"config.textContentMargin"}})],1)])],2):t._e()])},n=[],o=(a("0643"),a("4e3e"),a("62a5")),s=a("365c"),r=a("2f62"),l=a("aadb"),c={components:{Sidebar:o["a"],Color:l["a"]},props:{configData:{type:Object,default:null},mindMap:{type:Object}},data(){return{config:{openPerformance:!1,enableFreeDrag:!1,mousewheelAction:"zoom",mousewheelZoomActionReverse:!1,createNewNodeBehavior:"default",openRealtimeRenderOnNodeTextEdit:!0,alwaysShowExpandBtn:!1,enableAutoEnterTextEditWhenKeydown:!0,imgTextMargin:0,textContentMargin:0,enableInheritAncestorLineStyle:!1},watermarkConfig:{show:!1,onlyExport:!1,text:"",lineSpacing:100,textSpacing:100,angle:30,textStyle:{color:"",opacity:0,fontSize:1}},updateWatermarkTimer:null,enableNodeRichText:!0,localConfigs:{isShowScrollbar:!1,enableDragImport:!1,enableAi:!1}}},computed:{...Object(r["c"])({activeSidebar:t=>t.activeSidebar,localConfig:t=>t.localConfig,isDark:t=>t.localConfig.isDark})},watch:{activeSidebar(t){"setting"===t?(this.$refs.sidebar.show=!0,this.initConfig(),this.initWatermark()):this.$refs.sidebar.show=!1}},created(){this.initLoacalConfig(),this.$bus.$on("toggleOpenNodeRichText",this.onToggleOpenNodeRichText)},beforeDestroy(){this.$bus.$off("toggleOpenNodeRichText",this.onToggleOpenNodeRichText)},methods:{...Object(r["b"])(["setLocalConfig"]),initConfig(){Object.keys(this.config).forEach(t=>{"object"===typeof this.config[t]?this.config[t]={...this.mindMap.getConfig(t)||{}}:this.config[t]=this.mindMap.getConfig(t)})},initLoacalConfig(){this.enableNodeRichText=this.localConfig.openNodeRichText,this.mousewheelAction=this.localConfig.mousewheelAction,this.mousewheelZoomActionReverse=this.localConfig.mousewheelZoomActionReverse,Object.keys(this.localConfigs).forEach(t=>{this.localConfigs[t]=this.localConfig[t]})},initWatermark(){const t=this.mindMap.getConfig("watermarkConfig");["text","lineSpacing","textSpacing","angle","onlyExport"].forEach(e=>{this.watermarkConfig[e]=t[e]}),this.watermarkConfig.show=!!t.text,this.watermarkConfig.textStyle={...t.textStyle}},updateOtherConfig(t,e){this.mindMap.updateConfig({[t]:e}),this.configData[t]=e,Object(s["e"])(this.configData),["alwaysShowExpandBtn","imgTextMargin","textContentMargin","enableInheritAncestorLineStyle"].includes(t)&&this.mindMap.reRender()},updateWatermarkConfig(){clearTimeout(this.updateWatermarkTimer),this.updateWatermarkTimer=setTimeout(()=>{let{show:t,...e}=this.watermarkConfig;this.mindMap.watermark.updateWatermark({...e}),this.configData.watermarkConfig=this.mindMap.getConfig("watermarkConfig"),Object(s["e"])(this.configData)},300)},watermarkShowChange(t){if(t){let t=this.watermarkConfig.text||this.$t("setting.watermarkDefaultText");this.watermarkConfig.text=t}else this.watermarkConfig.text="";this.updateWatermarkConfig()},enableNodeRichTextChange(t){this.$confirm(this.$t("setting.changeRichTextTip"),t?this.$t("setting.changeRichTextTip2"):this.$t("setting.changeRichTextTip3"),{confirmButtonText:this.$t("setting.confirm"),cancelButtonText:this.$t("setting.cancel"),type:"warning"}).then(()=>{this.mindMap.renderer.textEdit.hideEditTextBox(),this.setLocalConfig({openNodeRichText:t})}).catch(()=>{this.enableNodeRichText=!this.enableNodeRichText})},onToggleOpenNodeRichText(t){this.setLocalConfig({openNodeRichText:t}),this.enableNodeRichText=t},updateLocalConfig(t,e){this.setLocalConfig({[t]:e})}}},d=c,h=(a("f811"),a("2877")),u=Object(h["a"])(d,i,n,!1,null,"3b8fc921",null);e["a"]=u.exports},"290f":function(t,e,a){"use strict";a("679e")},"29fd":function(t,e,a){"use strict";a("3a11")},"384d":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("Sidebar",{ref:"sidebar",attrs:{title:t.$t("outline.title")}},[e("div",{staticClass:"btnList"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("outline.print"),placement:"top"}},[e("div",{staticClass:"btn",on:{click:t.onPrint}},[e("span",{staticClass:"icon iconfont iconprinting"})])]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("outline.fullscreen"),placement:"top"}},[e("div",{staticClass:"btn",class:{isDark:t.isDark},on:{click:t.onChangeToOutlineEdit}},[e("span",{staticClass:"icon iconfont iconquanping1"})])])],1),"outline"===t.activeSidebar?e("Outline",{ref:"outlineRef",attrs:{mindMap:t.mindMap},on:{scrollTo:t.onScrollTo}}):t._e()],1)},n=[],o=a("62a5"),s=a("2f62"),r=function(){var t=this,e=t._self._c;return e("el-tree",{ref:"tree",staticClass:"outlineTree",class:{isDark:t.isDark},attrs:{"node-key":"uid",draggable:"","default-expand-all":"",data:t.data,props:t.defaultProps,"highlight-current":!0,"expand-on-click-node":!1,"allow-drag":t.checkAllowDrag},on:{"node-drop":t.onNodeDrop,"node-drag-start":t.onNodeDragStart,"node-drag-end":t.onNodeDragEnd,"current-change":t.onCurrentChange},nativeOn:{mouseenter:function(e){t.isInTreArea=!0},mouseleave:function(e){t.isInTreArea=!1}},scopedSlots:t._u([{key:"default",fn:function({node:a,data:i}){return e("span",{staticClass:"customNode",attrs:{"data-id":i.uid},on:{click:function(e){return t.onClick(i)}}},[e("span",{key:t.getKey(),staticClass:"nodeEdit",attrs:{contenteditable:!t.isReadonly},domProps:{innerHTML:t._s(a.label)},on:{keydown:function(e){return e.stopPropagation(),t.onNodeInputKeydown(e,a)},keyup:function(t){t.stopPropagation()},blur:function(e){return t.onBlur(e,a)},paste:function(e){return t.onPaste(e,a)}}})])}}])})},l=[],c=(a("0643"),a("4e3e"),a("d17d")),d={props:{mindMap:{type:Object}},data(){return{data:[],defaultProps:{label:"label"},currentData:null,notHandleDataChange:!1,isHandleNodeTreeRenderEnd:!1,beInsertNodeUid:"",insertType:"",isInTreArea:!1,isAfterCreateNewNode:!1}},computed:{...Object(s["c"])({isReadonly:t=>t.isReadonly,isDark:t=>t.localConfig.isDark})},created(){window.addEventListener("keydown",this.onKeyDown),this.$bus.$on("data_change",this.handleDataChange),this.$bus.$on("node_tree_render_end",this.handleNodeTreeRenderEnd),this.$bus.$on("hide_text_edit",this.handleHideTextEdit)},mounted(){this.refresh()},beforeDestroy(){window.removeEventListener("keydown",this.onKeyDown),this.$bus.$off("data_change",this.handleDataChange),this.$bus.$off("node_tree_render_end",this.handleNodeTreeRenderEnd),this.$bus.$off("hide_text_edit",this.handleHideTextEdit)},methods:{...Object(s["b"])(["setIsDragOutlineTreeNode"]),handleHideTextEdit(){this.notHandleDataChange&&(this.notHandleDataChange=!1,this.refresh())},handleDataChange(){if(this.notHandleDataChange)return this.notHandleDataChange=!1,void(this.isAfterCreateNewNode=!1);this.isAfterCreateNewNode?this.isAfterCreateNewNode=!1:this.refresh()},handleNodeTreeRenderEnd(){if(this.insertType)return this[this.insertType](),void(this.insertType="");this.isHandleNodeTreeRenderEnd&&(this.isHandleNodeTreeRenderEnd=!1,this.refresh(),this.$nextTick(()=>{this.afterCreateNewNode()}))},refresh(){let t=this.mindMap.getData();t.root=!0;let e=t=>{let a=t.data.richText?Object(c["hb"])(t.data.text):t.data.text;a=Object(c["V"])(a),a=a.replace(/\n/g,"<br>"),t.textCache=a,t.label=a,t.uid=t.data.uid,t.children&&t.children.length>0&&t.children.forEach(t=>{e(t)})};e(t),this.data=[t]},afterCreateNewNode(){let t=this.beInsertNodeUid;if(t&&this.$refs.tree)try{this.isAfterCreateNewNode=!0,this.$refs.tree.setCurrentKey(t);let e=this.$refs.tree.getNode(t);this.onCurrentChange(e.data),this.onClick(e.data);const a=document.querySelector(`.customNode[data-id="${t}"] .nodeEdit`);if(a){let t=window.getSelection(),e=document.createRange();e.selectNodeContents(a),t.removeAllRanges(),t.addRange(e);let i=a.offsetTop;this.$emit("scrollTo",i)}}catch(e){console.log(e)}this.beInsertNodeUid=""},checkAllowDrag(t){return!t.data.root},onBlur(t,e){if(e.data.textCache===t.target.innerHTML)return void(this.insertType&&(this[this.insertType](),this.insertType=""));const a=e.data.data.richText,i=a?t.target.innerHTML:t.target.innerText,n=this.mindMap.renderer.findNodeByUid(e.data.uid);n&&(this.notHandleDataChange=!0,a?n.setText(Object(c["vb"])(i),!0):n.setText(i))},onPaste(t){Object(c["T"])(t)},getKey(){return Math.random()},onNodeInputKeydown(t){13!==t.keyCode||t.shiftKey||(t.preventDefault(),this.insertType="insertNode",t.target.blur()),9===t.keyCode&&(t.preventDefault(),t.shiftKey?(this.insertType="moveUp",t.target.blur()):(this.insertType="insertChildNode",t.target.blur()))},moveUp(){this.mindMap.execCommand("MOVE_UP_ONE_LEVEL")},insertNode(){this.notHandleDataChange=!0,this.isHandleNodeTreeRenderEnd=!0,this.beInsertNodeUid=Object(c["r"])(),this.mindMap.execCommand("INSERT_NODE",!1,[],{uid:this.beInsertNodeUid})},insertChildNode(){this.notHandleDataChange=!0,this.isHandleNodeTreeRenderEnd=!0,this.beInsertNodeUid=Object(c["r"])(),this.mindMap.execCommand("INSERT_CHILD_NODE",!1,[],{uid:this.beInsertNodeUid})},onClick(t){this.notHandleDataChange=!0;const e=this.mindMap.renderer.findNodeByUid(t.uid);e&&e.nodeData.data.isActive||this.mindMap.execCommand("GO_TARGET_NODE",t.uid,()=>{this.notHandleDataChange=!1})},onNodeDragStart(){this.setIsDragOutlineTreeNode(!0)},onNodeDragEnd(){this.setIsDragOutlineTreeNode(!1)},onNodeDrop(t,e,a){this.notHandleDataChange=!0;const i=this.mindMap.renderer.findNodeByUid(t.data.uid),n=this.mindMap.renderer.findNodeByUid(e.data.uid);if(i&&n)switch(a){case"before":this.mindMap.execCommand("INSERT_BEFORE",i,n);break;case"after":this.mindMap.execCommand("INSERT_AFTER",i,n);break;case"inner":this.mindMap.execCommand("MOVE_NODE_TO",i,n);break;default:break}},onCurrentChange(t){this.currentData=t},onKeyDown(t){if(this.isInTreArea&&[46,8].includes(t.keyCode)&&this.currentData){t.stopPropagation(),this.mindMap.renderer.textEdit.hideEditTextBox();const e=this.mindMap.renderer.findNodeByUid(this.currentData.uid);e&&!e.isRoot&&(this.notHandleDataChange=!0,this.$refs.tree.remove(this.currentData),this.mindMap.execCommand("REMOVE_NODE",[e]))}}}},h=d,u=(a("c1c4"),a("290f"),a("2877")),f=Object(u["a"])(h,r,l,!1,null,"6aa28655",null),p=f.exports,m=a("ed08"),g={components:{Sidebar:o["a"],Outline:p},props:{mindMap:{type:Object}},computed:{...Object(s["c"])({isDark:t=>t.localConfig.isDark,activeSidebar:t=>t.activeSidebar})},watch:{activeSidebar(t){this.$refs.sidebar.show="outline"===t}},methods:{...Object(s["b"])(["setIsOutlineEdit","setActiveSidebar"]),onChangeToOutlineEdit(){this.setActiveSidebar(null),this.setIsOutlineEdit(!0)},onScrollTo(t){let e=this.$refs.sidebar.getEl(),a=e.offsetHeight,i=e.scrollTop;t>i+a&&e.scrollTo(0,t-a/2)},onPrint(){Object(m["d"])(this.$refs.outlineRef.$el)}}},C=g,b=(a("29fd"),Object(u["a"])(C,i,n,!1,null,"79ae20f4",null));e["a"]=b.exports},"396b":function(t,e,a){"use strict";a("ee83")},"3a11":function(t,e,a){},4032:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.showRichTextToolbar,expression:"showRichTextToolbar"}],ref:"richTextToolbar",staticClass:"richTextToolbar",class:{isDark:t.isDark},style:t.style,on:{"&click":function(t){t.stopPropagation()}}},[e("el-tooltip",{attrs:{content:t.$t("richTextToolbar.bold"),placement:"top"}},[e("div",{staticClass:"btn",class:{active:t.formatInfo.bold},on:{click:t.toggleBold}},[e("span",{staticClass:"icon iconfont iconzitijiacu"})])]),e("el-tooltip",{attrs:{content:t.$t("richTextToolbar.italic"),placement:"top"}},[e("div",{staticClass:"btn",class:{active:t.formatInfo.italic},on:{click:t.toggleItalic}},[e("span",{staticClass:"icon iconfont iconzitixieti"})])]),e("el-tooltip",{attrs:{content:t.$t("richTextToolbar.underline"),placement:"top"}},[e("div",{staticClass:"btn",class:{active:t.formatInfo.underline},on:{click:t.toggleUnderline}},[e("span",{staticClass:"icon iconfont iconzitixiahuaxian"})])]),e("el-tooltip",{attrs:{content:t.$t("richTextToolbar.strike"),placement:"top"}},[e("div",{staticClass:"btn",class:{active:t.formatInfo.strike},on:{click:t.toggleStrike}},[e("span",{staticClass:"icon iconfont iconshanchuxian"})])]),e("el-tooltip",{attrs:{content:t.$t("richTextToolbar.fontFamily"),placement:"top"}},[e("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},[e("div",{staticClass:"fontOptionsList",class:{isDark:t.isDark}},t._l(t.fontFamilyList,(function(a){return e("div",{key:a.value,staticClass:"fontOptionItem",class:{active:t.formatInfo.font===a.value},style:{fontFamily:a.value},on:{click:function(e){return t.changeFontFamily(a.value)}}},[t._v(" "+t._s(a.name)+" ")])})),0),e("div",{staticClass:"btn",attrs:{slot:"reference"},slot:"reference"},[e("span",{staticClass:"icon iconfont iconxingzhuang-wenzi"})])])],1),e("el-tooltip",{attrs:{content:t.$t("richTextToolbar.fontSize"),placement:"top"}},[e("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},[e("div",{staticClass:"fontOptionsList",class:{isDark:t.isDark}},t._l(t.fontSizeList,(function(a){return e("div",{key:a,staticClass:"fontOptionItem",class:{active:t.formatInfo.size===a+"px"},style:{fontSize:a+"px",height:(a<30?30:a+10)+"px"},on:{click:function(e){return t.changeFontSize(a)}}},[t._v(" "+t._s(a)+"px ")])})),0),e("div",{staticClass:"btn",attrs:{slot:"reference"},slot:"reference"},[e("span",{staticClass:"icon iconfont iconcase fontColor"})])])],1),e("el-tooltip",{attrs:{content:t.$t("richTextToolbar.color"),placement:"top"}},[e("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},[e("Color",{attrs:{color:t.fontColor},on:{change:t.changeFontColor}}),e("div",{staticClass:"btn",style:{color:t.formatInfo.color},attrs:{slot:"reference"},slot:"reference"},[e("span",{staticClass:"icon iconfont iconzitiyanse"})])],1)],1),e("el-tooltip",{attrs:{content:t.$t("richTextToolbar.backgroundColor"),placement:"top"}},[e("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},[e("Color",{attrs:{color:t.fontBackgroundColor},on:{change:t.changeFontBackgroundColor}}),e("div",{staticClass:"btn",attrs:{slot:"reference"},slot:"reference"},[e("span",{staticClass:"icon iconfont iconbeijingyanse"})])],1)],1),e("el-tooltip",{attrs:{content:t.$t("richTextToolbar.textAlign"),placement:"top"}},[e("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},[e("div",{staticClass:"fontOptionsList",class:{isDark:t.isDark}},t._l(t.alignList,(function(a){return e("div",{key:a.value,staticClass:"fontOptionItem",class:{active:t.formatInfo.align===a.value},on:{click:function(e){return t.changeTextAlign(a.value)}}},[t._v(" "+t._s(a.name)+" ")])})),0),e("div",{staticClass:"btn",attrs:{slot:"reference"},slot:"reference"},[e("span",{staticClass:"icon iconfont iconjuzhongduiqi"})])])],1),e("el-tooltip",{attrs:{content:t.$t("richTextToolbar.removeFormat"),placement:"top"}},[e("div",{staticClass:"btn",on:{click:t.removeFormat}},[e("span",{staticClass:"icon iconfont iconqingchu"})])])],1)},n=[],o=a("f121"),s=a("aadb"),r=a("2f62"),l={components:{Color:s["a"]},props:{mindMap:{type:Object}},data(){return{fontSizeList:o["k"],showRichTextToolbar:!1,style:{left:0,top:0},fontColor:"",fontBackgroundColor:"",formatInfo:{}}},computed:{...Object(r["c"])({isDark:t=>t.localConfig.isDark}),fontFamilyList(){return o["j"][this.$i18n.locale]||o["j"].zh},alignList(){return o["a"][this.$i18n.locale]||o["a"].zh}},created(){this.$bus.$on("rich_text_selection_change",this.onRichTextSelectionChange)},mounted(){document.body.append(this.$refs.richTextToolbar)},beforeDestroy(){this.$bus.$off("rich_text_selection_change",this.onRichTextSelectionChange)},methods:{onRichTextSelectionChange(t,e,a){t&&(this.style.left=e.left+e.width/2+"px",this.style.top=e.top-60+"px",this.formatInfo={...a||{}}),this.showRichTextToolbar=t},toggleBold(){this.formatInfo.bold=!this.formatInfo.bold,this.mindMap.richText.formatText({bold:this.formatInfo.bold})},toggleItalic(){this.formatInfo.italic=!this.formatInfo.italic,this.mindMap.richText.formatText({italic:this.formatInfo.italic})},toggleUnderline(){this.formatInfo.underline=!this.formatInfo.underline,this.mindMap.richText.formatText({underline:this.formatInfo.underline})},toggleStrike(){this.formatInfo.strike=!this.formatInfo.strike,this.mindMap.richText.formatText({strike:this.formatInfo.strike})},changeFontFamily(t){this.formatInfo.font=t,this.mindMap.richText.formatText({font:t})},changeFontSize(t){this.formatInfo.size=t,this.mindMap.richText.formatText({size:t+"px"})},changeFontColor(t){this.formatInfo.color=t,this.mindMap.richText.formatText({color:t})},changeFontBackgroundColor(t){this.formatInfo.background=t,this.mindMap.richText.formatText({background:t})},changeTextAlign(t){this.formatInfo.align=t,this.mindMap.richText.formatText({align:t})},removeFormat(){this.mindMap.richText.removeFormat()}}},c=l,d=(a("dcda"),a("2877")),h=Object(d["a"])(c,i,n,!1,null,"19bedf10",null);e["a"]=h.exports},"48a9":function(t,e,a){"use strict";a("ebc6")},"679e":function(t,e,a){},"6d7b":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"scaleContainer",class:{isDark:t.isDark}},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("scale.zoomOut"),placement:"top"}},[e("div",{staticClass:"btn el-icon-minus",on:{click:t.narrow}})]),e("div",{staticClass:"scaleInfo"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.scaleNum,expression:"scaleNum"}],ref:"inputRef",attrs:{type:"text"},domProps:{value:t.scaleNum},on:{input:[function(e){e.target.composing||(t.scaleNum=e.target.value)},t.onScaleNumInput],change:t.onScaleNumChange,focus:t.onScaleNumInputFocus,keydown:function(t){t.stopPropagation()},keyup:function(t){t.stopPropagation()}}}),t._v("% ")]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("scale.zoomIn"),placement:"top"}},[e("div",{staticClass:"btn el-icon-plus",on:{click:t.enlarge}})])],1)},n=[],o={props:{mindMap:{type:Object},isDark:{type:Boolean}},data(){return{scaleNum:100,cacheScaleNum:0}},watch:{mindMap(t,e){t&&!e&&(this.mindMap.on("scale",this.onScale),this.mindMap.on("draw_click",this.onDrawClick),this.scaleNum=this.toPer(this.mindMap.view.scale))}},beforeDestroy(){this.mindMap.off("scale",this.onScale),this.mindMap.off("draw_click",this.onDrawClick)},methods:{toPer(t){return(100*t).toFixed(0)},narrow(){this.mindMap.view.narrow()},enlarge(){this.mindMap.view.enlarge()},onScaleNumInputFocus(){this.cacheScaleNum=this.scaleNum},onScaleNumInput(){this.scaleNum=this.scaleNum.replace(/[^0-9]+/g,"")},onScaleNumChange(){const t=Number(this.scaleNum);if(Number.isNaN(t)||t<=0)this.scaleNum=this.cacheScaleNum;else{const t=this.mindMap.width/2,e=this.mindMap.height/2;this.mindMap.view.setScale(this.scaleNum/100,t,e)}},onScale(t){this.scaleNum=this.toPer(t)},onDrawClick(){this.$refs.inputRef&&this.$refs.inputRef.blur()}}},s=o,r=(a("0d42"),a("2877")),l=Object(r["a"])(s,i,n,!1,null,"3225a510",null);e["a"]=l.exports},"751d":function(t,e,a){},"84ee":function(t,e,a){},9678:function(t,e,a){},aaa6:function(t,e,a){"use strict";a("5b81");var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"searchContainer",class:{isDark:t.isDark,show:t.show}},[e("div",{staticClass:"closeBtnBox"},[e("span",{staticClass:"closeBtn el-icon-close",on:{click:t.close}})]),e("div",{staticClass:"searchInputBox"},[e("el-input",{ref:"searchInputRef",attrs:{placeholder:t.$t("search.searchPlaceholder"),size:"small"},on:{focus:t.onFocus,blur:t.onBlur},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),t.onSearchNext.apply(null,arguments))},keydown:function(t){t.stopPropagation()}},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}},[e("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"}),t.isUndef(t.searchText)?t._e():e("el-button",{attrs:{slot:"append",size:"small"},on:{click:function(e){t.showReplaceInput=!0}},slot:"append"},[t._v(t._s(t.$t("search.replace")))])],1),t.showSearchInfo&&!t.isUndef(t.searchText)?e("div",{staticClass:"searchInfo"},[t._v(" "+t._s(t.currentIndex)+" / "+t._s(t.total)+" ")]):t._e()],1),t.showReplaceInput?e("el-input",{ref:"replaceInputRef",staticStyle:{margin:"12px 0"},attrs:{placeholder:t.$t("search.replacePlaceholder"),size:"small"},on:{focus:t.onFocus,blur:t.onBlur},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:t.replaceText,callback:function(e){t.replaceText=e},expression:"replaceText"}},[e("i",{staticClass:"el-input__icon el-icon-edit",attrs:{slot:"prefix"},slot:"prefix"}),e("el-button",{attrs:{slot:"append",size:"small"},on:{click:t.hideReplaceInput},slot:"append"},[t._v(t._s(t.$t("search.cancel")))])],1):t._e(),t.showReplaceInput?e("div",{staticClass:"btnList"},[e("el-button",{attrs:{size:"small",disabled:t.isReadonly},on:{click:t.replace}},[t._v(t._s(t.$t("search.replace")))]),e("el-button",{attrs:{size:"small",disabled:t.isReadonly},on:{click:t.replaceAll}},[t._v(t._s(t.$t("search.replaceAll")))])],1):t._e(),t.showSearchResultList?e("div",{staticClass:"searchResultList",style:{height:t.searchResultListHeight+"px"}},[t._l(t.searchResultList,(function(a,i){return e("div",{key:a.id,staticClass:"searchResultItem",attrs:{title:a.name},domProps:{innerHTML:t._s(a.text)},on:{click:function(e){return e.stopPropagation(),t.onSearchResultItemClick(i)}}})})),t.searchResultList.length<=0?e("div",{staticClass:"empty"},[e("span",{staticClass:"iconfont iconwushuju"}),e("span",{staticClass:"text"},[t._v(t._s(t.$t("search.noResult")))])]):t._e()],2):t._e()],1)},n=[],o=(a("0643"),a("a573"),a("2f62")),s=a("d17d"),r={props:{mindMap:{type:Object}},data(){return{show:!1,searchText:"",replaceText:"",showReplaceInput:!1,currentIndex:0,total:0,showSearchInfo:!1,searchResultListHeight:0,searchResultList:[],showSearchResultList:!1}},computed:{...Object(o["c"])({isReadonly:t=>t.isReadonly,isDark:t=>t.localConfig.isDark})},watch:{searchText(){Object(s["bb"])(this.searchText)&&(this.currentIndex=0,this.total=0,this.showSearchInfo=!1)}},created(){this.$bus.$on("show_search",this.showSearch),this.mindMap.on("search_info_change",this.handleSearchInfoChange),this.mindMap.on("node_click",this.blur),this.mindMap.on("draw_click",this.blur),this.mindMap.on("expand_btn_click",this.blur),this.mindMap.on("search_match_node_list_change",this.onSearchMatchNodeListChange),this.mindMap.keyCommand.addShortcut("Control+f",this.showSearch),window.addEventListener("resize",this.setSearchResultListHeight),this.$bus.$on("setData",this.close)},mounted(){this.setSearchResultListHeight()},beforeDestroy(){this.$bus.$off("show_search",this.showSearch),this.mindMap.off("search_info_change",this.handleSearchInfoChange),this.mindMap.off("node_click",this.blur),this.mindMap.off("draw_click",this.blur),this.mindMap.off("expand_btn_click",this.blur),this.mindMap.off("search_match_node_list_change",this.onSearchMatchNodeListChange),this.mindMap.keyCommand.removeShortcut("Control+f",this.showSearch),window.removeEventListener("resize",this.setSearchResultListHeight),this.$bus.$off("setData",this.close)},methods:{isUndef:s["bb"],handleSearchInfoChange(t){this.currentIndex=t.currentIndex+1,this.total=t.total,this.showSearchInfo=!0},showSearch(){this.$bus.$emit("closeSideBar"),this.show=!0,this.$refs.searchInputRef.focus()},hideReplaceInput(){this.showReplaceInput=!1,this.replaceText=""},onFocus(){this.mindMap.updateConfig({enableAutoEnterTextEditWhenKeydown:!1})},onBlur(){this.mindMap.updateConfig({enableAutoEnterTextEditWhenKeydown:!0})},blur(){this.$refs.searchInputRef&&this.$refs.searchInputRef.blur(),this.$refs.replaceInputRef&&this.$refs.replaceInputRef.blur()},onSearchNext(){this.showSearchResultList=!0,this.mindMap.search.search(this.searchText)},replace(){this.mindMap.search.replace(this.replaceText,!0)},replaceAll(){this.mindMap.search.replaceAll(this.replaceText)},close(){this.show=!1,this.showSearchResultList=!1,this.showSearchInfo=!1,this.total=0,this.currentIndex=0,this.searchText="",this.hideReplaceInput(),this.mindMap.search.endSearch()},onSearchMatchNodeListChange(t){this.searchResultList=t.map(t=>{const e=t.data||t.nodeData.data;let a=e.text;const i=e.uid;e.richText&&(a=Object(s["O"])(a));const n=new RegExp(""+this.searchText.trim(),"g"),o=a.replace(n,t=>`<span class="match">${t}</span>`);return{data:t,id:i,text:o,name:a}})},setSearchResultListHeight(){this.searchResultListHeight=window.innerHeight-267-24},onSearchResultItemClick(t){this.mindMap.search.jump(t)}}},l=r,c=(a("00da"),a("2877")),d=Object(c["a"])(l,i,n,!1,null,"62884c01",null);e["a"]=d.exports},c1c4:function(t,e,a){"use strict";a("84ee")},dcda:function(t,e,a){"use strict";a("f863")},e0d3:function(t,e,a){"use strict";a("9678")},e459:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"scrollbarContainer",class:{isDark:t.isDark}},[e("div",{ref:"verticalScrollbarRef",staticClass:"scrollbar verticalScrollbar",on:{click:t.onVerticalScrollbarClick}},[e("div",{staticClass:"scrollbarInner",style:t.verticalScrollbarStyle,on:{click:function(t){t.stopPropagation()},mousedown:t.onVerticalScrollbarMousedown}})]),e("div",{ref:"horizontalScrollbarRef",staticClass:"scrollbar horizontalScrollbar",on:{click:t.onHorizontalScrollbarClick}},[e("div",{staticClass:"scrollbarInner",style:t.horizontalScrollbarStyle,on:{click:function(t){t.stopPropagation()},mousedown:t.onHorizontalScrollbarMousedown}})])])},n=[],o=a("2f62"),s={props:{mindMap:{type:Object}},data(){return{timer:null,resizeTimer:null,verticalScrollbarStyle:{},horizontalScrollbarStyle:{}}},computed:{...Object(o["c"])({isDark:t=>t.localConfig.isDark})},mounted(){this.setScrollBarWrapSize(),this.$bus.$on("scrollbar_change",this.updateScrollbar),window.addEventListener("resize",this.onResize)},beforeDestroy(){this.$bus.$off("scrollbar_change",this.updateScrollbar),window.removeEventListener("resize",this.onResize)},methods:{setScrollBarWrapSize(){if(!this.mindMap.scrollbar)return;const{width:t}=this.$refs.horizontalScrollbarRef.getBoundingClientRect(),{height:e}=this.$refs.verticalScrollbarRef.getBoundingClientRect();this.mindMap.scrollbar.setScrollBarWrapSize(t,e)},onResize(){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{this.setScrollBarWrapSize()},300)},updateScrollbar({vertical:t,horizontal:e}){this.verticalScrollbarStyle={top:t.top+"%",height:t.height+"%"},this.horizontalScrollbarStyle={left:e.left+"%",width:e.width+"%"}},onVerticalScrollbarMousedown(t){this.mindMap.scrollbar.onMousedown(t,"vertical")},onVerticalScrollbarClick(t){this.mindMap.scrollbar.onClick(t,"vertical")},onHorizontalScrollbarMousedown(t){this.mindMap.scrollbar.onMousedown(t,"horizontal")},onHorizontalScrollbarClick(t){this.mindMap.scrollbar.onClick(t,"horizontal")}}},r=s,l=(a("396b"),a("2877")),c=Object(l["a"])(r,i,n,!1,null,"27127e84",null);e["a"]=c.exports},e829:function(t,e,a){},ebc6:function(t,e,a){},ee83:function(t,e,a){},f811:function(t,e,a){"use strict";a("751d")},f863:function(t,e,a){}}]);