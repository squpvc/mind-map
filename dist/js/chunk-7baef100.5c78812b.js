(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7baef100"],{"00da":function(t,e,i){"use strict";i("23cf")},"0494":function(t,e,i){"use strict";i("db49")},"05f0":function(t,e,i){},"0c47":function(t,e,i){},"0d42":function(t,e,i){"use strict";i("e829")},"0dda":function(t,e,i){"use strict";i("3771")},"0eab":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"nodeTagDialog",attrs:{title:t.$t("nodeTag.title"),visible:t.dialogVisible,width:t.isMobile?"90%":"50%",top:t.isMobile?"20px":"15vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-input",{attrs:{disabled:t.tagArr.length>=t.max,placeholder:t.$t("nodeTag.addTip")},nativeOn:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.add.apply(null,arguments)},function(t){t.stopPropagation()}],keydown:function(t){t.stopPropagation()}},model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}}),e("div",{staticClass:"tagList"},t._l(t.tagArr,(function(i,s){return e("div",{key:s,staticClass:"tagItem",style:{backgroundColor:t.generateColorByContent(i)}},[t._v(" "+t._s("string"===typeof i?i:i.text)+" "),e("div",{staticClass:"delBtn",on:{click:function(e){return t.del(s)}}},[e("span",{staticClass:"iconfont iconshanchu"})])])})),0),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancel}},[t._v(t._s(t.$t("dialog.cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v(t._s(t.$t("dialog.confirm")))])],1)],1)},o=[],a=(i("14d9"),i("0643"),i("4e3e"),i("d17d")),n={data(){return{dialogVisible:!1,tagArr:[],tag:"",activeNodes:[],max:5,isMobile:Object(a["X"])()}},watch:{dialogVisible(t,e){!t&&e&&this.$bus.$emit("endTextEdit")}},created(){this.$bus.$on("node_active",this.handleNodeActive),this.$bus.$on("showNodeTag",this.handleShowNodeTag)},beforeDestroy(){this.$bus.$off("node_active",this.handleNodeActive),this.$bus.$off("showNodeTag",this.handleShowNodeTag)},methods:{generateColorByContent:a["C"],handleNodeActive(...t){if(this.activeNodes=[...t[1]],this.activeNodes.length>0){let t=this.activeNodes[0];this.tagArr=t.getData("tag")||[]}else this.tagArr=[],this.tag=""},handleShowNodeTag(){this.$bus.$emit("startTextEdit"),this.dialogVisible=!0},add(){const t=this.tag.trim();t&&(this.tagArr.push(t),this.tag="")},del(t){this.tagArr.splice(t,1)},cancel(){this.dialogVisible=!1},confirm(){this.activeNodes.forEach(t=>{t.setTag(this.tagArr)}),this.cancel()}}},l=n,r=(i("e411"),i("2877")),c=Object(r["a"])(l,s,o,!1,null,"6b6bba9c",null);e["a"]=c.exports},"102d":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"nodeHyperlinkDialog",attrs:{title:t.$t("nodeHyperlink.title"),visible:t.dialogVisible,width:t.isMobile?"90%":"50%",top:t.isMobile?"20px":"15vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"item"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeHyperlink.link")))]),e("el-input",{attrs:{size:"mini",placeholder:"http://xxxx.com/"},on:{blur:function(e){return t.handleUrl()}},nativeOn:{keyup:function(t){t.stopPropagation()},keydown:function(t){t.stopPropagation()}},model:{value:t.link,callback:function(e){t.link=e},expression:"link"}},[e("el-select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:t.protocol,callback:function(e){t.protocol=e},expression:"protocol"}},[e("el-option",{attrs:{label:"https",value:"https"}}),e("el-option",{attrs:{label:"http",value:"http"}}),e("el-option",{attrs:{label:"None",value:"none"}})],1)],1)],1),e("div",{staticClass:"item"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeHyperlink.name")))]),e("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){t.stopPropagation()},keydown:function(t){t.stopPropagation()}},model:{value:t.linkTitle,callback:function(e){t.linkTitle=e},expression:"linkTitle"}})],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancel}},[t._v(t._s(t.$t("dialog.cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v(t._s(t.$t("dialog.confirm")))])],1)])},o=[],a=(i("0643"),i("4e3e"),i("d17d")),n={data(){return{dialogVisible:!1,link:"",linkTitle:"",activeNodes:[],protocol:"https",isMobile:Object(a["X"])()}},created(){this.$bus.$on("node_active",this.handleNodeActive),this.$bus.$on("showNodeLink",this.handleShowNodeLink)},beforeDestroy(){this.$bus.$off("node_active",this.handleNodeActive),this.$bus.$off("showNodeLink",this.handleShowNodeLink)},methods:{handleNodeActive(...t){if(this.activeNodes=[...t[1]],this.activeNodes.length>0){let t=this.activeNodes[0];this.link=t.getData("hyperlink")||"",this.handleUrl(!0),this.linkTitle=t.getData("hyperlinkTitle")||""}else this.link="",this.linkTitle=""},removeProtocol(t){return t.replace(/^https?:\/\//,"")},handleUrl(t){const e=this.link.match(/^(https?):\/\//);e&&e[1]?this.protocol=e[1]:this.link?t&&(this.protocol="none"):this.protocol="https",this.link=this.removeProtocol(this.link)},handleShowNodeLink(){this.dialogVisible=!0},cancel(){this.dialogVisible=!1},confirm(){this.activeNodes.forEach(t=>{t.setHyperlink(("none"===this.protocol?"":this.protocol+"://")+this.link,this.linkTitle),this.cancel()})}}},l=n,r=(i("19a0"),i("2877")),c=Object(r["a"])(l,s,o,!1,null,"21beb91c",null);e["a"]=c.exports},1227:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return t.isOutlineEdit?e("div",{ref:"outlineEditContainer",staticClass:"outlineEditContainer",class:{isDark:t.isDark}},[e("div",{staticClass:"btnList"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("outline.print"),placement:"top"}},[e("div",{staticClass:"btn",on:{click:t.onPrint}},[e("span",{staticClass:"icon iconfont iconprinting"})])]),e("div",{staticClass:"btn",on:{click:t.onClose}},[e("span",{staticClass:"icon iconfont iconguanbi"})])],1),e("div",{ref:"outlineEditBox",staticClass:"outlineEditBox",attrs:{id:"fullScreenOutlineEditBox"}},[e("div",{staticClass:"outlineEdit"},[e("el-tree",{ref:"tree",staticClass:"outlineTree",class:{isDark:t.isDark},attrs:{"node-key":"uid",draggable:"","default-expand-all":"",data:t.data,props:t.defaultProps,"highlight-current":!0,"expand-on-click-node":!1,"allow-drag":t.checkAllowDrag},on:{"node-drop":t.onNodeDrop,"current-change":t.onCurrentChange},scopedSlots:t._u([{key:"default",fn:function({node:i,data:s}){return e("span",{staticClass:"customNode",attrs:{"data-id":s.uid}},[e("span",{key:t.getKey(),staticClass:"nodeEdit",attrs:{contenteditable:!t.isReadonly},domProps:{innerHTML:t._s(i.label)},on:{blur:function(e){return t.onBlur(e,i)},keydown:function(e){return e.stopPropagation(),t.onNodeInputKeydown(e,i)},keyup:function(t){t.stopPropagation()},paste:function(e){return t.onPaste(e,i)}}})])}}],null,!1,485109613)})],1)])]):t._e()},o=[],a=(i("14d9"),i("0643"),i("4e3e"),i("2f62")),n=i("d17d"),l=i("365c"),r=i("ed08"),c={props:{mindMap:{type:Object}},data(){return{data:[],defaultProps:{label:"label"},currentData:null}},computed:{...Object(a["c"])({isReadonly:t=>t.isReadonly,isDark:t=>t.localConfig.isDark,isOutlineEdit:t=>t.isOutlineEdit})},watch:{isOutlineEdit(t){t&&(this.refresh(),this.$nextTick(()=>{document.body.appendChild(this.$refs.outlineEditContainer)}))}},created(){window.addEventListener("keydown",this.onKeyDown)},beforeDestroy(){window.removeEventListener("keydown",this.onKeyDown)},methods:{...Object(a["b"])(["setIsOutlineEdit"]),refresh(){let t=this.mindMap.getData();t.root=!0;let e=t=>{let i=t.data.richText?Object(n["hb"])(t.data.text):t.data.text;i=Object(n["V"])(i),i=i.replace(/\n/g,"<br>"),t.textCache=i,t.label=i,t.uid=t.data.uid,t.children&&t.children.length>0&&t.children.forEach(t=>{e(t)})};e(t),this.data=[t]},checkAllowDrag(t){return!t.data.root},onNodeDrop(){this.save()},onCurrentChange(t){this.currentData=t},onBlur(t,e){if(e.data.textCache===t.target.innerHTML)return;const i=e.data.data.richText,s=i?t.target.innerHTML:t.target.innerText;e.data.data.text=i?Object(n["vb"])(s):s,e.data.textCache=t.target.innerHTML,this.save()},onNodeInputKeydown(t,e){const i=!!e.data.data.richText,s=Object(n["r"])(),o=this.$t("outline.nodeDefaultText"),a={textCache:o,uid:s,label:o,data:{text:i?Object(n["vb"])(o):o,uid:s,richText:i},children:[]};if(13===t.keyCode&&!t.shiftKey){if(t.preventDefault(),e.data.root)return;this.$refs.tree.insertAfter(a,e)}9===t.keyCode&&(t.preventDefault(),t.shiftKey?(this.$refs.tree.insertAfter(e.data,e.parent),this.$refs.tree.remove(e)):this.$refs.tree.append(a,e)),this.save(),this.$nextTick(()=>{this.$refs.tree.setCurrentKey(s);const t=document.querySelector(`.customNode[data-id="${s}"] .nodeEdit`);if(t){let e=window.getSelection(),i=document.createRange();i.selectNodeContents(t),e.removeAllRanges(),e.addRange(i);let s=t.offsetTop;this.scrollTo(s)}})},onKeyDown(t){this.isOutlineEdit&&[46,8].includes(t.keyCode)&&this.currentData&&(t.stopPropagation(),this.$refs.tree.remove(this.currentData),this.currentData=null,this.save())},onPaste(t){Object(n["T"])(t)},getKey(){return Math.random()},onPrint(){Object(r["d"])(this.$refs.outlineEditBox)},onClose(){this.setIsOutlineEdit(!1),this.$bus.$emit("setData",this.getData())},scrollTo(t){let e=this.$refs.outlineEditBox,i=e.offsetHeight,s=e.scrollTop;t+=50,t>s+i&&e.scrollTo(0,t-i/2)},getData(){let t={},e=this.data[0],i=(t,e)=>{e.data=t.data,e.children=[],(t.children||[]).forEach(t=>{const s={};e.children.push(s),i(t,s)})};return i(e,t),Object(n["tb"])(t)},save(){Object(l["f"])({root:this.getData()})}}},d=c,h=(i("48a9"),i("e0d3"),i("2877")),u=Object(h["a"])(d,s,o,!1,null,"101432aa",null);e["a"]=u.exports},"12e4":function(t,e,i){},"166a":function(t,e,i){"use strict";i("bbc8")},1798:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("Sidebar",{ref:"sidebar",attrs:{title:t.$t("nodeOuterFrame.nodeOuterFrameStyle")}},[e("div",{staticClass:"sidebarContent",class:{isDark:t.isDark}},[e("div",{staticClass:"panelHeader"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.outerFrameSetting")))]),e("span",{staticClass:"deleteBtn",on:{click:t.deleteOuterFrame}},[t._v(" "+t._s(t.$t("nodeOuterFrame.deleteOuterFrame"))+" "),e("span",{staticClass:"iconfont iconshanchu"})])]),e("div",{staticClass:"panelBody"},[e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.boxStyle")))]),e("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:e=>{t.updateOuterFrame("strokeWidth",e)}},model:{value:t.styleConfig.strokeWidth,callback:function(e){t.$set(t.styleConfig,"strokeWidth",e)},expression:"styleConfig.strokeWidth"}},t._l(t.lineWidthList,(function(i){return e("el-option",{key:i,attrs:{label:i,value:i}},[i>0?e("span",{staticClass:"borderLine",class:{isDark:t.isDark},style:{height:i+"px"}}):t._e()])})),1),e("el-select",{staticStyle:{width:"80px","margin-left":"4px"},attrs:{size:"mini",placeholder:""},on:{change:e=>{t.updateOuterFrame("strokeDasharray",e)}},model:{value:t.styleConfig.strokeDasharray,callback:function(e){t.$set(t.styleConfig,"strokeDasharray",e)},expression:"styleConfig.strokeDasharray"}},t._l(t.borderDasharrayList,(function(i){return e("el-option",{key:i.value,attrs:{label:i.name,value:i.value}},[e("svg",{attrs:{width:"120",height:"34"}},[e("line",{attrs:{x1:"10",y1:"17",x2:"110",y2:"17","stroke-width":"2",stroke:t.styleConfig.strokeDasharray===i.value?"#409eff":t.isDark?"#fff":"#000","stroke-dasharray":i.value}})])])})),1)],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.boxColor")))]),e("span",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],staticClass:"block",style:{backgroundColor:t.styleConfig.strokeColor}}),e("el-popover",{ref:"popover",attrs:{placement:"bottom",trigger:"click"}},[e("Color",{attrs:{color:t.styleConfig.strokeColor},on:{change:e=>{t.updateOuterFrame("strokeColor",e)}}})],1)],1),e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.radius")))]),e("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:e=>{t.updateOuterFrame("radius",e)}},model:{value:t.styleConfig.radius,callback:function(e){t.$set(t.styleConfig,"radius",e)},expression:"styleConfig.radius"}},t._l(t.borderRadiusList,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.fillColor")))]),e("span",{directives:[{name:"popover",rawName:"v-popover:popover2",arg:"popover2"}],staticClass:"block",style:{backgroundColor:t.styleConfig.fill}}),e("el-popover",{ref:"popover2",attrs:{placement:"bottom",trigger:"click"}},[e("Color",{attrs:{color:t.styleConfig.fill},on:{change:e=>{t.updateOuterFrame("fill",e)}}})],1)],1)])]),e("div",{staticClass:"panelHeader",staticStyle:{"margin-top":"12px"}},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.outerFrameText")))]),e("span",{staticClass:"deleteBtn",on:{click:t.deleteOuterFrameText}},[t._v(" "+t._s(t.$t("nodeOuterFrame.deleteOuterFrameText"))+" "),e("span",{staticClass:"iconfont iconshanchu"})])]),e("div",{staticClass:"panelBody"},[e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.fontFamily")))]),e("el-select",{attrs:{size:"mini",placeholder:""},on:{change:e=>{t.updateOuterFrame("fontFamily",e)}},model:{value:t.styleConfig.fontFamily,callback:function(e){t.$set(t.styleConfig,"fontFamily",e)},expression:"styleConfig.fontFamily"}},t._l(t.fontFamilyList,(function(t){return e("el-option",{key:t.value,style:{fontFamily:t.value},attrs:{label:t.name,value:t.value}})})),1)],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"btnGroup"},[e("el-tooltip",{attrs:{content:t.$t("nodeOuterFrame.color"),placement:"bottom"}},[e("div",{directives:[{name:"popover",rawName:"v-popover:popover3",arg:"popover3"}],staticClass:"styleBtn"},[t._v(" A "),e("span",{staticClass:"colorShow",style:{backgroundColor:t.styleConfig.color}})])]),e("el-tooltip",{attrs:{content:t.$t("nodeOuterFrame.fontBold"),placement:"bottom"}},[e("div",{staticClass:"styleBtn",class:{actived:"bold"===t.styleConfig.fontWeight},on:{click:t.toggleFontWeight}},[t._v(" B ")])]),e("el-tooltip",{attrs:{content:t.$t("nodeOuterFrame.italic"),placement:"bottom"}},[e("div",{staticClass:"styleBtn i",class:{actived:"italic"===t.styleConfig.fontStyle},on:{click:t.toggleFontStyle}},[t._v(" I ")])])],1),e("el-popover",{ref:"popover3",attrs:{placement:"bottom",trigger:"hover"}},[e("Color",{attrs:{color:t.styleConfig.color},on:{change:e=>{t.updateOuterFrame("color",e)}}})],1)],1),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.lineHeight")))]),e("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:e=>{t.updateOuterFrame("lineHeight",e)}},model:{value:t.styleConfig.lineHeight,callback:function(e){t.$set(t.styleConfig,"lineHeight",e)},expression:"styleConfig.lineHeight"}},t._l(t.lineHeightList,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.fontSize")))]),e("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:e=>{t.updateOuterFrame("fontSize",e)}},model:{value:t.styleConfig.fontSize,callback:function(e){t.$set(t.styleConfig,"fontSize",e)},expression:"styleConfig.fontSize"}},t._l(t.fontSizeList,(function(t){return e("el-option",{key:t,style:{fontSize:t+"px"},attrs:{label:t,value:t}})})),1)],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.textFill")))]),e("span",{directives:[{name:"popover",rawName:"v-popover:popover4",arg:"popover4"}],staticClass:"block",style:{backgroundColor:t.styleConfig.textFill}}),e("el-popover",{ref:"popover4",attrs:{placement:"bottom",trigger:"click"}},[e("Color",{attrs:{color:t.styleConfig.textFill},on:{change:e=>{t.updateOuterFrame("textFill",e)}}})],1)],1),e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.textFillRadius")))]),e("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:e=>{t.updateOuterFrame("textFillRadius",e)}},model:{value:t.styleConfig.textFillRadius,callback:function(e){t.$set(t.styleConfig,"textFillRadius",e)},expression:"styleConfig.textFillRadius"}},t._l(t.borderRadiusList,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.textAlign")))]),e("el-radio-group",{attrs:{size:"mini"},on:{change:e=>{t.updateOuterFrame("textAlign",e)}},model:{value:t.styleConfig.textAlign,callback:function(e){t.$set(t.styleConfig,"textAlign",e)},expression:"styleConfig.textAlign"}},[e("el-radio-button",{attrs:{label:"left"}},[t._v(t._s(t.$t("nodeOuterFrame.left")))]),e("el-radio-button",{attrs:{label:"center"}},[t._v(t._s(t.$t("nodeOuterFrame.center")))]),e("el-radio-button",{attrs:{label:"right"}},[t._v(t._s(t.$t("nodeOuterFrame.right")))])],1)],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.paddingX")))]),e("el-slider",{staticStyle:{width:"180px"},on:{change:e=>{t.updatePadding("x",e)}},model:{value:t.paddingStyle.paddingX,callback:function(e){t.$set(t.paddingStyle,"paddingX",e)},expression:"paddingStyle.paddingX"}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.paddingY")))]),e("el-slider",{staticStyle:{width:"180px"},on:{change:e=>{t.updatePadding("y",e)}},model:{value:t.paddingStyle.paddingY,callback:function(e){t.$set(t.paddingStyle,"paddingY",e)},expression:"paddingStyle.paddingY"}})],1)])])])])},o=[],a=(i("0643"),i("4e3e"),i("62a5")),n=i("aadb"),l=i("2f62"),r=i("f121"),c=i("f503"),d={components:{Sidebar:a["a"],Color:n["a"]},props:{mindMap:{type:Object}},data(){return{lineWidthList:r["q"],lineHeightList:r["n"],fontSizeList:r["k"],borderRadiusList:r["f"],styleConfig:{...c["a"].defaultStyle},paddingStyle:{paddingX:0,paddingY:0}}},computed:{...Object(l["c"])({activeSidebar:t=>t.activeSidebar,isDark:t=>t.localConfig.isDark,borderDasharrayList(){return r["e"][this.$i18n.locale]||r["e"].zh}}),fontFamilyList(){return r["j"][this.$i18n.locale]||r["j"].zh}},watch:{activeSidebar(t){this.$refs.sidebar.show="nodeOuterFrameStyle"===t}},created(){this.mindMap.on("outer_frame_active",this.onOuterFrameActive),this.mindMap.on("outer_frame_delete",this.hide),this.mindMap.on("outer_frame_deactivate",this.hide)},beforeDestroy(){this.mindMap.off("outer_frame_active",this.onOuterFrameActive),this.mindMap.off("outer_frame_delete",this.hide),this.mindMap.off("outer_frame_deactivate",this.hide)},methods:{...Object(l["b"])(["setActiveSidebar"]),onOuterFrameActive(t,e,i){const s=e.children[i[0]],o=s.getData("outerFrame");Object.keys(this.styleConfig).forEach(t=>{"undefined"!==typeof o[t]?this.styleConfig[t]=o[t]:this.styleConfig[t]=c["a"].defaultStyle[t]});const[a,n]=this.styleConfig.textFillPadding;this.paddingStyle.paddingX=a,this.paddingStyle.paddingY=n,this.setActiveSidebar("nodeOuterFrameStyle")},updateOuterFrame(t,e){this.styleConfig[t]=e,this.mindMap.outerFrame.updateActiveOuterFrame({[t]:e})},toggleFontWeight(){const t="bold"===this.styleConfig.fontWeight?"normal":"bold";this.updateOuterFrame("fontWeight",t)},toggleFontStyle(){const t="italic"===this.styleConfig.fontStyle?"normal":"italic";this.updateOuterFrame("fontStyle",t)},updatePadding(t,e){const[i,s]=this.styleConfig.textFillPadding;"x"===t?this.updateOuterFrame("textFillPadding",[e,s,e,s]):"y"===t&&this.updateOuterFrame("textFillPadding",[i,e,i,e])},deleteOuterFrame(){this.mindMap.outerFrame.removeActiveOuterFrame()},deleteOuterFrameText(){this.mindMap.outerFrame.removeActiveOuterFrameText()},hide(){"nodeOuterFrameStyle"===this.activeSidebar&&this.setActiveSidebar(null)}}},h=d,u=(i("0494"),i("d4f4"),i("2877")),p=Object(u["a"])(h,s,o,!1,null,"16c9a89f",null);e["a"]=p.exports},1819:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{staticClass:"nodeImportDialog",attrs:{title:t.$t("import.title"),visible:t.dialogVisible,width:"350px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-upload",{ref:"upload",attrs:{action:"x",accept:t.supportFileStr,"file-list":t.fileList,"auto-upload":!1,multiple:!1,"on-change":t.onChange,"on-remove":t.onRemove,limit:1,"on-exceed":t.onExceed}},[e("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v(t._s(t.$t("import.selectFile")))]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" "+t._s(t.$t("import.support"))+t._s(t.supportFileStr)+t._s(t.$t("import.file"))+" ")])],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancel}},[t._v(t._s(t.$t("dialog.cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v(t._s(t.$t("dialog.confirm")))])],1)],1),e("el-dialog",{staticClass:"xmindCanvasSelectDialog",attrs:{title:t.$t("import.xmindCanvasSelectDialogTitle"),visible:t.xmindCanvasSelectDialogVisible,width:"300px","show-close":!1},on:{"update:visible":function(e){t.xmindCanvasSelectDialogVisible=e}}},[e("el-radio-group",{staticClass:"canvasList",model:{value:t.selectCanvas,callback:function(e){t.selectCanvas=e},expression:"selectCanvas"}},t._l(t.canvasList,(function(i,s){return e("el-radio",{key:s,attrs:{label:s}},[t._v(t._s(i.title))])})),1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.confirmSelect}},[t._v(t._s(t.$t("dialog.confirm")))])],1)],1)],1)},o=[],a=(i("d9e2"),i("14d9"),i("1e30")),n=i("0de5"),l=i("2f62"),r={data(){return{dialogVisible:!1,fileList:[],selectPromiseResolve:null,xmindCanvasSelectDialogVisible:!1,selectCanvas:"",canvasList:[],mdStr:""}},computed:{supportFileStr(){return".smm,.json,.xmind,.md"}},watch:{dialogVisible(t,e){!t&&e&&(this.fileList=[])}},created(){this.$bus.$on("showImport",this.handleShowImport),this.$bus.$on("handle_file_url",this.handleFileURL),this.$bus.$on("importFile",this.handleImportFile)},beforeDestroy(){this.$bus.$off("showImport",this.handleShowImport),this.$bus.$off("handle_file_url",this.handleFileURL),this.$bus.$off("importFile",this.handleImportFile)},methods:{...Object(l["b"])(["setActiveSidebar"]),handleShowImport(){this.dialogVisible=!0},getRegexp(){return new RegExp(".(smm|json|xmind|md)$")},async handleFileURL(){try{const t=this.$route.query.fileURL;if(!t)return;const e=this.getRegexp().exec(t);if(!e)return;const i=e[1],s=await fetch(t),o=await s.blob(),a={raw:o};"smm"===i||"json"===i?this.handleSmm(a):"xmind"===i?this.handleXmind(a):"md"===i&&this.handleMd(a)}catch(t){console.log(t)}},onChange(t){this.getRegexp().test(t.name)?this.fileList.push(t):(this.$message.error(this.$t("import.pleaseSelect")+this.supportFileStr+this.$t("import.file")),this.fileList=[])},onRemove(t,e){this.fileList=e},onExceed(){this.$message.error(this.$t("import.maxFileNum"))},cancel(){this.dialogVisible=!1},confirm(){if(this.fileList.length<=0)return this.$message.error(this.$t("import.notSelectTip"));this.$store.commit("setIsHandleLocalFile",!1);let t=this.fileList[0];/\.(smm|json)$/.test(t.name)?this.handleSmm(t):/\.xmind$/.test(t.name)?this.handleXmind(t):/\.md$/.test(t.name)&&this.handleMd(t),this.cancel(),this.setActiveSidebar(null)},handleSmm(t){let e=new FileReader;e.readAsText(t.raw),e.onload=t=>{try{let e=JSON.parse(t.target.result);if("object"!==typeof e)throw new Error(this.$t("import.fileContentError"));this.$bus.$emit("setData",e),this.$message.success(this.$t("import.importSuccess"))}catch(e){console.log(e),this.$message.error(this.$t("import.fileParsingFailed"))}}},async handleXmind(t){try{let e=await a["a"].parseXmindFile(t.raw,t=>(this.showSelectXmindCanvasDialog(t),new Promise(t=>{this.selectPromiseResolve=t})));this.$bus.$emit("setData",e),this.$message.success(this.$t("import.importSuccess"))}catch(e){console.log(e),this.$message.error(this.$t("import.fileParsingFailed"))}},showSelectXmindCanvasDialog(t){this.canvasList=t,this.selectCanvas=0,this.xmindCanvasSelectDialogVisible=!0},confirmSelect(){this.selectPromiseResolve(this.canvasList[this.selectCanvas]),this.xmindCanvasSelectDialogVisible=!1,this.canvasList=[],this.selectCanvas=0},async handleMd(t){let e=new FileReader;e.readAsText(t.raw),e.onload=async t=>{try{let e=n["a"].transformMarkdownTo(t.target.result);this.$bus.$emit("setData",e),this.$message.success(this.$t("import.importSuccess"))}catch(e){console.log(e),this.$message.error(this.$t("import.fileParsingFailed"))}}},handleImportFile(t){this.onChange({raw:t,name:t.name}),this.fileList.length<=0||this.confirm()}}},c=r,d=(i("0dda"),i("2877")),h=Object(d["a"])(c,s,o,!1,null,"360c9419",null);e["a"]=h.exports},"19a0":function(t,e,i){"use strict";i("a690")},"1b25":function(t,e,i){},"1bf1":function(t,e,i){},"23cf":function(t,e,i){},"254c":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("Sidebar",{ref:"sidebar",attrs:{title:t.$t("setting.title")}},[t.configData?e("div",{staticClass:"sidebarContent customScrollbar",class:{isDark:t.isDark}},[e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:t.watermarkShowChange},model:{value:t.watermarkConfig.show,callback:function(e){t.$set(t.watermarkConfig,"show",e)},expression:"watermarkConfig.show"}},[t._v(t._s(t.$t("setting.showWatermark")))])],1)]),t.watermarkConfig.show?[e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:t.updateWatermarkConfig},model:{value:t.watermarkConfig.onlyExport,callback:function(e){t.$set(t.watermarkConfig,"onlyExport",e)},expression:"watermarkConfig.onlyExport"}},[t._v(t._s(t.$t("setting.onlyExport")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:t.updateWatermarkConfig},model:{value:t.watermarkConfig.belowNode,callback:function(e){t.$set(t.watermarkConfig,"belowNode",e)},expression:"watermarkConfig.belowNode"}},[t._v(t._s(t.$t("setting.belowNode")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.watermarkText")))]),e("el-input",{attrs:{size:"small"},on:{change:t.updateWatermarkConfig},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:t.watermarkConfig.text,callback:function(e){t.$set(t.watermarkConfig,"text",e)},expression:"watermarkConfig.text"}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.watermarkTextColor")))]),e("span",{directives:[{name:"popover",rawName:"v-popover:popover3",arg:"popover3"}],staticClass:"block",style:{backgroundColor:t.watermarkConfig.textStyle.color}}),e("el-popover",{ref:"popover3",attrs:{placement:"bottom",trigger:"click"}},[e("Color",{attrs:{color:t.watermarkConfig.textStyle.color},on:{change:e=>{t.watermarkConfig.textStyle.color=e,t.updateWatermarkConfig()}}})],1)],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.watermarkTextOpacity")))]),e("el-slider",{staticStyle:{width:"170px"},attrs:{min:0,max:1,step:.1},on:{change:t.updateWatermarkConfig},model:{value:t.watermarkConfig.textStyle.opacity,callback:function(e){t.$set(t.watermarkConfig.textStyle,"opacity",e)},expression:"watermarkConfig.textStyle.opacity"}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.watermarkTextFontSize")))]),e("el-input-number",{attrs:{size:"small",min:0,max:50,step:1},on:{change:t.updateWatermarkConfig},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:t.watermarkConfig.textStyle.fontSize,callback:function(e){t.$set(t.watermarkConfig.textStyle,"fontSize",e)},expression:"watermarkConfig.textStyle.fontSize"}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.watermarkAngle")))]),e("el-input-number",{attrs:{size:"small",min:0,max:90,step:10},on:{change:t.updateWatermarkConfig},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:t.watermarkConfig.angle,callback:function(e){t.$set(t.watermarkConfig,"angle",e)},expression:"watermarkConfig.angle"}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.watermarkLineSpacing")))]),e("el-input-number",{attrs:{size:"small",step:10},on:{change:t.updateWatermarkConfig},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:t.watermarkConfig.lineSpacing,callback:function(e){t.$set(t.watermarkConfig,"lineSpacing",e)},expression:"watermarkConfig.lineSpacing"}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.watermarkTextSpacing")))]),e("el-input-number",{attrs:{size:"small",step:10},on:{change:t.updateWatermarkConfig},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:t.watermarkConfig.textSpacing,callback:function(e){t.$set(t.watermarkConfig,"textSpacing",e)},expression:"watermarkConfig.textSpacing"}})],1)])]:t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:e=>{t.updateOtherConfig("openPerformance",e)}},model:{value:t.config.openPerformance,callback:function(e){t.$set(t.config,"openPerformance",e)},expression:"config.openPerformance"}},[t._v(t._s(t.$t("setting.openPerformance")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:e=>{t.updateOtherConfig("enableFreeDrag",e)}},model:{value:t.config.enableFreeDrag,callback:function(e){t.$set(t.config,"enableFreeDrag",e)},expression:"config.enableFreeDrag"}},[t._v(t._s(t.$t("setting.enableFreeDrag")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:t.enableNodeRichTextChange},model:{value:t.enableNodeRichText,callback:function(e){t.enableNodeRichText=e},expression:"enableNodeRichText"}},[t._v(t._s(t.$t("setting.isEnableNodeRichText")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:function(e){return t.updateOtherConfig("openRealtimeRenderOnNodeTextEdit",e)}},model:{value:t.config.openRealtimeRenderOnNodeTextEdit,callback:function(e){t.$set(t.config,"openRealtimeRenderOnNodeTextEdit",e)},expression:"config.openRealtimeRenderOnNodeTextEdit"}},[t._v(t._s(t.$t("setting.openRealtimeRenderOnNodeTextEdit")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:function(e){return t.updateLocalConfig("isShowScrollbar",e)}},model:{value:t.localConfigs.isShowScrollbar,callback:function(e){t.$set(t.localConfigs,"isShowScrollbar",e)},expression:"localConfigs.isShowScrollbar"}},[t._v(t._s(t.$t("setting.isShowScrollbar")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:function(e){return t.updateOtherConfig("alwaysShowExpandBtn",e)}},model:{value:t.config.alwaysShowExpandBtn,callback:function(e){t.$set(t.config,"alwaysShowExpandBtn",e)},expression:"config.alwaysShowExpandBtn"}},[t._v(t._s(t.$t("setting.alwaysShowExpandBtn")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:function(e){return t.updateOtherConfig("enableAutoEnterTextEditWhenKeydown",e)}},model:{value:t.config.enableAutoEnterTextEditWhenKeydown,callback:function(e){t.$set(t.config,"enableAutoEnterTextEditWhenKeydown",e)},expression:"config.enableAutoEnterTextEditWhenKeydown"}},[t._v(t._s(t.$t("setting.enableAutoEnterTextEditWhenKeydown")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:function(e){return t.updateLocalConfig("enableDragImport",e)}},model:{value:t.localConfigs.enableDragImport,callback:function(e){t.$set(t.localConfigs,"enableDragImport",e)},expression:"localConfigs.enableDragImport"}},[t._v(t._s(t.$t("setting.enableDragImport")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:function(e){return t.updateOtherConfig("enableInheritAncestorLineStyle",e)}},model:{value:t.config.enableInheritAncestorLineStyle,callback:function(e){t.$set(t.config,"enableInheritAncestorLineStyle",e)},expression:"config.enableInheritAncestorLineStyle"}},[t._v(t._s(t.$t("setting.enableInheritAncestorLineStyle")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("el-checkbox",{on:{change:function(e){return t.updateLocalConfig("enableAi",e)}},model:{value:t.localConfigs.enableAi,callback:function(e){t.$set(t.localConfigs,"enableAi",e)},expression:"localConfigs.enableAi"}},[t._v(t._s(t.$t("setting.enableAi")))])],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.mousewheelAction")))]),e("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:""},on:{change:e=>{t.updateOtherConfig("mousewheelAction",e)}},model:{value:t.config.mousewheelAction,callback:function(e){t.$set(t.config,"mousewheelAction",e)},expression:"config.mousewheelAction"}},[e("el-option",{attrs:{label:t.$t("setting.zoomView"),value:"zoom"}}),e("el-option",{attrs:{label:t.$t("setting.moveViewUpDown"),value:"move"}})],1)],1)]),"zoom"===t.config.mousewheelAction?e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.mousewheelZoomActionReverse")))]),e("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:""},on:{change:e=>{t.updateOtherConfig("mousewheelZoomActionReverse",e)}},model:{value:t.config.mousewheelZoomActionReverse,callback:function(e){t.$set(t.config,"mousewheelZoomActionReverse",e)},expression:"config.mousewheelZoomActionReverse"}},[e("el-option",{attrs:{label:t.$t("setting.mousewheelZoomActionReverse1"),value:!1}}),e("el-option",{attrs:{label:t.$t("setting.mousewheelZoomActionReverse2"),value:!0}})],1)],1)]):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.createNewNodeBehavior")))]),e("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:""},on:{change:e=>{t.updateOtherConfig("createNewNodeBehavior",e)}},model:{value:t.config.createNewNodeBehavior,callback:function(e){t.$set(t.config,"createNewNodeBehavior",e)},expression:"config.createNewNodeBehavior"}},[e("el-option",{attrs:{label:t.$t("setting.default"),value:"default"}}),e("el-option",{attrs:{label:t.$t("setting.notActive"),value:"notActive"}}),e("el-option",{attrs:{label:t.$t("setting.activeOnly"),value:"activeOnly"}})],1)],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.imgTextMargin")))]),e("el-slider",{staticStyle:{width:"150px"},on:{change:e=>{t.updateOtherConfig("imgTextMargin",e)}},model:{value:t.config.imgTextMargin,callback:function(e){t.$set(t.config,"imgTextMargin",e)},expression:"config.imgTextMargin"}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("setting.textContentMargin")))]),e("el-slider",{staticStyle:{width:"150px"},on:{change:e=>{t.updateOtherConfig("textContentMargin",e)}},model:{value:t.config.textContentMargin,callback:function(e){t.$set(t.config,"textContentMargin",e)},expression:"config.textContentMargin"}})],1)])],2):t._e()])},o=[],a=(i("0643"),i("4e3e"),i("62a5")),n=i("365c"),l=i("2f62"),r=i("aadb"),c={components:{Sidebar:a["a"],Color:r["a"]},props:{configData:{type:Object,default:null},mindMap:{type:Object}},data(){return{config:{openPerformance:!1,enableFreeDrag:!1,mousewheelAction:"zoom",mousewheelZoomActionReverse:!1,createNewNodeBehavior:"default",openRealtimeRenderOnNodeTextEdit:!0,alwaysShowExpandBtn:!1,enableAutoEnterTextEditWhenKeydown:!0,imgTextMargin:0,textContentMargin:0,enableInheritAncestorLineStyle:!1},watermarkConfig:{show:!1,onlyExport:!1,text:"",lineSpacing:100,textSpacing:100,angle:30,textStyle:{color:"",opacity:0,fontSize:1}},updateWatermarkTimer:null,enableNodeRichText:!0,localConfigs:{isShowScrollbar:!1,enableDragImport:!1,enableAi:!1}}},computed:{...Object(l["c"])({activeSidebar:t=>t.activeSidebar,localConfig:t=>t.localConfig,isDark:t=>t.localConfig.isDark})},watch:{activeSidebar(t){"setting"===t?(this.$refs.sidebar.show=!0,this.initConfig(),this.initWatermark()):this.$refs.sidebar.show=!1}},created(){this.initLoacalConfig(),this.$bus.$on("toggleOpenNodeRichText",this.onToggleOpenNodeRichText)},beforeDestroy(){this.$bus.$off("toggleOpenNodeRichText",this.onToggleOpenNodeRichText)},methods:{...Object(l["b"])(["setLocalConfig"]),initConfig(){Object.keys(this.config).forEach(t=>{"object"===typeof this.config[t]?this.config[t]={...this.mindMap.getConfig(t)||{}}:this.config[t]=this.mindMap.getConfig(t)})},initLoacalConfig(){this.enableNodeRichText=this.localConfig.openNodeRichText,this.mousewheelAction=this.localConfig.mousewheelAction,this.mousewheelZoomActionReverse=this.localConfig.mousewheelZoomActionReverse,Object.keys(this.localConfigs).forEach(t=>{this.localConfigs[t]=this.localConfig[t]})},initWatermark(){const t=this.mindMap.getConfig("watermarkConfig");["text","lineSpacing","textSpacing","angle","onlyExport"].forEach(e=>{this.watermarkConfig[e]=t[e]}),this.watermarkConfig.show=!!t.text,this.watermarkConfig.textStyle={...t.textStyle}},updateOtherConfig(t,e){this.mindMap.updateConfig({[t]:e}),this.configData[t]=e,Object(n["e"])(this.configData),["alwaysShowExpandBtn","imgTextMargin","textContentMargin","enableInheritAncestorLineStyle"].includes(t)&&this.mindMap.reRender()},updateWatermarkConfig(){clearTimeout(this.updateWatermarkTimer),this.updateWatermarkTimer=setTimeout(()=>{let{show:t,...e}=this.watermarkConfig;this.mindMap.watermark.updateWatermark({...e}),this.configData.watermarkConfig=this.mindMap.getConfig("watermarkConfig"),Object(n["e"])(this.configData)},300)},watermarkShowChange(t){if(t){let t=this.watermarkConfig.text||this.$t("setting.watermarkDefaultText");this.watermarkConfig.text=t}else this.watermarkConfig.text="";this.updateWatermarkConfig()},enableNodeRichTextChange(t){this.$confirm(this.$t("setting.changeRichTextTip"),t?this.$t("setting.changeRichTextTip2"):this.$t("setting.changeRichTextTip3"),{confirmButtonText:this.$t("setting.confirm"),cancelButtonText:this.$t("setting.cancel"),type:"warning"}).then(()=>{this.mindMap.renderer.textEdit.hideEditTextBox(),this.setLocalConfig({openNodeRichText:t})}).catch(()=>{this.enableNodeRichText=!this.enableNodeRichText})},onToggleOpenNodeRichText(t){this.setLocalConfig({openNodeRichText:t}),this.enableNodeRichText=t},updateLocalConfig(t,e){this.setLocalConfig({[t]:e})}}},d=c,h=(i("f811"),i("2877")),u=Object(h["a"])(d,s,o,!1,null,"3b8fc921",null);e["a"]=u.exports},"290c":function(t,e,i){},"290f":function(t,e,i){"use strict";i("679e")},"29fd":function(t,e,i){"use strict";i("3a11")},"36e4":function(t,e,i){"use strict";i("290c")},3771:function(t,e,i){},"384d":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("Sidebar",{ref:"sidebar",attrs:{title:t.$t("outline.title")}},[e("div",{staticClass:"btnList"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("outline.print"),placement:"top"}},[e("div",{staticClass:"btn",on:{click:t.onPrint}},[e("span",{staticClass:"icon iconfont iconprinting"})])]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("outline.fullscreen"),placement:"top"}},[e("div",{staticClass:"btn",class:{isDark:t.isDark},on:{click:t.onChangeToOutlineEdit}},[e("span",{staticClass:"icon iconfont iconquanping1"})])])],1),"outline"===t.activeSidebar?e("Outline",{ref:"outlineRef",attrs:{mindMap:t.mindMap},on:{scrollTo:t.onScrollTo}}):t._e()],1)},o=[],a=i("62a5"),n=i("2f62"),l=function(){var t=this,e=t._self._c;return e("el-tree",{ref:"tree",staticClass:"outlineTree",class:{isDark:t.isDark},attrs:{"node-key":"uid",draggable:"","default-expand-all":"",data:t.data,props:t.defaultProps,"highlight-current":!0,"expand-on-click-node":!1,"allow-drag":t.checkAllowDrag},on:{"node-drop":t.onNodeDrop,"node-drag-start":t.onNodeDragStart,"node-drag-end":t.onNodeDragEnd,"current-change":t.onCurrentChange},nativeOn:{mouseenter:function(e){t.isInTreArea=!0},mouseleave:function(e){t.isInTreArea=!1}},scopedSlots:t._u([{key:"default",fn:function({node:i,data:s}){return e("span",{staticClass:"customNode",attrs:{"data-id":s.uid},on:{click:function(e){return t.onClick(s)}}},[e("span",{key:t.getKey(),staticClass:"nodeEdit",attrs:{contenteditable:!t.isReadonly},domProps:{innerHTML:t._s(i.label)},on:{keydown:function(e){return e.stopPropagation(),t.onNodeInputKeydown(e,i)},keyup:function(t){t.stopPropagation()},blur:function(e){return t.onBlur(e,i)},paste:function(e){return t.onPaste(e,i)}}})])}}])})},r=[],c=(i("0643"),i("4e3e"),i("d17d")),d={props:{mindMap:{type:Object}},data(){return{data:[],defaultProps:{label:"label"},currentData:null,notHandleDataChange:!1,isHandleNodeTreeRenderEnd:!1,beInsertNodeUid:"",insertType:"",isInTreArea:!1,isAfterCreateNewNode:!1}},computed:{...Object(n["c"])({isReadonly:t=>t.isReadonly,isDark:t=>t.localConfig.isDark})},created(){window.addEventListener("keydown",this.onKeyDown),this.$bus.$on("data_change",this.handleDataChange),this.$bus.$on("node_tree_render_end",this.handleNodeTreeRenderEnd),this.$bus.$on("hide_text_edit",this.handleHideTextEdit)},mounted(){this.refresh()},beforeDestroy(){window.removeEventListener("keydown",this.onKeyDown),this.$bus.$off("data_change",this.handleDataChange),this.$bus.$off("node_tree_render_end",this.handleNodeTreeRenderEnd),this.$bus.$off("hide_text_edit",this.handleHideTextEdit)},methods:{...Object(n["b"])(["setIsDragOutlineTreeNode"]),handleHideTextEdit(){this.notHandleDataChange&&(this.notHandleDataChange=!1,this.refresh())},handleDataChange(){if(this.notHandleDataChange)return this.notHandleDataChange=!1,void(this.isAfterCreateNewNode=!1);this.isAfterCreateNewNode?this.isAfterCreateNewNode=!1:this.refresh()},handleNodeTreeRenderEnd(){if(this.insertType)return this[this.insertType](),void(this.insertType="");this.isHandleNodeTreeRenderEnd&&(this.isHandleNodeTreeRenderEnd=!1,this.refresh(),this.$nextTick(()=>{this.afterCreateNewNode()}))},refresh(){let t=this.mindMap.getData();t.root=!0;let e=t=>{let i=t.data.richText?Object(c["hb"])(t.data.text):t.data.text;i=Object(c["V"])(i),i=i.replace(/\n/g,"<br>"),t.textCache=i,t.label=i,t.uid=t.data.uid,t.children&&t.children.length>0&&t.children.forEach(t=>{e(t)})};e(t),this.data=[t]},afterCreateNewNode(){let t=this.beInsertNodeUid;if(t&&this.$refs.tree)try{this.isAfterCreateNewNode=!0,this.$refs.tree.setCurrentKey(t);let e=this.$refs.tree.getNode(t);this.onCurrentChange(e.data),this.onClick(e.data);const i=document.querySelector(`.customNode[data-id="${t}"] .nodeEdit`);if(i){let t=window.getSelection(),e=document.createRange();e.selectNodeContents(i),t.removeAllRanges(),t.addRange(e);let s=i.offsetTop;this.$emit("scrollTo",s)}}catch(e){console.log(e)}this.beInsertNodeUid=""},checkAllowDrag(t){return!t.data.root},onBlur(t,e){if(e.data.textCache===t.target.innerHTML)return void(this.insertType&&(this[this.insertType](),this.insertType=""));const i=e.data.data.richText,s=i?t.target.innerHTML:t.target.innerText,o=this.mindMap.renderer.findNodeByUid(e.data.uid);o&&(this.notHandleDataChange=!0,i?o.setText(Object(c["vb"])(s),!0):o.setText(s))},onPaste(t){Object(c["T"])(t)},getKey(){return Math.random()},onNodeInputKeydown(t){13!==t.keyCode||t.shiftKey||(t.preventDefault(),this.insertType="insertNode",t.target.blur()),9===t.keyCode&&(t.preventDefault(),t.shiftKey?(this.insertType="moveUp",t.target.blur()):(this.insertType="insertChildNode",t.target.blur()))},moveUp(){this.mindMap.execCommand("MOVE_UP_ONE_LEVEL")},insertNode(){this.notHandleDataChange=!0,this.isHandleNodeTreeRenderEnd=!0,this.beInsertNodeUid=Object(c["r"])(),this.mindMap.execCommand("INSERT_NODE",!1,[],{uid:this.beInsertNodeUid})},insertChildNode(){this.notHandleDataChange=!0,this.isHandleNodeTreeRenderEnd=!0,this.beInsertNodeUid=Object(c["r"])(),this.mindMap.execCommand("INSERT_CHILD_NODE",!1,[],{uid:this.beInsertNodeUid})},onClick(t){this.notHandleDataChange=!0;const e=this.mindMap.renderer.findNodeByUid(t.uid);e&&e.nodeData.data.isActive||this.mindMap.execCommand("GO_TARGET_NODE",t.uid,()=>{this.notHandleDataChange=!1})},onNodeDragStart(){this.setIsDragOutlineTreeNode(!0)},onNodeDragEnd(){this.setIsDragOutlineTreeNode(!1)},onNodeDrop(t,e,i){this.notHandleDataChange=!0;const s=this.mindMap.renderer.findNodeByUid(t.data.uid),o=this.mindMap.renderer.findNodeByUid(e.data.uid);if(s&&o)switch(i){case"before":this.mindMap.execCommand("INSERT_BEFORE",s,o);break;case"after":this.mindMap.execCommand("INSERT_AFTER",s,o);break;case"inner":this.mindMap.execCommand("MOVE_NODE_TO",s,o);break;default:break}},onCurrentChange(t){this.currentData=t},onKeyDown(t){if(this.isInTreArea&&[46,8].includes(t.keyCode)&&this.currentData){t.stopPropagation(),this.mindMap.renderer.textEdit.hideEditTextBox();const e=this.mindMap.renderer.findNodeByUid(this.currentData.uid);e&&!e.isRoot&&(this.notHandleDataChange=!0,this.$refs.tree.remove(this.currentData),this.mindMap.execCommand("REMOVE_NODE",[e]))}}}},h=d,u=(i("c1c4"),i("290f"),i("2877")),p=Object(u["a"])(h,l,r,!1,null,"6aa28655",null),m=p.exports,f=i("ed08"),g={components:{Sidebar:a["a"],Outline:m},props:{mindMap:{type:Object}},computed:{...Object(n["c"])({isDark:t=>t.localConfig.isDark,activeSidebar:t=>t.activeSidebar})},watch:{activeSidebar(t){this.$refs.sidebar.show="outline"===t}},methods:{...Object(n["b"])(["setIsOutlineEdit","setActiveSidebar"]),onChangeToOutlineEdit(){this.setActiveSidebar(null),this.setIsOutlineEdit(!0)},onScrollTo(t){let e=this.$refs.sidebar.getEl(),i=e.offsetHeight,s=e.scrollTop;t>s+i&&e.scrollTo(0,t-i/2)},onPrint(){Object(f["d"])(this.$refs.outlineRef.$el)}}},b=g,v=(i("29fd"),Object(u["a"])(b,s,o,!1,null,"79ae20f4",null));e["a"]=v.exports},"396b":function(t,e,i){"use strict";i("ee83")},"3a11":function(t,e,i){},"3c96":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.showImgPlacementToolbar,expression:"showImgPlacementToolbar"}],ref:"nodeImgPlacementToolbar",staticClass:"nodeImgPlacementToolbar",style:t.style,on:{"&click":function(t){t.stopPropagation()}}},t._l(t.imgPlacementList,(function(i){return e("div",{key:i,staticClass:"imgPlacementItem iconfont iconcontentleft",class:[{selected:t.imgPlacement===i},"icon_"+i],on:{click:function(e){return t.updateImgPlacement(i)}}})})),0)},o=[],a={props:{mindMap:{type:Object}},data(){return{showImgPlacementToolbar:!1,style:{left:0,top:0},imgPlacementList:["top","bottom","left","right"],node:null,imgNode:null,imgPlacement:""}},created(){this.mindMap.on("node_img_click",this.show),this.mindMap.on("draw_click",this.close),this.mindMap.on("svg_mousedown",this.close),this.mindMap.on("node_dblclick",this.close),this.mindMap.on("node_active",this.onNodeActive),this.mindMap.on("scale",this.onScale),this.mindMap.on("node_img_adjust_btn_mousedown",this.close),this.mindMap.on("delete_node_img_from_delete_btn",this.close),this.mindMap.on("translate",this.close)},mounted(){document.body.append(this.$refs.nodeImgPlacementToolbar)},beforeDestroy(){this.mindMap.off("node_img_click",this.show),this.mindMap.off("draw_click",this.close),this.mindMap.off("svg_mousedown",this.close),this.mindMap.off("node_dblclick",this.close),this.mindMap.off("node_active",this.onNodeActive),this.mindMap.off("scale",this.onScale),this.mindMap.off("node_img_adjust_btn_mousedown",this.close),this.mindMap.off("delete_node_img_from_delete_btn",this.close),this.mindMap.off("translate",this.close)},methods:{show(t,e){this.node=t,this.imgPlacement=t.getStyle("imgPlacement"),this.imgNode=e,this.showImgPlacementToolbar=!0,this.$nextTick(()=>{this.updatePos()})},close(){this.showImgPlacementToolbar=!1,this.node=null,this.imgPlacement="",this.imgNode=null,this.style.left=0,this.style.top=0},updatePos(){if(!this.imgNode)return;const{width:t,height:e}=this.$refs.nodeImgPlacementToolbar.getBoundingClientRect(),{width:i,x:s,y:o}=this.imgNode.rbox();this.style.left=s+i/2-t/2+"px",this.style.top=o-e-5+"px"},onScale(){this.updatePos()},onNodeActive(t){t!==this.node&&this.close()},updateImgPlacement(t){this.imgPlacement=t,this.node.setStyle("imgPlacement",t),this.close()}}},n=a,l=(i("52f2"),i("2877")),r=Object(l["a"])(n,s,o,!1,null,"050c6a22",null);e["a"]=r.exports},4032:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.showRichTextToolbar,expression:"showRichTextToolbar"}],ref:"richTextToolbar",staticClass:"richTextToolbar",class:{isDark:t.isDark},style:t.style,on:{"&click":function(t){t.stopPropagation()}}},[e("el-tooltip",{attrs:{content:t.$t("richTextToolbar.bold"),placement:"top"}},[e("div",{staticClass:"btn",class:{active:t.formatInfo.bold},on:{click:t.toggleBold}},[e("span",{staticClass:"icon iconfont iconzitijiacu"})])]),e("el-tooltip",{attrs:{content:t.$t("richTextToolbar.italic"),placement:"top"}},[e("div",{staticClass:"btn",class:{active:t.formatInfo.italic},on:{click:t.toggleItalic}},[e("span",{staticClass:"icon iconfont iconzitixieti"})])]),e("el-tooltip",{attrs:{content:t.$t("richTextToolbar.underline"),placement:"top"}},[e("div",{staticClass:"btn",class:{active:t.formatInfo.underline},on:{click:t.toggleUnderline}},[e("span",{staticClass:"icon iconfont iconzitixiahuaxian"})])]),e("el-tooltip",{attrs:{content:t.$t("richTextToolbar.strike"),placement:"top"}},[e("div",{staticClass:"btn",class:{active:t.formatInfo.strike},on:{click:t.toggleStrike}},[e("span",{staticClass:"icon iconfont iconshanchuxian"})])]),e("el-tooltip",{attrs:{content:t.$t("richTextToolbar.fontFamily"),placement:"top"}},[e("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},[e("div",{staticClass:"fontOptionsList",class:{isDark:t.isDark}},t._l(t.fontFamilyList,(function(i){return e("div",{key:i.value,staticClass:"fontOptionItem",class:{active:t.formatInfo.font===i.value},style:{fontFamily:i.value},on:{click:function(e){return t.changeFontFamily(i.value)}}},[t._v(" "+t._s(i.name)+" ")])})),0),e("div",{staticClass:"btn",attrs:{slot:"reference"},slot:"reference"},[e("span",{staticClass:"icon iconfont iconxingzhuang-wenzi"})])])],1),e("el-tooltip",{attrs:{content:t.$t("richTextToolbar.fontSize"),placement:"top"}},[e("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},[e("div",{staticClass:"fontOptionsList",class:{isDark:t.isDark}},t._l(t.fontSizeList,(function(i){return e("div",{key:i,staticClass:"fontOptionItem",class:{active:t.formatInfo.size===i+"px"},style:{fontSize:i+"px",height:(i<30?30:i+10)+"px"},on:{click:function(e){return t.changeFontSize(i)}}},[t._v(" "+t._s(i)+"px ")])})),0),e("div",{staticClass:"btn",attrs:{slot:"reference"},slot:"reference"},[e("span",{staticClass:"icon iconfont iconcase fontColor"})])])],1),e("el-tooltip",{attrs:{content:t.$t("richTextToolbar.color"),placement:"top"}},[e("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},[e("Color",{attrs:{color:t.fontColor},on:{change:t.changeFontColor}}),e("div",{staticClass:"btn",style:{color:t.formatInfo.color},attrs:{slot:"reference"},slot:"reference"},[e("span",{staticClass:"icon iconfont iconzitiyanse"})])],1)],1),e("el-tooltip",{attrs:{content:t.$t("richTextToolbar.backgroundColor"),placement:"top"}},[e("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},[e("Color",{attrs:{color:t.fontBackgroundColor},on:{change:t.changeFontBackgroundColor}}),e("div",{staticClass:"btn",attrs:{slot:"reference"},slot:"reference"},[e("span",{staticClass:"icon iconfont iconbeijingyanse"})])],1)],1),e("el-tooltip",{attrs:{content:t.$t("richTextToolbar.textAlign"),placement:"top"}},[e("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},[e("div",{staticClass:"fontOptionsList",class:{isDark:t.isDark}},t._l(t.alignList,(function(i){return e("div",{key:i.value,staticClass:"fontOptionItem",class:{active:t.formatInfo.align===i.value},on:{click:function(e){return t.changeTextAlign(i.value)}}},[t._v(" "+t._s(i.name)+" ")])})),0),e("div",{staticClass:"btn",attrs:{slot:"reference"},slot:"reference"},[e("span",{staticClass:"icon iconfont iconjuzhongduiqi"})])])],1),e("el-tooltip",{attrs:{content:t.$t("richTextToolbar.removeFormat"),placement:"top"}},[e("div",{staticClass:"btn",on:{click:t.removeFormat}},[e("span",{staticClass:"icon iconfont iconqingchu"})])])],1)},o=[],a=i("f121"),n=i("aadb"),l=i("2f62"),r={components:{Color:n["a"]},props:{mindMap:{type:Object}},data(){return{fontSizeList:a["k"],showRichTextToolbar:!1,style:{left:0,top:0},fontColor:"",fontBackgroundColor:"",formatInfo:{}}},computed:{...Object(l["c"])({isDark:t=>t.localConfig.isDark}),fontFamilyList(){return a["j"][this.$i18n.locale]||a["j"].zh},alignList(){return a["a"][this.$i18n.locale]||a["a"].zh}},created(){this.$bus.$on("rich_text_selection_change",this.onRichTextSelectionChange)},mounted(){document.body.append(this.$refs.richTextToolbar)},beforeDestroy(){this.$bus.$off("rich_text_selection_change",this.onRichTextSelectionChange)},methods:{onRichTextSelectionChange(t,e,i){t&&(this.style.left=e.left+e.width/2+"px",this.style.top=e.top-60+"px",this.formatInfo={...i||{}}),this.showRichTextToolbar=t},toggleBold(){this.formatInfo.bold=!this.formatInfo.bold,this.mindMap.richText.formatText({bold:this.formatInfo.bold})},toggleItalic(){this.formatInfo.italic=!this.formatInfo.italic,this.mindMap.richText.formatText({italic:this.formatInfo.italic})},toggleUnderline(){this.formatInfo.underline=!this.formatInfo.underline,this.mindMap.richText.formatText({underline:this.formatInfo.underline})},toggleStrike(){this.formatInfo.strike=!this.formatInfo.strike,this.mindMap.richText.formatText({strike:this.formatInfo.strike})},changeFontFamily(t){this.formatInfo.font=t,this.mindMap.richText.formatText({font:t})},changeFontSize(t){this.formatInfo.size=t,this.mindMap.richText.formatText({size:t+"px"})},changeFontColor(t){this.formatInfo.color=t,this.mindMap.richText.formatText({color:t})},changeFontBackgroundColor(t){this.formatInfo.background=t,this.mindMap.richText.formatText({background:t})},changeTextAlign(t){this.formatInfo.align=t,this.mindMap.richText.formatText({align:t})},removeFormat(){this.mindMap.richText.removeFormat()}}},c=r,d=(i("dcda"),i("2877")),h=Object(d["a"])(c,s,o,!1,null,"19bedf10",null);e["a"]=h.exports},"48a9":function(t,e,i){"use strict";i("ebc6")},"4d6f":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"nodeNoteDialog",attrs:{title:t.$t("nodeNote.title"),visible:t.dialogVisible,width:t.isMobile?"90%":"50%",top:t.isMobile?"20px":"15vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{ref:"noteEditor",staticClass:"noteEditor",on:{keyup:function(t){t.stopPropagation()},keydown:function(t){t.stopPropagation()}}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancel}},[t._v(t._s(t.$t("dialog.cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v(t._s(t.$t("dialog.confirm")))])],1)])},o=[],a=(i("0643"),i("4e3e"),i("5865")),n=(i("f513"),i("d17d")),l={name:"NodeNote",data(){return{dialogVisible:!1,note:"",activeNodes:[],editor:null,isMobile:Object(n["X"])(),appointNode:null}},watch:{dialogVisible(t,e){!t&&e&&this.$bus.$emit("endTextEdit")}},created(){this.$bus.$on("node_active",this.handleNodeActive),this.$bus.$on("showNodeNote",this.handleShowNodeNote)},beforeDestroy(){this.$bus.$off("node_active",this.handleNodeActive),this.$bus.$off("showNodeNote",this.handleShowNodeNote)},methods:{handleNodeActive(...t){this.activeNodes=[...t[1]],this.updateNoteInfo()},updateNoteInfo(){if(this.activeNodes.length>0){let t=this.activeNodes[0];this.note=t.getData("note")||""}else this.note=""},handleShowNodeNote(t){this.$bus.$emit("startTextEdit"),t&&(this.appointNode=t,this.note=t.getData("note")||""),this.dialogVisible=!0,this.$nextTick(()=>{this.initEditor()})},initEditor(){this.editor||(this.editor=new a["a"]({el:this.$refs.noteEditor,height:"500px",initialEditType:"markdown",previewStyle:"vertical"})),this.editor.setMarkdown(this.note)},cancel(){this.dialogVisible=!1,this.appointNode&&(this.appointNode=null,this.updateNoteInfo())},confirm(){this.note=this.editor.getMarkdown(),this.appointNode?this.appointNode.setNote(this.note):this.activeNodes.forEach(t=>{t.setNote(this.note)}),this.cancel()}}},r=l,c=(i("bf95"),i("2877")),d=Object(c["a"])(r,s,o,!1,null,"12b2f5f0",null);e["a"]=d.exports},5012:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.showNodeIconToolbar,expression:"showNodeIconToolbar"}],ref:"nodeIconToolbar",staticClass:"nodeIconToolbar",style:t.style,on:{"&click":function(t){t.stopPropagation()}}},[e("div",{staticClass:"iconListBox"},t._l(t.iconList,(function(i){return e("div",{key:i.name,staticClass:"icon",class:{selected:t.nodeIconList.includes(t.iconType+"_"+i.name)},domProps:{innerHTML:t._s(t.getHtml(i.icon))},on:{click:function(e){return t.setIcon(i.name)}}})})),0),e("div",{staticClass:"btnBox"},[e("span",{staticClass:"btn iconfont iconshanchu",on:{click:t.deleteIcon}})])])},o=[],a=(i("14d9"),i("9b1e")),n=i("d1f7"),l=i("2f62");const r=[...a["b"],...n["a"]];var c={props:{mindMap:{type:Object}},data(){return{showNodeIconToolbar:!1,style:{left:0,top:0},node:null,iconType:"",iconName:"",nodeIconList:[],iconList:[]}},computed:{...Object(l["c"])(["activeSidebar"])},created(){this.mindMap.on("node_icon_click",this.show),this.mindMap.on("draw_click",this.close),this.mindMap.on("svg_mousedown",this.close),this.mindMap.on("node_dblclick",this.close),this.mindMap.on("node_active",this.onNodeActive),this.mindMap.on("scale",this.onScale),this.$bus.$on("close_node_icon_toolbar",this.close)},mounted(){document.body.append(this.$refs.nodeIconToolbar)},beforeDestroy(){this.mindMap.off("node_icon_click",this.show),this.mindMap.off("draw_click",this.close),this.mindMap.off("svg_mousedown",this.close),this.mindMap.off("node_dblclick",this.close),this.mindMap.off("node_active",this.onNodeActive),this.mindMap.off("scale",this.onScale),this.$bus.$off("close_node_icon_toolbar",this.close)},methods:{...Object(l["b"])(["setActiveSidebar"]),show(t,e){this.node=t,this.iconType=e.split("_")[0],this.iconName=e.split("_")[1],this.nodeIconList=t.getData("icon")||[],this.iconList=[...r.find(t=>t.type===this.iconType).list],this.updatePos(),this.showNodeIconToolbar=!0,"nodeIconSidebar"===this.activeSidebar&&this.setActiveSidebar(null)},close(){this.showNodeIconToolbar=!1,this.node=null,this.iconType="",this.iconName="",this.nodeIconList=[],this.iconList=[],this.style.left=0,this.style.top=0},updatePos(){if(!this.node)return;const t=this.node.getRect();this.style.left=t.x+"px",this.style.top=t.y+t.height+"px"},onScale(){this.updatePos()},onNodeActive(t){t!==this.node&&this.close()},deleteIcon(){this.setIcon(this.iconName),this.close()},getHtml(t){return/^<svg/.test(t)?t:`<img src="${t}" />`},setIcon(t){let e=this.iconType+"_"+t,i=this.nodeIconList.findIndex(t=>t===e);if(-1!==i)this.nodeIconList.splice(i,1);else{let i=this.nodeIconList.findIndex(t=>t.split("_")[0]===this.iconType);-1!==i?(this.nodeIconList.splice(i,1,e),this.iconName=t):this.nodeIconList.push(e)}this.node.setIcon([...this.nodeIconList])}}},d=c,h=(i("d593"),i("2877")),u=Object(h["a"])(d,s,o,!1,null,"54dc3806",null);e["a"]=u.exports},"52f2":function(t,e,i){"use strict";i("542e")},"542e":function(t,e,i){},"5c9e":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"nodeIconDialog",attrs:{title:t.$t("nodeIcon.title"),visible:t.dialogVisible,width:"500"},on:{"update:visible":function(e){t.dialogVisible=e}}},t._l(t.nodeIconList,(function(i){return e("div",{key:i.name,staticClass:"item"},[e("div",{staticClass:"title"},[t._v(t._s(i.name))]),e("div",{staticClass:"list"},t._l(i.list,(function(s){return e("div",{key:s.name,staticClass:"icon",class:{selected:t.iconList.includes(i.type+"_"+s.name)},domProps:{innerHTML:t._s(t.getHtml(s.icon))},on:{click:function(e){return t.setIcon(i.type,s.name)}}})})),0)])})),0)},o=[],a=(i("14d9"),i("0643"),i("4e3e"),i("9b1e")),n=i("d1f7"),l={data(){return{nodeIconList:[...a["b"],...n["a"]],dialogVisible:!1,iconList:[],activeNodes:[]}},created(){this.$bus.$on("node_active",this.handleNodeActive),this.$bus.$on("showNodeIcon",this.handleShowNodeIcon)},beforeDestroy(){this.$bus.$off("node_active",this.handleNodeActive),this.$bus.$off("showNodeIcon",this.handleShowNodeIcon)},methods:{handleNodeActive(...t){if(this.activeNodes=[...t[1]],this.activeNodes.length>0){let t=this.activeNodes[0];this.iconList=t.getData("icon")||[]}else this.iconList=[]},handleShowNodeIcon(){this.dialogVisible=!0},getHtml(t){return/^<svg/.test(t)?t:`<img src="${t}" />`},setIcon(t,e){let i=t+"_"+e,s=this.iconList.findIndex(t=>t===i);if(-1!==s)this.iconList.splice(s,1);else{let e=this.iconList.findIndex(e=>e.split("_")[0]===t);-1!==e?this.iconList.splice(e,1,i):this.iconList.push(i)}this.activeNodes.forEach(t=>{t.setIcon([...this.iconList])})}}},r=l,c=(i("c9c0"),i("2877")),d=Object(c["a"])(r,s,o,!1,null,"ee255564",null);e["a"]=d.exports},"633b":function(t,e,i){},"679e":function(t,e,i){},"751d":function(t,e,i){},"79b3":function(t,e,i){"use strict";i("0c47")},"7a25":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("Sidebar",{ref:"sidebar",attrs:{title:t.$t("note.title")}},[e("div",{ref:"noteContentWrap",staticClass:"noteContentWrap"})])},o=[],a=i("62a5"),n=i("2f62"),l=i("f059"),r=i.n(l),c=(i("fe5f"),{components:{Sidebar:a["a"]},props:{mindMap:{type:Object}},data(){return{editor:null,node:null}},computed:{...Object(n["c"])({isDark:t=>t.localConfig.isDark,activeSidebar:t=>t.activeSidebar})},watch:{activeSidebar(t){this.$refs.sidebar.show="noteSidebar"===t}},created(){this.$bus.$on("node_active",this.onNodeActive),this.mindMap.on("node_note_click",this.onNodeNoteClick)},mounted(){this.initEditor()},beforeDestroy(){this.$bus.$off("node_active",this.onNodeActive),this.mindMap.off("node_note_click",this.onNodeNoteClick)},methods:{...Object(n["b"])(["setActiveSidebar"]),onNodeActive(...t){if("noteSidebar"!==this.activeSidebar)return;const e=[...t[1]];e.length>0?e[0]!==this.node&&this.setActiveSidebar(null):this.setActiveSidebar(null)},initEditor(){this.editor||(this.editor=new r.a({el:this.$refs.noteContentWrap}))},onNodeNoteClick(t){this.node=t,this.setActiveSidebar("noteSidebar"),this.editor.setMarkdown(t.getData("note"))}}}),d=c,h=(i("da0d"),i("2877")),u=Object(h["a"])(d,s,o,!1,null,"70764560",null);e["a"]=u.exports},"7cbe":function(t,e,i){"use strict";i("ccac")},"7f37":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],ref:"elRef",staticClass:"nodeTagStyleContainer",class:{isDark:t.isDark},style:t.position},[e("div",{staticClass:"row"},[e("el-input",{attrs:{placeholder:t.$t("nodeTagStyle.placeholder"),size:"mini"},on:{blur:t.updateTagText},nativeOn:{keydown:function(t){t.stopPropagation()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),t.updateTagText.apply(null,arguments))}},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),e("div",{staticClass:"deleteBtn",on:{click:function(e){return e.stopPropagation(),t.deleteTag.apply(null,arguments)}}},[e("span",{staticClass:"iconfont iconshanchu"}),e("span",{staticClass:"text"},[t._v(t._s(t.$t("nodeTagStyle.delete")))])])],1),e("div",{staticClass:"row"},[e("Color",{attrs:{color:t.fill},on:{change:t.updateTagFill}})],1)])},o=[],a=(i("0643"),i("4e3e"),i("aadb")),n=i("2f62"),l={components:{Color:a["a"]},props:{mindMap:{type:Object}},data(){return{show:!1,position:{left:0,top:0},node:null,index:0,text:"",fill:""}},computed:{...Object(n["c"])({isDark:t=>t.localConfig.isDark})},created(){this.mindMap.on("node_tag_click",this.onNodeTagClick),this.mindMap.on("scale",this.hide),this.mindMap.on("translate",this.hide),this.mindMap.on("svg_mousedown",this.hide),this.mindMap.on("expand_btn_click",this.hide)},beforeDestroy(){this.mindMap.off("node_tag_click",this.onNodeTagClick),this.mindMap.off("scale",this.hide),this.mindMap.off("translate",this.hide),this.mindMap.off("svg_mousedown",this.hide),this.mindMap.off("expand_btn_click",this.hide)},mounted(){document.body.appendChild(this.$refs.elRef)},methods:{onNodeTagClick(t,e,i,s){this.node=t,this.index=i,"string"===typeof e?this.text=e:(this.text=e.text,this.fill=e.style&&e.style.fill?e.style.fill:"");const{x:o,y:a,width:n,height:l}=s.rbox(),r=260,c=152;let d=o+n/2-r/2;d<0&&(d=0),d+r>window.innerWidth&&(d=window.innerWidth-r),this.position.left=d+"px";let h=a+l+5;h+c>window.innerHeight&&(h=window.innerHeight-c),this.position.top=h+"px",this.show=!0},updateTagText(){const t=this.text.trim();t&&this.updateTagInfo({text:t})},updateTagFill(t){this.updateTagInfo({style:{fill:t}}),this.fill=t},updateTagInfo({text:t,style:e}){if(!this.node)return;const i=[...this.node.getData("tag")];let s=null;"string"===typeof i[this.index]?s={text:i[this.index],style:{}}:(s=i[this.index],s.style||(s.style={})),t&&(s.text=t),e&&Object.keys(e).forEach(t=>{s.style[t]=e[t]}),i[this.index]=s,this.mindMap.execCommand("SET_NODE_TAG",this.node,i)},deleteTag(){if(!this.node)return;const t=[...this.node.getData("tag")];t.splice(this.index,1),this.mindMap.execCommand("SET_NODE_TAG",this.node,t),this.hide()},hide(){this.show=!1,this.node=null,this.index=0,this.text="",this.fill=""}}},r=l,c=(i("7cbe"),i("2877")),d=Object(c["a"])(r,s,o,!1,null,"403f420a",null);e["a"]=d.exports},"82d2":function(t,e,i){},"84ee":function(t,e,i){},8809:function(t,e,i){"use strict";i("1bf1")},"8c3c":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return t.showMiniMap?e("div",{ref:"navigatorBox",staticClass:"navigatorBox",class:{isDark:t.isDark},style:{width:t.width+"px"},on:{mousedown:t.onMousedown,mousemove:t.onMousemove}},[e("div",{ref:"svgBox",staticClass:"svgBox",style:{transform:`scale(${t.svgBoxScale})`,left:t.svgBoxLeft+"px",top:t.svgBoxTop+"px"}},[e("img",{attrs:{src:t.mindMapImg},on:{mousedown:function(t){t.preventDefault()}}})]),e("div",{staticClass:"windowBox",class:{withTransition:t.withTransition},style:t.viewBoxStyle,on:{mousedown:function(e){return e.stopPropagation(),t.onViewBoxMousedown.apply(null,arguments)},mousemove:t.onViewBoxMousemove}})]):t._e()},o=[],a=i("2f62"),n={props:{mindMap:{type:Object}},data(){return{showMiniMap:!1,timer:null,boxWidth:0,boxHeight:0,svgBoxScale:1,svgBoxLeft:0,svgBoxTop:0,viewBoxStyle:{left:0,top:0,bottom:0,right:0},mindMapImg:"",width:0,setSizeTimer:null,withTransition:!0}},computed:{...Object(a["c"])({isDark:t=>t.localConfig.isDark})},mounted(){this.setSize(),window.addEventListener("resize",this.setSize),this.$bus.$on("toggle_mini_map",this.toggle_mini_map),this.$bus.$on("data_change",this.data_change),this.$bus.$on("view_data_change",this.data_change),this.$bus.$on("node_tree_render_end",this.data_change),window.addEventListener("mouseup",this.onMouseup),this.mindMap.on("mini_map_view_box_position_change",this.onViewBoxPositionChange)},destroyed(){window.removeEventListener("resize",this.setSize),this.$bus.$off("toggle_mini_map",this.toggle_mini_map),this.$bus.$off("data_change",this.data_change),this.$bus.$off("view_data_change",this.data_change),this.$bus.$off("node_tree_render_end",this.data_change),window.removeEventListener("mouseup",this.onMouseup),this.mindMap.off("mini_map_view_box_position_change",this.onViewBoxPositionChange)},methods:{toggle_mini_map(t){this.showMiniMap=t,this.$nextTick(()=>{this.$refs.navigatorBox&&this.init(),this.$refs.svgBox&&this.drawMiniMap()})},data_change(){this.showMiniMap&&(clearTimeout(this.timer),this.timer=setTimeout(()=>{this.drawMiniMap()},500))},setSize(){clearTimeout(this.setSizeTimer),this.setSizeTimer=setTimeout(()=>{this.width=Math.min(window.innerWidth-80,370),this.$nextTick(()=>{this.showMiniMap&&(this.init(),this.drawMiniMap())})},300)},init(){let{width:t,height:e}=this.$refs.navigatorBox.getBoundingClientRect();this.boxWidth=t,this.boxHeight=e},drawMiniMap(){let{getImgUrl:t,viewBoxStyle:e,miniMapBoxScale:i,miniMapBoxLeft:s,miniMapBoxTop:o}=this.mindMap.miniMap.calculationMiniMap(this.boxWidth,this.boxHeight);t(t=>{this.mindMapImg=t}),this.viewBoxStyle=e,this.svgBoxScale=i,this.svgBoxLeft=s,this.svgBoxTop=o},onMousedown(t){this.mindMap.miniMap.onMousedown(t)},onMousemove(t){this.mindMap.miniMap.onMousemove(t)},onMouseup(t){this.withTransition||(this.withTransition=!0),this.mindMap.miniMap&&this.mindMap.miniMap.onMouseup(t)},onViewBoxMousedown(t){this.mindMap.miniMap.onViewBoxMousedown(t)},onViewBoxMousemove(t){this.mindMap.miniMap.onViewBoxMousemove(t)},onViewBoxPositionChange({left:t,right:e,top:i,bottom:s}){this.withTransition=!1,this.viewBoxStyle.left=t,this.viewBoxStyle.right=e,this.viewBoxStyle.top=i,this.viewBoxStyle.bottom=s}}},l=n,r=(i("f928"),i("2877")),c=Object(r["a"])(l,s,o,!1,null,"c2af69c6",null);e["a"]=c.exports},"8edea":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{ref:"noteContentViewer",staticClass:"noteContentViewer customScrollbar",style:{left:this.left+"px",top:this.top+"px",visibility:t.show?"visible":"hidden"},on:{click:function(t){t.stopPropagation()},mousedown:function(t){t.stopPropagation()},mousemove:function(t){t.stopPropagation()},mouseup:function(t){t.stopPropagation()},wheel:function(t){t.stopPropagation()}}},[e("div",{ref:"noteContentWrap",staticClass:"noteContentWrap customScrollbar"})])},o=[],a=(i("0643"),i("4e3e"),i("f059")),n=i.n(a),l=(i("fe5f"),{props:{mindMap:{type:Object,default(){return null}}},data(){return{editor:null,show:!1,left:0,top:0,node:null}},created(){this.$bus.$on("showNoteContent",this.onShowNoteContent),this.$bus.$on("hideNoteContent",this.hideNoteContent),document.body.addEventListener("click",this.hideNoteContent),this.$bus.$on("node_active",this.onNodeActive),this.$bus.$on("scale",this.onScale),this.$bus.$on("translate",this.onScale),this.$bus.$on("svg_mousedown",this.hideNoteContent),this.$bus.$on("expand_btn_click",this.hideNoteContent)},mounted(){this.mindMap.el.appendChild(this.$refs.noteContentViewer),this.initEditor()},beforeDestroy(){this.$bus.$off("showNoteContent",this.onShowNoteContent),this.$bus.$off("hideNoteContent",this.hideNoteContent),document.body.removeEventListener("click",this.hideNoteContent),this.$bus.$off("node_active",this.onNodeActive),this.$bus.$off("scale",this.onScale),this.$bus.$off("translate",this.onScale),this.$bus.$off("svg_mousedown",this.hideNoteContent),this.$bus.$off("expand_btn_click",this.hideNoteContent)},methods:{onNodeActive(...t){const e=[...t[1]];e.length>0?e[0]!==this.node&&this.hideNoteContent():this.hideNoteContent()},onShowNoteContent(t,e,i,s){this.node=s,this.editor.setMarkdown(t),this.handleALink(),this.updateNoteContentPosition(e,i),this.show=!0},handleALink(){const t=this.$refs.noteContentViewer.querySelectorAll("a");Array.from(t).forEach(t=>{t.setAttribute("target","_blank")})},updateNoteContentPosition(t,e){const{width:i,height:s}=this.$refs.noteContentViewer.getBoundingClientRect(),{right:o,bottom:a}=this.mindMap.elRect;this.left=t+i>o?o-i:t,this.top=e+s>a?a-s:e},onScale(){if(!this.node||!this.show)return;const{left:t,top:e}=this.node.getNoteContentPosition();this.updateNoteContentPosition(t,e)},hideNoteContent(){this.show=!1},initEditor(){this.editor||(this.editor=new n.a({el:this.$refs.noteContentWrap}))}}}),r=l,c=(i("79b3"),i("2877")),d=Object(c["a"])(r,s,o,!1,null,"19c1538a",null);e["a"]=d.exports},"95e4":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"nodeImageDialog",attrs:{title:t.$t("nodeImage.title"),visible:t.dialogVisible,width:t.isMobile?"90%":"600px",top:t.isMobile?"20px":"15vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"title"},[t._v("Method 1")]),e("ImgUpload",{ref:"ImgUpload",staticStyle:{"margin-bottom":"12px"},model:{value:t.img,callback:function(e){t.img=e},expression:"img"}}),e("div",{staticClass:"title"},[t._v("Method 2")]),e("div",{staticClass:"inputBox"},[e("span",{staticClass:"label"},[t._v("Please enter image URL")]),e("el-input",{attrs:{size:"mini",placeholder:"http://xxx.com/xx.jpg"},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:t.imgUrl,callback:function(e){t.imgUrl=e},expression:"imgUrl"}})],1),e("div",{staticClass:"title"},[t._v("Optional")]),e("div",{staticClass:"inputBox"},[e("span",{staticClass:"label"},[t._v(t._s(t.$t("nodeImage.imgTitle")))]),e("el-input",{attrs:{size:"mini"},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:t.imgTitle,callback:function(e){t.imgTitle=e},expression:"imgTitle"}})],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancel}},[t._v(t._s(t.$t("dialog.cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v(t._s(t.$t("dialog.confirm")))])],1)],1)},o=[],a=(i("0643"),i("4e3e"),i("5aa9")),n=i("d17d"),l={components:{ImgUpload:a["a"]},data(){return{dialogVisible:!1,img:"",imgUrl:"",imgTitle:"",activeNodes:null,isMobile:Object(n["X"])()}},created(){this.$bus.$on("node_active",this.handleNodeActive),this.$bus.$on("showNodeImage",this.handleShowNodeImage)},beforeDestroy(){this.$bus.$off("node_active",this.handleNodeActive),this.$bus.$off("showNodeImage",this.handleShowNodeImage)},methods:{handleNodeActive(...t){this.activeNodes=[...t[1]]},handleShowNodeImage(){if(this.reset(),this.activeNodes.length>0){let t=this.activeNodes[0],e=t.getImageUrl()||"";e&&(/^https?:\/\//.test(e)?this.imgUrl=e:this.img=e),this.imgTitle=t.getData("imageTitle")||""}this.dialogVisible=!0},cancel(){this.dialogVisible=!1,this.reset()},reset(){this.img="",this.imgTitle="",this.imgUrl=""},async confirm(){try{if(!this.img&&!this.imgUrl)return this.cancel(),void this.activeNodes.forEach(t=>{t.setImage(null)});let t=null,e="";this.img?(e=this.img,t=await this.$refs.ImgUpload.getSize()):this.imgUrl&&(e=this.imgUrl,t=await Object(n["F"])(e)),this.activeNodes.forEach(i=>{i.setImage({url:e||"none",title:this.imgTitle,width:t.width||100,height:t.height||100})}),this.cancel()}catch(t){console.log(t)}}}},r=l,c=(i("8809"),i("2877")),d=Object(c["a"])(r,s,o,!1,null,"41a15c4b",null);e["a"]=d.exports},9678:function(t,e,i){},a690:function(t,e,i){},aaa6:function(t,e,i){"use strict";i("5b81");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"searchContainer",class:{isDark:t.isDark,show:t.show}},[e("div",{staticClass:"closeBtnBox"},[e("span",{staticClass:"closeBtn el-icon-close",on:{click:t.close}})]),e("div",{staticClass:"searchInputBox"},[e("el-input",{ref:"searchInputRef",attrs:{placeholder:t.$t("search.searchPlaceholder"),size:"small"},on:{focus:t.onFocus,blur:t.onBlur},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),t.onSearchNext.apply(null,arguments))},keydown:function(t){t.stopPropagation()}},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}},[e("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"}),t.isUndef(t.searchText)?t._e():e("el-button",{attrs:{slot:"append",size:"small"},on:{click:function(e){t.showReplaceInput=!0}},slot:"append"},[t._v(t._s(t.$t("search.replace")))])],1),t.showSearchInfo&&!t.isUndef(t.searchText)?e("div",{staticClass:"searchInfo"},[t._v(" "+t._s(t.currentIndex)+" / "+t._s(t.total)+" ")]):t._e()],1),t.showReplaceInput?e("el-input",{ref:"replaceInputRef",staticStyle:{margin:"12px 0"},attrs:{placeholder:t.$t("search.replacePlaceholder"),size:"small"},on:{focus:t.onFocus,blur:t.onBlur},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:t.replaceText,callback:function(e){t.replaceText=e},expression:"replaceText"}},[e("i",{staticClass:"el-input__icon el-icon-edit",attrs:{slot:"prefix"},slot:"prefix"}),e("el-button",{attrs:{slot:"append",size:"small"},on:{click:t.hideReplaceInput},slot:"append"},[t._v(t._s(t.$t("search.cancel")))])],1):t._e(),t.showReplaceInput?e("div",{staticClass:"btnList"},[e("el-button",{attrs:{size:"small",disabled:t.isReadonly},on:{click:t.replace}},[t._v(t._s(t.$t("search.replace")))]),e("el-button",{attrs:{size:"small",disabled:t.isReadonly},on:{click:t.replaceAll}},[t._v(t._s(t.$t("search.replaceAll")))])],1):t._e(),t.showSearchResultList?e("div",{staticClass:"searchResultList",style:{height:t.searchResultListHeight+"px"}},[t._l(t.searchResultList,(function(i,s){return e("div",{key:i.id,staticClass:"searchResultItem",attrs:{title:i.name},domProps:{innerHTML:t._s(i.text)},on:{click:function(e){return e.stopPropagation(),t.onSearchResultItemClick(s)}}})})),t.searchResultList.length<=0?e("div",{staticClass:"empty"},[e("span",{staticClass:"iconfont iconwushuju"}),e("span",{staticClass:"text"},[t._v(t._s(t.$t("search.noResult")))])]):t._e()],2):t._e()],1)},o=[],a=(i("0643"),i("a573"),i("2f62")),n=i("d17d"),l={props:{mindMap:{type:Object}},data(){return{show:!1,searchText:"",replaceText:"",showReplaceInput:!1,currentIndex:0,total:0,showSearchInfo:!1,searchResultListHeight:0,searchResultList:[],showSearchResultList:!1}},computed:{...Object(a["c"])({isReadonly:t=>t.isReadonly,isDark:t=>t.localConfig.isDark})},watch:{searchText(){Object(n["bb"])(this.searchText)&&(this.currentIndex=0,this.total=0,this.showSearchInfo=!1)}},created(){this.$bus.$on("show_search",this.showSearch),this.mindMap.on("search_info_change",this.handleSearchInfoChange),this.mindMap.on("node_click",this.blur),this.mindMap.on("draw_click",this.blur),this.mindMap.on("expand_btn_click",this.blur),this.mindMap.on("search_match_node_list_change",this.onSearchMatchNodeListChange),this.mindMap.keyCommand.addShortcut("Control+f",this.showSearch),window.addEventListener("resize",this.setSearchResultListHeight),this.$bus.$on("setData",this.close)},mounted(){this.setSearchResultListHeight()},beforeDestroy(){this.$bus.$off("show_search",this.showSearch),this.mindMap.off("search_info_change",this.handleSearchInfoChange),this.mindMap.off("node_click",this.blur),this.mindMap.off("draw_click",this.blur),this.mindMap.off("expand_btn_click",this.blur),this.mindMap.off("search_match_node_list_change",this.onSearchMatchNodeListChange),this.mindMap.keyCommand.removeShortcut("Control+f",this.showSearch),window.removeEventListener("resize",this.setSearchResultListHeight),this.$bus.$off("setData",this.close)},methods:{isUndef:n["bb"],handleSearchInfoChange(t){this.currentIndex=t.currentIndex+1,this.total=t.total,this.showSearchInfo=!0},showSearch(){this.$bus.$emit("closeSideBar"),this.show=!0,this.$refs.searchInputRef.focus()},hideReplaceInput(){this.showReplaceInput=!1,this.replaceText=""},onFocus(){this.mindMap.updateConfig({enableAutoEnterTextEditWhenKeydown:!1})},onBlur(){this.mindMap.updateConfig({enableAutoEnterTextEditWhenKeydown:!0})},blur(){this.$refs.searchInputRef&&this.$refs.searchInputRef.blur(),this.$refs.replaceInputRef&&this.$refs.replaceInputRef.blur()},onSearchNext(){this.showSearchResultList=!0,this.mindMap.search.search(this.searchText)},replace(){this.mindMap.search.replace(this.replaceText,!0)},replaceAll(){this.mindMap.search.replaceAll(this.replaceText)},close(){this.show=!1,this.showSearchResultList=!1,this.showSearchInfo=!1,this.total=0,this.currentIndex=0,this.searchText="",this.hideReplaceInput(),this.mindMap.search.endSearch()},onSearchMatchNodeListChange(t){this.searchResultList=t.map(t=>{const e=t.data||t.nodeData.data;let i=e.text;const s=e.uid;e.richText&&(i=Object(n["O"])(i));const o=new RegExp(""+this.searchText.trim(),"g"),a=i.replace(o,t=>`<span class="match">${t}</span>`);return{data:t,id:s,text:a,name:i}})},setSearchResultListHeight(){this.searchResultListHeight=window.innerHeight-267-24},onSearchResultItemClick(t){this.mindMap.search.jump(t)}}},r=l,c=(i("00da"),i("2877")),d=Object(c["a"])(r,s,o,!1,null,"62884c01",null);e["a"]=d.exports},b963:function(t,e,i){},bbc8:function(t,e,i){},bf95:function(t,e,i){"use strict";i("633b")},c1c4:function(t,e,i){"use strict";i("84ee")},c463:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("viewer",{attrs:{images:t.images}},t._l(t.images,(function(t){return e("img",{key:t,attrs:{src:t}})})),0)},o=[],a={props:{mindMap:{type:Object,default(){return null}}},data(){return{images:[]}},mounted(){this.mindMap.on("node_img_dblclick",this.onNodeTmgDblclick)},beforeDestroy(){this.mindMap.off("node_img_dblclick",this.onNodeTmgDblclick)},methods:{onNodeTmgDblclick(t,e){e.stopPropagation(),e.preventDefault(),this.images=[t.getImageUrl()],this.$viewerApi({images:this.images})}}},n=a,l=i("2877"),r=Object(l["a"])(n,s,o,!1,null,null,null);e["a"]=r.exports},c9c0:function(t,e,i){"use strict";i("1b25")},ccac:function(t,e,i){},d4f4:function(t,e,i){"use strict";i("db60")},d593:function(t,e,i){"use strict";i("b963")},d5b5:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"navigatorContainer customScrollbar",class:{isDark:t.isDark}},[e("div",{staticClass:"item"},[e("el-select",{staticStyle:{width:"100px"},attrs:{size:"small"},on:{change:t.onLangChange},model:{value:t.lang,callback:function(e){t.lang=e},expression:"lang"}},t._l(t.langList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})})),1)],1),e("div",{staticClass:"item"},[e("el-tooltip",{attrs:{effect:"dark",content:t.$t("navigatorToolbar.backToRoot"),placement:"top"}},[e("div",{staticClass:"btn iconfont icondingwei",on:{click:t.backToRoot}})])],1),e("div",{staticClass:"item"},[e("div",{staticClass:"btn iconfont iconsousuo",on:{click:t.showSearch}})]),e("div",{staticClass:"item"},[e("MouseAction",{attrs:{isDark:t.isDark,mindMap:t.mindMap}})],1),e("div",{staticClass:"item"},[e("el-tooltip",{attrs:{effect:"dark",content:t.openMiniMap?t.$t("navigatorToolbar.closeMiniMap"):t.$t("navigatorToolbar.openMiniMap"),placement:"top"}},[e("div",{staticClass:"btn iconfont icondaohang1",on:{click:t.toggleMiniMap}})])],1),e("div",{staticClass:"item"},[e("el-tooltip",{attrs:{effect:"dark",content:t.isReadonly?t.$t("navigatorToolbar.edit"):t.$t("navigatorToolbar.readonly"),placement:"top"}},[e("div",{staticClass:"btn iconfont",class:[t.isReadonly?"iconyanjing":"iconbianji1"],on:{click:t.readonlyChange}})])],1),e("div",{staticClass:"item"},[e("Fullscreen",{attrs:{isDark:t.isDark,mindMap:t.mindMap}})],1),e("div",{staticClass:"item"},[e("Scale",{attrs:{isDark:t.isDark,mindMap:t.mindMap}})],1),e("div",{staticClass:"item"},[e("div",{staticClass:"btn iconfont",class:[t.isDark?"iconmoon_line":"iconlieri"],on:{click:t.toggleDark}})]),e("div",{staticClass:"item"},[e("Demonstrate",{attrs:{isDark:t.isDark,mindMap:t.mindMap}})],1),e("div",{staticClass:"item"},[e("el-dropdown",{on:{command:t.handleCommand}},[e("div",{staticClass:"btn el-icon-more"}),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"shortcutKey"}},[e("span",{staticClass:"iconfont iconjianpan"}),t._v(" "+t._s(t.$t("navigatorToolbar.shortcutKeys"))+" ")]),e("el-dropdown-item",{attrs:{command:"aiChat"}},[e("span",{staticClass:"iconfont iconAIshengcheng"}),t._v(" "+t._s(t.$t("navigatorToolbar.ai"))+" ")]),e("el-dropdown-item",{attrs:{command:"client"}},[e("span",{staticClass:"iconfont iconxiazai"}),t._v(" "+t._s(t.$t("navigatorToolbar.downloadClient"))+" ")]),e("el-dropdown-item",{attrs:{command:"github"}},[e("span",{staticClass:"iconfont icongithub"}),t._v(" Github ")]),e("el-dropdown-item",{attrs:{command:"site"}},[e("span",{staticClass:"iconfont iconwangzhan"}),t._v(" "+t._s(t.$t("navigatorToolbar.site"))+" ")]),e("el-dropdown-item",{attrs:{disabled:""}},[t._v(t._s(t.$t("navigatorToolbar.current"))+"v"+t._s(t.version))])],1)],1)],1)])},o=[],a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"scaleContainer",class:{isDark:t.isDark}},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("scale.zoomOut"),placement:"top"}},[e("div",{staticClass:"btn el-icon-minus",on:{click:t.narrow}})]),e("div",{staticClass:"scaleInfo"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.scaleNum,expression:"scaleNum"}],ref:"inputRef",attrs:{type:"text"},domProps:{value:t.scaleNum},on:{input:[function(e){e.target.composing||(t.scaleNum=e.target.value)},t.onScaleNumInput],change:t.onScaleNumChange,focus:t.onScaleNumInputFocus,keydown:function(t){t.stopPropagation()},keyup:function(t){t.stopPropagation()}}}),t._v("% ")]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("scale.zoomIn"),placement:"top"}},[e("div",{staticClass:"btn el-icon-plus",on:{click:t.enlarge}})])],1)},n=[],l={props:{mindMap:{type:Object},isDark:{type:Boolean}},data(){return{scaleNum:100,cacheScaleNum:0}},watch:{mindMap(t,e){t&&!e&&(this.mindMap.on("scale",this.onScale),this.mindMap.on("draw_click",this.onDrawClick),this.scaleNum=this.toPer(this.mindMap.view.scale))}},beforeDestroy(){this.mindMap.off("scale",this.onScale),this.mindMap.off("draw_click",this.onDrawClick)},methods:{toPer(t){return(100*t).toFixed(0)},narrow(){this.mindMap.view.narrow()},enlarge(){this.mindMap.view.enlarge()},onScaleNumInputFocus(){this.cacheScaleNum=this.scaleNum},onScaleNumInput(){this.scaleNum=this.scaleNum.replace(/[^0-9]+/g,"")},onScaleNumChange(){const t=Number(this.scaleNum);if(Number.isNaN(t)||t<=0)this.scaleNum=this.cacheScaleNum;else{const t=this.mindMap.width/2,e=this.mindMap.height/2;this.mindMap.view.setScale(this.scaleNum/100,t,e)}},onScale(t){this.scaleNum=this.toPer(t)},onDrawClick(){this.$refs.inputRef&&this.$refs.inputRef.blur()}}},r=l,c=(i("0d42"),i("2877")),d=Object(c["a"])(r,a,n,!1,null,"3225a510",null),h=d.exports,u=i("3dd7"),p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mouseActionContainer",class:{isDark:t.isDark}},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.useLeftKeySelectionRightKeyDrag?t.$t("mouseAction.tip2"):t.$t("mouseAction.tip1"),placement:"top"}},[e("div",{staticClass:"btn iconfont",class:[t.useLeftKeySelectionRightKeyDrag?"iconmouseR":"iconmouseL"],on:{click:t.toggleAction}})])],1)},m=[],f=i("2f62"),g={props:{mindMap:{type:Object},isDark:{type:Boolean}},data(){return{}},computed:{...Object(f["c"])({useLeftKeySelectionRightKeyDrag:t=>t.localConfig.useLeftKeySelectionRightKeyDrag})},methods:{...Object(f["b"])(["setLocalConfig"]),toggleAction(){let t=!this.useLeftKeySelectionRightKeyDrag;this.mindMap.updateConfig({useLeftKeySelectionRightKeyDrag:t}),this.setLocalConfig({useLeftKeySelectionRightKeyDrag:t})}}},b=g,v=(i("ea02"),Object(c["a"])(b,p,m,!1,null,"600bd935",null)),C=v.exports,w=i("f121"),x=i("9225"),k=i("365c"),y=i("7c54"),_=i("86c3"),$={components:{Scale:h,Fullscreen:u["a"],MouseAction:C,Demonstrate:_["a"]},props:{mindMap:{type:Object}},data(){return{version:y.version,langList:w["l"],lang:"",openMiniMap:!1}},computed:{...Object(f["c"])({isReadonly:t=>t.isReadonly,isDark:t=>t.localConfig.isDark})},created(){this.lang=Object(k["c"])()},methods:{...Object(f["b"])(["setLocalConfig","setIsReadonly","setIsSourceCodeEdit","setActiveSidebar"]),readonlyChange(){this.setIsReadonly(!this.isReadonly),this.mindMap.setMode(this.isReadonly?"readonly":"edit")},toggleMiniMap(){this.openMiniMap=!this.openMiniMap,this.$bus.$emit("toggle_mini_map",this.openMiniMap)},onLangChange(t){x["a"].locale=t,Object(k["g"])(t),this.$bus.$emit("lang_change")},showSearch(){this.$bus.$emit("show_search")},toggleDark(){this.setLocalConfig({isDark:!this.isDark})},handleCommand(t){if("shortcutKey"===t)return void this.setActiveSidebar("shortcutKey");if("aiChat"===t)return void this.setActiveSidebar("ai");if("client"===t)return void this.$bus.$emit("showDownloadTip",this.$t("navigatorToolbar.downloadClient"),this.$t("navigatorToolbar.downloadDesc"));let e="";switch(t){case"github":e="https://github.com/wanglin2/mind-map";break;case"helpDoc":e="https://wanglin2.github.io/mind-map-docs/help/help1.html";break;case"devDoc":e="https://wanglin2.github.io/mind-map-docs/start/introduction.html";break;case"site":e="https://wanglin2.github.io/mind-map-docs/";break;case"issue":e="https://github.com/wanglin2/mind-map/issues/new";break;default:break}const i=document.createElement("a");i.href=e,i.target="_blank",i.click()},backToRoot(){this.mindMap.renderer.setRootNodeCenter()},openSourceCodeEdit(){this.setIsSourceCodeEdit(!0)}}},S=$,T=(i("36e4"),Object(c["a"])(S,s,o,!1,null,"046a8496",null));e["a"]=T.exports},da0d:function(t,e,i){"use strict";i("05f0")},db49:function(t,e,i){},db60:function(t,e,i){},dcda:function(t,e,i){"use strict";i("f863")},e0d3:function(t,e,i){"use strict";i("9678")},e411:function(t,e,i){"use strict";i("82d2")},e459:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"scrollbarContainer",class:{isDark:t.isDark}},[e("div",{ref:"verticalScrollbarRef",staticClass:"scrollbar verticalScrollbar",on:{click:t.onVerticalScrollbarClick}},[e("div",{staticClass:"scrollbarInner",style:t.verticalScrollbarStyle,on:{click:function(t){t.stopPropagation()},mousedown:t.onVerticalScrollbarMousedown}})]),e("div",{ref:"horizontalScrollbarRef",staticClass:"scrollbar horizontalScrollbar",on:{click:t.onHorizontalScrollbarClick}},[e("div",{staticClass:"scrollbarInner",style:t.horizontalScrollbarStyle,on:{click:function(t){t.stopPropagation()},mousedown:t.onHorizontalScrollbarMousedown}})])])},o=[],a=i("2f62"),n={props:{mindMap:{type:Object}},data(){return{timer:null,resizeTimer:null,verticalScrollbarStyle:{},horizontalScrollbarStyle:{}}},computed:{...Object(a["c"])({isDark:t=>t.localConfig.isDark})},mounted(){this.setScrollBarWrapSize(),this.$bus.$on("scrollbar_change",this.updateScrollbar),window.addEventListener("resize",this.onResize)},beforeDestroy(){this.$bus.$off("scrollbar_change",this.updateScrollbar),window.removeEventListener("resize",this.onResize)},methods:{setScrollBarWrapSize(){if(!this.mindMap.scrollbar)return;const{width:t}=this.$refs.horizontalScrollbarRef.getBoundingClientRect(),{height:e}=this.$refs.verticalScrollbarRef.getBoundingClientRect();this.mindMap.scrollbar.setScrollBarWrapSize(t,e)},onResize(){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{this.setScrollBarWrapSize()},300)},updateScrollbar({vertical:t,horizontal:e}){this.verticalScrollbarStyle={top:t.top+"%",height:t.height+"%"},this.horizontalScrollbarStyle={left:e.left+"%",width:e.width+"%"}},onVerticalScrollbarMousedown(t){this.mindMap.scrollbar.onMousedown(t,"vertical")},onVerticalScrollbarClick(t){this.mindMap.scrollbar.onClick(t,"vertical")},onHorizontalScrollbarMousedown(t){this.mindMap.scrollbar.onMousedown(t,"horizontal")},onHorizontalScrollbarClick(t){this.mindMap.scrollbar.onClick(t,"horizontal")}}},l=n,r=(i("396b"),i("2877")),c=Object(r["a"])(l,s,o,!1,null,"27127e84",null);e["a"]=c.exports},e829:function(t,e,i){},ea02:function(t,e,i){"use strict";i("ec68")},ebc6:function(t,e,i){},ec68:function(t,e,i){},ee5c:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("Sidebar",{ref:"sidebar",attrs:{title:t.$t("nodeIconSidebar.title")}},[e("div",{staticClass:"box",class:{isDark:t.isDark}},[e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:t.$t("nodeIconSidebar.icon"),name:"icon"}}),e("el-tab-pane",{attrs:{label:t.$t("nodeIconSidebar.sticker"),name:"image"}})],1),e("div",{staticClass:"boxContent"},["icon"===t.activeName?e("div",{staticClass:"iconBox"},t._l(t.nodeIconList,(function(i){return e("div",{key:i.name,staticClass:"item"},[e("div",{staticClass:"title"},[t._v(t._s(i.name))]),e("div",{staticClass:"list"},t._l(i.list,(function(s){return e("div",{key:s.name,staticClass:"icon",class:{selected:t.iconList.includes(i.type+"_"+s.name)},domProps:{innerHTML:t._s(t.getHtml(s.icon))},on:{click:function(e){return t.setIcon(i.type,s.name)}}})})),0)])})),0):t._e(),"image"===t.activeName?e("div",{staticClass:"imageBox"},t._l(t.nodeImageList,(function(i){return e("div",{key:i.name,staticClass:"item"},[e("div",{staticClass:"title"},[t._v(t._s(i.name))]),e("div",{staticClass:"list"},t._l(i.list,(function(i){return e("div",{key:i.url,staticClass:"icon",class:{selected:t.nodeImage===i.url},on:{click:function(e){return t.setImage(i)}}},[e("img",{attrs:{src:i.url,alt:""}})])})),0)])})),0):t._e()])],1)])},o=[],a=(i("14d9"),i("0643"),i("4e3e"),i("62a5")),n=i("2f62"),l=i("9b1e"),r=i("d17d"),c=i("d1f7"),d=i("de42"),h={components:{Sidebar:a["a"]},data(){return{activeName:"icon",nodeIconList:Object(r["fb"])([...l["b"],...c["a"]]),nodeImageList:[...d["a"]],iconList:[],nodeImage:"",activeNodes:[]}},computed:{...Object(n["c"])({activeSidebar:t=>t.activeSidebar,isDark:t=>t.localConfig.isDark})},watch:{activeSidebar(t){this.$refs.sidebar.show="nodeIconSidebar"===t}},created(){this.$bus.$on("node_active",this.handleNodeActive),this.$bus.$on("showNodeIcon",this.handleShowNodeIcon)},beforeDestroy(){this.$bus.$off("node_active",this.handleNodeActive),this.$bus.$off("showNodeIcon",this.handleShowNodeIcon)},methods:{handleNodeActive(...t){if(this.activeNodes=[...t[1]],this.activeNodes.length>0)if(1===this.activeNodes.length){let t=this.activeNodes[0];this.nodeImage=t.getData("image")||"",this.iconList=t.getData("icon")||[]}else this.nodeImage=[],this.iconList=[];else this.iconList=[],this.nodeImage=""},handleShowNodeIcon(){this.dialogVisible=!0},getHtml(t){return/^<svg/.test(t)?t:`<img src="${t}" />`},setIcon(t,e){this.activeNodes.forEach(i=>{const s=[...i.getData("icon")||[]];let o=t+"_"+e,a=s.findIndex(t=>t===o);if(-1!==a)s.splice(a,1);else{let e=s.findIndex(e=>e.split("_")[0]===t);-1!==e?s.splice(e,1,o):s.push(o)}i.setIcon(s),1===this.activeNodes.length&&(this.iconList=s)})},setImage(t){this.activeNodes.forEach(e=>{this.nodeImage=t.url,e.setImage({...t})})}}},u=h,p=(i("166a"),i("2877")),m=Object(p["a"])(u,s,o,!1,null,"d871bfb6",null);e["a"]=m.exports},ee83:function(t,e,i){},f811:function(t,e,i){"use strict";i("751d")},f863:function(t,e,i){},f928:function(t,e,i){"use strict";i("12e4")}}]);