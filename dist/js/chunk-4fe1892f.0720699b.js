(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4fe1892f"],{"0494":function(t,e,i){"use strict";i("db49")},"05f0":function(t,e,i){},"0c47":function(t,e,i){},"0dda":function(t,e,i){"use strict";i("3771")},"0eab":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"nodeTagDialog",attrs:{title:t.$t("nodeTag.title"),visible:t.dialogVisible,width:t.isMobile?"90%":"50%",top:t.isMobile?"20px":"15vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-input",{attrs:{disabled:t.tagArr.length>=t.max,placeholder:t.$t("nodeTag.addTip")},nativeOn:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.add.apply(null,arguments)},function(t){t.stopPropagation()}],keydown:function(t){t.stopPropagation()}},model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}}),e("div",{staticClass:"tagList"},t._l(t.tagArr,(function(i,s){return e("div",{key:s,staticClass:"tagItem",style:{backgroundColor:t.generateColorByContent(i)}},[t._v(" "+t._s("string"===typeof i?i:i.text)+" "),e("div",{staticClass:"delBtn",on:{click:function(e){return t.del(s)}}},[e("span",{staticClass:"iconfont iconshanchu"})])])})),0),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancel}},[t._v(t._s(t.$t("dialog.cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v(t._s(t.$t("dialog.confirm")))])],1)],1)},o=[],n=(i("14d9"),i("0643"),i("4e3e"),i("d17d")),a={data(){return{dialogVisible:!1,tagArr:[],tag:"",activeNodes:[],max:5,isMobile:Object(n["X"])()}},watch:{dialogVisible(t,e){!t&&e&&this.$bus.$emit("endTextEdit")}},created(){this.$bus.$on("node_active",this.handleNodeActive),this.$bus.$on("showNodeTag",this.handleShowNodeTag)},beforeDestroy(){this.$bus.$off("node_active",this.handleNodeActive),this.$bus.$off("showNodeTag",this.handleShowNodeTag)},methods:{generateColorByContent:n["C"],handleNodeActive(...t){if(this.activeNodes=[...t[1]],this.activeNodes.length>0){let t=this.activeNodes[0];this.tagArr=t.getData("tag")||[]}else this.tagArr=[],this.tag=""},handleShowNodeTag(){this.$bus.$emit("startTextEdit"),this.dialogVisible=!0},add(){const t=this.tag.trim();t&&(this.tagArr.push(t),this.tag="")},del(t){this.tagArr.splice(t,1)},cancel(){this.dialogVisible=!1},confirm(){this.activeNodes.forEach(t=>{t.setTag(this.tagArr)}),this.cancel()}}},l=a,c=(i("e411"),i("2877")),r=Object(c["a"])(l,s,o,!1,null,"6b6bba9c",null);e["a"]=r.exports},"102d":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"nodeHyperlinkDialog",attrs:{title:t.$t("nodeHyperlink.title"),visible:t.dialogVisible,width:t.isMobile?"90%":"50%",top:t.isMobile?"20px":"15vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"item"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeHyperlink.link")))]),e("el-input",{attrs:{size:"mini",placeholder:"http://xxxx.com/"},on:{blur:function(e){return t.handleUrl()}},nativeOn:{keyup:function(t){t.stopPropagation()},keydown:function(t){t.stopPropagation()}},model:{value:t.link,callback:function(e){t.link=e},expression:"link"}},[e("el-select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:t.protocol,callback:function(e){t.protocol=e},expression:"protocol"}},[e("el-option",{attrs:{label:"https",value:"https"}}),e("el-option",{attrs:{label:"http",value:"http"}}),e("el-option",{attrs:{label:"None",value:"none"}})],1)],1)],1),e("div",{staticClass:"item"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeHyperlink.name")))]),e("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(t){t.stopPropagation()},keydown:function(t){t.stopPropagation()}},model:{value:t.linkTitle,callback:function(e){t.linkTitle=e},expression:"linkTitle"}})],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancel}},[t._v(t._s(t.$t("dialog.cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v(t._s(t.$t("dialog.confirm")))])],1)])},o=[],n=(i("0643"),i("4e3e"),i("d17d")),a={data(){return{dialogVisible:!1,link:"",linkTitle:"",activeNodes:[],protocol:"https",isMobile:Object(n["X"])()}},created(){this.$bus.$on("node_active",this.handleNodeActive),this.$bus.$on("showNodeLink",this.handleShowNodeLink)},beforeDestroy(){this.$bus.$off("node_active",this.handleNodeActive),this.$bus.$off("showNodeLink",this.handleShowNodeLink)},methods:{handleNodeActive(...t){if(this.activeNodes=[...t[1]],this.activeNodes.length>0){let t=this.activeNodes[0];this.link=t.getData("hyperlink")||"",this.handleUrl(!0),this.linkTitle=t.getData("hyperlinkTitle")||""}else this.link="",this.linkTitle=""},removeProtocol(t){return t.replace(/^https?:\/\//,"")},handleUrl(t){const e=this.link.match(/^(https?):\/\//);e&&e[1]?this.protocol=e[1]:this.link?t&&(this.protocol="none"):this.protocol="https",this.link=this.removeProtocol(this.link)},handleShowNodeLink(){this.dialogVisible=!0},cancel(){this.dialogVisible=!1},confirm(){this.activeNodes.forEach(t=>{t.setHyperlink(("none"===this.protocol?"":this.protocol+"://")+this.link,this.linkTitle),this.cancel()})}}},l=a,c=(i("19a0"),i("2877")),r=Object(c["a"])(l,s,o,!1,null,"21beb91c",null);e["a"]=r.exports},"12e4":function(t,e,i){},"166a":function(t,e,i){"use strict";i("bbc8")},1798:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("Sidebar",{ref:"sidebar",attrs:{title:t.$t("nodeOuterFrame.nodeOuterFrameStyle")}},[e("div",{staticClass:"sidebarContent",class:{isDark:t.isDark}},[e("div",{staticClass:"panelHeader"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.outerFrameSetting")))]),e("span",{staticClass:"deleteBtn",on:{click:t.deleteOuterFrame}},[t._v(" "+t._s(t.$t("nodeOuterFrame.deleteOuterFrame"))+" "),e("span",{staticClass:"iconfont iconshanchu"})])]),e("div",{staticClass:"panelBody"},[e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.boxStyle")))]),e("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:e=>{t.updateOuterFrame("strokeWidth",e)}},model:{value:t.styleConfig.strokeWidth,callback:function(e){t.$set(t.styleConfig,"strokeWidth",e)},expression:"styleConfig.strokeWidth"}},t._l(t.lineWidthList,(function(i){return e("el-option",{key:i,attrs:{label:i,value:i}},[i>0?e("span",{staticClass:"borderLine",class:{isDark:t.isDark},style:{height:i+"px"}}):t._e()])})),1),e("el-select",{staticStyle:{width:"80px","margin-left":"4px"},attrs:{size:"mini",placeholder:""},on:{change:e=>{t.updateOuterFrame("strokeDasharray",e)}},model:{value:t.styleConfig.strokeDasharray,callback:function(e){t.$set(t.styleConfig,"strokeDasharray",e)},expression:"styleConfig.strokeDasharray"}},t._l(t.borderDasharrayList,(function(i){return e("el-option",{key:i.value,attrs:{label:i.name,value:i.value}},[e("svg",{attrs:{width:"120",height:"34"}},[e("line",{attrs:{x1:"10",y1:"17",x2:"110",y2:"17","stroke-width":"2",stroke:t.styleConfig.strokeDasharray===i.value?"#409eff":t.isDark?"#fff":"#000","stroke-dasharray":i.value}})])])})),1)],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.boxColor")))]),e("span",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],staticClass:"block",style:{backgroundColor:t.styleConfig.strokeColor}}),e("el-popover",{ref:"popover",attrs:{placement:"bottom",trigger:"click"}},[e("Color",{attrs:{color:t.styleConfig.strokeColor},on:{change:e=>{t.updateOuterFrame("strokeColor",e)}}})],1)],1),e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.radius")))]),e("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:e=>{t.updateOuterFrame("radius",e)}},model:{value:t.styleConfig.radius,callback:function(e){t.$set(t.styleConfig,"radius",e)},expression:"styleConfig.radius"}},t._l(t.borderRadiusList,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.fillColor")))]),e("span",{directives:[{name:"popover",rawName:"v-popover:popover2",arg:"popover2"}],staticClass:"block",style:{backgroundColor:t.styleConfig.fill}}),e("el-popover",{ref:"popover2",attrs:{placement:"bottom",trigger:"click"}},[e("Color",{attrs:{color:t.styleConfig.fill},on:{change:e=>{t.updateOuterFrame("fill",e)}}})],1)],1)])]),e("div",{staticClass:"panelHeader",staticStyle:{"margin-top":"12px"}},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.outerFrameText")))]),e("span",{staticClass:"deleteBtn",on:{click:t.deleteOuterFrameText}},[t._v(" "+t._s(t.$t("nodeOuterFrame.deleteOuterFrameText"))+" "),e("span",{staticClass:"iconfont iconshanchu"})])]),e("div",{staticClass:"panelBody"},[e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.fontFamily")))]),e("el-select",{attrs:{size:"mini",placeholder:""},on:{change:e=>{t.updateOuterFrame("fontFamily",e)}},model:{value:t.styleConfig.fontFamily,callback:function(e){t.$set(t.styleConfig,"fontFamily",e)},expression:"styleConfig.fontFamily"}},t._l(t.fontFamilyList,(function(t){return e("el-option",{key:t.value,style:{fontFamily:t.value},attrs:{label:t.name,value:t.value}})})),1)],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"btnGroup"},[e("el-tooltip",{attrs:{content:t.$t("nodeOuterFrame.color"),placement:"bottom"}},[e("div",{directives:[{name:"popover",rawName:"v-popover:popover3",arg:"popover3"}],staticClass:"styleBtn"},[t._v(" A "),e("span",{staticClass:"colorShow",style:{backgroundColor:t.styleConfig.color}})])]),e("el-tooltip",{attrs:{content:t.$t("nodeOuterFrame.fontBold"),placement:"bottom"}},[e("div",{staticClass:"styleBtn",class:{actived:"bold"===t.styleConfig.fontWeight},on:{click:t.toggleFontWeight}},[t._v(" B ")])]),e("el-tooltip",{attrs:{content:t.$t("nodeOuterFrame.italic"),placement:"bottom"}},[e("div",{staticClass:"styleBtn i",class:{actived:"italic"===t.styleConfig.fontStyle},on:{click:t.toggleFontStyle}},[t._v(" I ")])])],1),e("el-popover",{ref:"popover3",attrs:{placement:"bottom",trigger:"hover"}},[e("Color",{attrs:{color:t.styleConfig.color},on:{change:e=>{t.updateOuterFrame("color",e)}}})],1)],1),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.lineHeight")))]),e("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:e=>{t.updateOuterFrame("lineHeight",e)}},model:{value:t.styleConfig.lineHeight,callback:function(e){t.$set(t.styleConfig,"lineHeight",e)},expression:"styleConfig.lineHeight"}},t._l(t.lineHeightList,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.fontSize")))]),e("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:e=>{t.updateOuterFrame("fontSize",e)}},model:{value:t.styleConfig.fontSize,callback:function(e){t.$set(t.styleConfig,"fontSize",e)},expression:"styleConfig.fontSize"}},t._l(t.fontSizeList,(function(t){return e("el-option",{key:t,style:{fontSize:t+"px"},attrs:{label:t,value:t}})})),1)],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.textFill")))]),e("span",{directives:[{name:"popover",rawName:"v-popover:popover4",arg:"popover4"}],staticClass:"block",style:{backgroundColor:t.styleConfig.textFill}}),e("el-popover",{ref:"popover4",attrs:{placement:"bottom",trigger:"click"}},[e("Color",{attrs:{color:t.styleConfig.textFill},on:{change:e=>{t.updateOuterFrame("textFill",e)}}})],1)],1),e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.textFillRadius")))]),e("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:e=>{t.updateOuterFrame("textFillRadius",e)}},model:{value:t.styleConfig.textFillRadius,callback:function(e){t.$set(t.styleConfig,"textFillRadius",e)},expression:"styleConfig.textFillRadius"}},t._l(t.borderRadiusList,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.textAlign")))]),e("el-radio-group",{attrs:{size:"mini"},on:{change:e=>{t.updateOuterFrame("textAlign",e)}},model:{value:t.styleConfig.textAlign,callback:function(e){t.$set(t.styleConfig,"textAlign",e)},expression:"styleConfig.textAlign"}},[e("el-radio-button",{attrs:{label:"left"}},[t._v(t._s(t.$t("nodeOuterFrame.left")))]),e("el-radio-button",{attrs:{label:"center"}},[t._v(t._s(t.$t("nodeOuterFrame.center")))]),e("el-radio-button",{attrs:{label:"right"}},[t._v(t._s(t.$t("nodeOuterFrame.right")))])],1)],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.paddingX")))]),e("el-slider",{staticStyle:{width:"180px"},on:{change:e=>{t.updatePadding("x",e)}},model:{value:t.paddingStyle.paddingX,callback:function(e){t.$set(t.paddingStyle,"paddingX",e)},expression:"paddingStyle.paddingX"}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"rowItem"},[e("span",{staticClass:"name"},[t._v(t._s(t.$t("nodeOuterFrame.paddingY")))]),e("el-slider",{staticStyle:{width:"180px"},on:{change:e=>{t.updatePadding("y",e)}},model:{value:t.paddingStyle.paddingY,callback:function(e){t.$set(t.paddingStyle,"paddingY",e)},expression:"paddingStyle.paddingY"}})],1)])])])])},o=[],n=(i("0643"),i("4e3e"),i("62a5")),a=i("aadb"),l=i("2f62"),c=i("f121"),r=i("f503"),d={components:{Sidebar:n["a"],Color:a["a"]},props:{mindMap:{type:Object}},data(){return{lineWidthList:c["q"],lineHeightList:c["n"],fontSizeList:c["k"],borderRadiusList:c["f"],styleConfig:{...r["a"].defaultStyle},paddingStyle:{paddingX:0,paddingY:0}}},computed:{...Object(l["c"])({activeSidebar:t=>t.activeSidebar,isDark:t=>t.localConfig.isDark,borderDasharrayList(){return c["e"][this.$i18n.locale]||c["e"].zh}}),fontFamilyList(){return c["j"][this.$i18n.locale]||c["j"].zh}},watch:{activeSidebar(t){this.$refs.sidebar.show="nodeOuterFrameStyle"===t}},created(){this.mindMap.on("outer_frame_active",this.onOuterFrameActive),this.mindMap.on("outer_frame_delete",this.hide),this.mindMap.on("outer_frame_deactivate",this.hide)},beforeDestroy(){this.mindMap.off("outer_frame_active",this.onOuterFrameActive),this.mindMap.off("outer_frame_delete",this.hide),this.mindMap.off("outer_frame_deactivate",this.hide)},methods:{...Object(l["b"])(["setActiveSidebar"]),onOuterFrameActive(t,e,i){const s=e.children[i[0]],o=s.getData("outerFrame");Object.keys(this.styleConfig).forEach(t=>{"undefined"!==typeof o[t]?this.styleConfig[t]=o[t]:this.styleConfig[t]=r["a"].defaultStyle[t]});const[n,a]=this.styleConfig.textFillPadding;this.paddingStyle.paddingX=n,this.paddingStyle.paddingY=a,this.setActiveSidebar("nodeOuterFrameStyle")},updateOuterFrame(t,e){this.styleConfig[t]=e,this.mindMap.outerFrame.updateActiveOuterFrame({[t]:e})},toggleFontWeight(){const t="bold"===this.styleConfig.fontWeight?"normal":"bold";this.updateOuterFrame("fontWeight",t)},toggleFontStyle(){const t="italic"===this.styleConfig.fontStyle?"normal":"italic";this.updateOuterFrame("fontStyle",t)},updatePadding(t,e){const[i,s]=this.styleConfig.textFillPadding;"x"===t?this.updateOuterFrame("textFillPadding",[e,s,e,s]):"y"===t&&this.updateOuterFrame("textFillPadding",[i,e,i,e])},deleteOuterFrame(){this.mindMap.outerFrame.removeActiveOuterFrame()},deleteOuterFrameText(){this.mindMap.outerFrame.removeActiveOuterFrameText()},hide(){"nodeOuterFrameStyle"===this.activeSidebar&&this.setActiveSidebar(null)}}},h=d,p=(i("0494"),i("d4f4"),i("2877")),u=Object(p["a"])(h,s,o,!1,null,"16c9a89f",null);e["a"]=u.exports},1819:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{staticClass:"nodeImportDialog",attrs:{title:t.$t("import.title"),visible:t.dialogVisible,width:"350px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-upload",{ref:"upload",attrs:{action:"x",accept:t.supportFileStr,"file-list":t.fileList,"auto-upload":!1,multiple:!1,"on-change":t.onChange,"on-remove":t.onRemove,limit:1,"on-exceed":t.onExceed}},[e("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v(t._s(t.$t("import.selectFile")))]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" "+t._s(t.$t("import.support"))+t._s(t.supportFileStr)+t._s(t.$t("import.file"))+" ")])],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancel}},[t._v(t._s(t.$t("dialog.cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v(t._s(t.$t("dialog.confirm")))])],1)],1),e("el-dialog",{staticClass:"xmindCanvasSelectDialog",attrs:{title:t.$t("import.xmindCanvasSelectDialogTitle"),visible:t.xmindCanvasSelectDialogVisible,width:"300px","show-close":!1},on:{"update:visible":function(e){t.xmindCanvasSelectDialogVisible=e}}},[e("el-radio-group",{staticClass:"canvasList",model:{value:t.selectCanvas,callback:function(e){t.selectCanvas=e},expression:"selectCanvas"}},t._l(t.canvasList,(function(i,s){return e("el-radio",{key:s,attrs:{label:s}},[t._v(t._s(i.title))])})),1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.confirmSelect}},[t._v(t._s(t.$t("dialog.confirm")))])],1)],1)],1)},o=[],n=(i("d9e2"),i("14d9"),i("1e30")),a=i("0de5"),l=i("2f62"),c={data(){return{dialogVisible:!1,fileList:[],selectPromiseResolve:null,xmindCanvasSelectDialogVisible:!1,selectCanvas:"",canvasList:[],mdStr:""}},computed:{supportFileStr(){return".smm,.json,.xmind,.md"}},watch:{dialogVisible(t,e){!t&&e&&(this.fileList=[])}},created(){this.$bus.$on("showImport",this.handleShowImport),this.$bus.$on("handle_file_url",this.handleFileURL),this.$bus.$on("importFile",this.handleImportFile)},beforeDestroy(){this.$bus.$off("showImport",this.handleShowImport),this.$bus.$off("handle_file_url",this.handleFileURL),this.$bus.$off("importFile",this.handleImportFile)},methods:{...Object(l["b"])(["setActiveSidebar"]),handleShowImport(){this.dialogVisible=!0},getRegexp(){return new RegExp(".(smm|json|xmind|md)$")},async handleFileURL(){try{const t=this.$route.query.fileURL;if(!t)return;const e=this.getRegexp().exec(t);if(!e)return;const i=e[1],s=await fetch(t),o=await s.blob(),n={raw:o};"smm"===i||"json"===i?this.handleSmm(n):"xmind"===i?this.handleXmind(n):"md"===i&&this.handleMd(n)}catch(t){console.log(t)}},onChange(t){this.getRegexp().test(t.name)?this.fileList.push(t):(this.$message.error(this.$t("import.pleaseSelect")+this.supportFileStr+this.$t("import.file")),this.fileList=[])},onRemove(t,e){this.fileList=e},onExceed(){this.$message.error(this.$t("import.maxFileNum"))},cancel(){this.dialogVisible=!1},confirm(){if(this.fileList.length<=0)return this.$message.error(this.$t("import.notSelectTip"));this.$store.commit("setIsHandleLocalFile",!1);let t=this.fileList[0];/\.(smm|json)$/.test(t.name)?this.handleSmm(t):/\.xmind$/.test(t.name)?this.handleXmind(t):/\.md$/.test(t.name)&&this.handleMd(t),this.cancel(),this.setActiveSidebar(null)},handleSmm(t){let e=new FileReader;e.readAsText(t.raw),e.onload=t=>{try{let e=JSON.parse(t.target.result);if("object"!==typeof e)throw new Error(this.$t("import.fileContentError"));this.$bus.$emit("setData",e),this.$message.success(this.$t("import.importSuccess"))}catch(e){console.log(e),this.$message.error(this.$t("import.fileParsingFailed"))}}},async handleXmind(t){try{let e=await n["a"].parseXmindFile(t.raw,t=>(this.showSelectXmindCanvasDialog(t),new Promise(t=>{this.selectPromiseResolve=t})));this.$bus.$emit("setData",e),this.$message.success(this.$t("import.importSuccess"))}catch(e){console.log(e),this.$message.error(this.$t("import.fileParsingFailed"))}},showSelectXmindCanvasDialog(t){this.canvasList=t,this.selectCanvas=0,this.xmindCanvasSelectDialogVisible=!0},confirmSelect(){this.selectPromiseResolve(this.canvasList[this.selectCanvas]),this.xmindCanvasSelectDialogVisible=!1,this.canvasList=[],this.selectCanvas=0},async handleMd(t){let e=new FileReader;e.readAsText(t.raw),e.onload=async t=>{try{let e=a["a"].transformMarkdownTo(t.target.result);this.$bus.$emit("setData",e),this.$message.success(this.$t("import.importSuccess"))}catch(e){console.log(e),this.$message.error(this.$t("import.fileParsingFailed"))}}},handleImportFile(t){this.onChange({raw:t,name:t.name}),this.fileList.length<=0||this.confirm()}}},r=c,d=(i("0dda"),i("2877")),h=Object(d["a"])(r,s,o,!1,null,"360c9419",null);e["a"]=h.exports},"19a0":function(t,e,i){"use strict";i("a690")},"1b25":function(t,e,i){},"1bf1":function(t,e,i){},"290c":function(t,e,i){},"2dad":function(t,e,i){},"36e4":function(t,e,i){"use strict";i("290c")},3771:function(t,e,i){},"3c96":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.showImgPlacementToolbar,expression:"showImgPlacementToolbar"}],ref:"nodeImgPlacementToolbar",staticClass:"nodeImgPlacementToolbar",style:t.style,on:{"&click":function(t){t.stopPropagation()}}},t._l(t.imgPlacementList,(function(i){return e("div",{key:i,staticClass:"imgPlacementItem iconfont iconcontentleft",class:[{selected:t.imgPlacement===i},"icon_"+i],on:{click:function(e){return t.updateImgPlacement(i)}}})})),0)},o=[],n={props:{mindMap:{type:Object}},data(){return{showImgPlacementToolbar:!1,style:{left:0,top:0},imgPlacementList:["top","bottom","left","right"],node:null,imgNode:null,imgPlacement:""}},created(){this.mindMap.on("node_img_click",this.show),this.mindMap.on("draw_click",this.close),this.mindMap.on("svg_mousedown",this.close),this.mindMap.on("node_dblclick",this.close),this.mindMap.on("node_active",this.onNodeActive),this.mindMap.on("scale",this.onScale),this.mindMap.on("node_img_adjust_btn_mousedown",this.close),this.mindMap.on("delete_node_img_from_delete_btn",this.close),this.mindMap.on("translate",this.close)},mounted(){document.body.append(this.$refs.nodeImgPlacementToolbar)},beforeDestroy(){this.mindMap.off("node_img_click",this.show),this.mindMap.off("draw_click",this.close),this.mindMap.off("svg_mousedown",this.close),this.mindMap.off("node_dblclick",this.close),this.mindMap.off("node_active",this.onNodeActive),this.mindMap.off("scale",this.onScale),this.mindMap.off("node_img_adjust_btn_mousedown",this.close),this.mindMap.off("delete_node_img_from_delete_btn",this.close),this.mindMap.off("translate",this.close)},methods:{show(t,e){this.node=t,this.imgPlacement=t.getStyle("imgPlacement"),this.imgNode=e,this.showImgPlacementToolbar=!0,this.$nextTick(()=>{this.updatePos()})},close(){this.showImgPlacementToolbar=!1,this.node=null,this.imgPlacement="",this.imgNode=null,this.style.left=0,this.style.top=0},updatePos(){if(!this.imgNode)return;const{width:t,height:e}=this.$refs.nodeImgPlacementToolbar.getBoundingClientRect(),{width:i,x:s,y:o}=this.imgNode.rbox();this.style.left=s+i/2-t/2+"px",this.style.top=o-e-5+"px"},onScale(){this.updatePos()},onNodeActive(t){t!==this.node&&this.close()},updateImgPlacement(t){this.imgPlacement=t,this.node.setStyle("imgPlacement",t),this.close()}}},a=n,l=(i("52f2"),i("2877")),c=Object(l["a"])(a,s,o,!1,null,"050c6a22",null);e["a"]=c.exports},"4d6f":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"nodeNoteDialog",attrs:{title:t.$t("nodeNote.title"),visible:t.dialogVisible,width:t.isMobile?"90%":"50%",top:t.isMobile?"20px":"15vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{ref:"noteEditor",staticClass:"noteEditor",on:{keyup:function(t){t.stopPropagation()},keydown:function(t){t.stopPropagation()}}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancel}},[t._v(t._s(t.$t("dialog.cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v(t._s(t.$t("dialog.confirm")))])],1)])},o=[],n=(i("0643"),i("4e3e"),i("5865")),a=(i("f513"),i("d17d")),l={name:"NodeNote",data(){return{dialogVisible:!1,note:"",activeNodes:[],editor:null,isMobile:Object(a["X"])(),appointNode:null}},watch:{dialogVisible(t,e){!t&&e&&this.$bus.$emit("endTextEdit")}},created(){this.$bus.$on("node_active",this.handleNodeActive),this.$bus.$on("showNodeNote",this.handleShowNodeNote)},beforeDestroy(){this.$bus.$off("node_active",this.handleNodeActive),this.$bus.$off("showNodeNote",this.handleShowNodeNote)},methods:{handleNodeActive(...t){this.activeNodes=[...t[1]],this.updateNoteInfo()},updateNoteInfo(){if(this.activeNodes.length>0){let t=this.activeNodes[0];this.note=t.getData("note")||""}else this.note=""},handleShowNodeNote(t){this.$bus.$emit("startTextEdit"),t&&(this.appointNode=t,this.note=t.getData("note")||""),this.dialogVisible=!0,this.$nextTick(()=>{this.initEditor()})},initEditor(){this.editor||(this.editor=new n["a"]({el:this.$refs.noteEditor,height:"500px",initialEditType:"markdown",previewStyle:"vertical"})),this.editor.setMarkdown(this.note)},cancel(){this.dialogVisible=!1,this.appointNode&&(this.appointNode=null,this.updateNoteInfo())},confirm(){this.note=this.editor.getMarkdown(),this.appointNode?this.appointNode.setNote(this.note):this.activeNodes.forEach(t=>{t.setNote(this.note)}),this.cancel()}}},c=l,r=(i("bf95"),i("2877")),d=Object(r["a"])(c,s,o,!1,null,"12b2f5f0",null);e["a"]=d.exports},5012:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.showNodeIconToolbar,expression:"showNodeIconToolbar"}],ref:"nodeIconToolbar",staticClass:"nodeIconToolbar",style:t.style,on:{"&click":function(t){t.stopPropagation()}}},[e("div",{staticClass:"iconListBox"},t._l(t.iconList,(function(i){return e("div",{key:i.name,staticClass:"icon",class:{selected:t.nodeIconList.includes(t.iconType+"_"+i.name)},domProps:{innerHTML:t._s(t.getHtml(i.icon))},on:{click:function(e){return t.setIcon(i.name)}}})})),0),e("div",{staticClass:"btnBox"},[e("span",{staticClass:"btn iconfont iconshanchu",on:{click:t.deleteIcon}})])])},o=[],n=(i("14d9"),i("9b1e")),a=i("d1f7"),l=i("2f62");const c=[...n["b"],...a["a"]];var r={props:{mindMap:{type:Object}},data(){return{showNodeIconToolbar:!1,style:{left:0,top:0},node:null,iconType:"",iconName:"",nodeIconList:[],iconList:[]}},computed:{...Object(l["c"])(["activeSidebar"])},created(){this.mindMap.on("node_icon_click",this.show),this.mindMap.on("draw_click",this.close),this.mindMap.on("svg_mousedown",this.close),this.mindMap.on("node_dblclick",this.close),this.mindMap.on("node_active",this.onNodeActive),this.mindMap.on("scale",this.onScale),this.$bus.$on("close_node_icon_toolbar",this.close)},mounted(){document.body.append(this.$refs.nodeIconToolbar)},beforeDestroy(){this.mindMap.off("node_icon_click",this.show),this.mindMap.off("draw_click",this.close),this.mindMap.off("svg_mousedown",this.close),this.mindMap.off("node_dblclick",this.close),this.mindMap.off("node_active",this.onNodeActive),this.mindMap.off("scale",this.onScale),this.$bus.$off("close_node_icon_toolbar",this.close)},methods:{...Object(l["b"])(["setActiveSidebar"]),show(t,e){this.node=t,this.iconType=e.split("_")[0],this.iconName=e.split("_")[1],this.nodeIconList=t.getData("icon")||[],this.iconList=[...c.find(t=>t.type===this.iconType).list],this.updatePos(),this.showNodeIconToolbar=!0,"nodeIconSidebar"===this.activeSidebar&&this.setActiveSidebar(null)},close(){this.showNodeIconToolbar=!1,this.node=null,this.iconType="",this.iconName="",this.nodeIconList=[],this.iconList=[],this.style.left=0,this.style.top=0},updatePos(){if(!this.node)return;const t=this.node.getRect();this.style.left=t.x+"px",this.style.top=t.y+t.height+"px"},onScale(){this.updatePos()},onNodeActive(t){t!==this.node&&this.close()},deleteIcon(){this.setIcon(this.iconName),this.close()},getHtml(t){return/^<svg/.test(t)?t:`<img src="${t}" />`},setIcon(t){let e=this.iconType+"_"+t,i=this.nodeIconList.findIndex(t=>t===e);if(-1!==i)this.nodeIconList.splice(i,1);else{let i=this.nodeIconList.findIndex(t=>t.split("_")[0]===this.iconType);-1!==i?(this.nodeIconList.splice(i,1,e),this.iconName=t):this.nodeIconList.push(e)}this.node.setIcon([...this.nodeIconList])}}},d=r,h=(i("d593"),i("2877")),p=Object(h["a"])(d,s,o,!1,null,"54dc3806",null);e["a"]=p.exports},"52f2":function(t,e,i){"use strict";i("542e")},"542e":function(t,e,i){},"5c9e":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"nodeIconDialog",attrs:{title:t.$t("nodeIcon.title"),visible:t.dialogVisible,width:"500"},on:{"update:visible":function(e){t.dialogVisible=e}}},t._l(t.nodeIconList,(function(i){return e("div",{key:i.name,staticClass:"item"},[e("div",{staticClass:"title"},[t._v(t._s(i.name))]),e("div",{staticClass:"list"},t._l(i.list,(function(s){return e("div",{key:s.name,staticClass:"icon",class:{selected:t.iconList.includes(i.type+"_"+s.name)},domProps:{innerHTML:t._s(t.getHtml(s.icon))},on:{click:function(e){return t.setIcon(i.type,s.name)}}})})),0)])})),0)},o=[],n=(i("14d9"),i("0643"),i("4e3e"),i("9b1e")),a=i("d1f7"),l={data(){return{nodeIconList:[...n["b"],...a["a"]],dialogVisible:!1,iconList:[],activeNodes:[]}},created(){this.$bus.$on("node_active",this.handleNodeActive),this.$bus.$on("showNodeIcon",this.handleShowNodeIcon)},beforeDestroy(){this.$bus.$off("node_active",this.handleNodeActive),this.$bus.$off("showNodeIcon",this.handleShowNodeIcon)},methods:{handleNodeActive(...t){if(this.activeNodes=[...t[1]],this.activeNodes.length>0){let t=this.activeNodes[0];this.iconList=t.getData("icon")||[]}else this.iconList=[]},handleShowNodeIcon(){this.dialogVisible=!0},getHtml(t){return/^<svg/.test(t)?t:`<img src="${t}" />`},setIcon(t,e){let i=t+"_"+e,s=this.iconList.findIndex(t=>t===i);if(-1!==s)this.iconList.splice(s,1);else{let e=this.iconList.findIndex(e=>e.split("_")[0]===t);-1!==e?this.iconList.splice(e,1,i):this.iconList.push(i)}this.activeNodes.forEach(t=>{t.setIcon([...this.iconList])})}}},c=l,r=(i("c9c0"),i("2877")),d=Object(r["a"])(c,s,o,!1,null,"ee255564",null);e["a"]=d.exports},"633b":function(t,e,i){},"79b3":function(t,e,i){"use strict";i("0c47")},"7a25":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("Sidebar",{ref:"sidebar",attrs:{title:t.$t("note.title")}},[e("div",{ref:"noteContentWrap",staticClass:"noteContentWrap"})])},o=[],n=i("62a5"),a=i("2f62"),l=i("f059"),c=i.n(l),r=(i("fe5f"),{components:{Sidebar:n["a"]},props:{mindMap:{type:Object}},data(){return{editor:null,node:null}},computed:{...Object(a["c"])({isDark:t=>t.localConfig.isDark,activeSidebar:t=>t.activeSidebar})},watch:{activeSidebar(t){this.$refs.sidebar.show="noteSidebar"===t}},created(){this.$bus.$on("node_active",this.onNodeActive),this.mindMap.on("node_note_click",this.onNodeNoteClick)},mounted(){this.initEditor()},beforeDestroy(){this.$bus.$off("node_active",this.onNodeActive),this.mindMap.off("node_note_click",this.onNodeNoteClick)},methods:{...Object(a["b"])(["setActiveSidebar"]),onNodeActive(...t){if("noteSidebar"!==this.activeSidebar)return;const e=[...t[1]];e.length>0?e[0]!==this.node&&this.setActiveSidebar(null):this.setActiveSidebar(null)},initEditor(){this.editor||(this.editor=new c.a({el:this.$refs.noteContentWrap}))},onNodeNoteClick(t){this.node=t,this.setActiveSidebar("noteSidebar"),this.editor.setMarkdown(t.getData("note"))}}}),d=r,h=(i("da0d"),i("2877")),p=Object(h["a"])(d,s,o,!1,null,"70764560",null);e["a"]=p.exports},"7cbe":function(t,e,i){"use strict";i("ccac")},"7f37":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],ref:"elRef",staticClass:"nodeTagStyleContainer",class:{isDark:t.isDark},style:t.position},[e("div",{staticClass:"row"},[e("el-input",{attrs:{placeholder:t.$t("nodeTagStyle.placeholder"),size:"mini"},on:{blur:t.updateTagText},nativeOn:{keydown:function(t){t.stopPropagation()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),t.updateTagText.apply(null,arguments))}},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),e("div",{staticClass:"deleteBtn",on:{click:function(e){return e.stopPropagation(),t.deleteTag.apply(null,arguments)}}},[e("span",{staticClass:"iconfont iconshanchu"}),e("span",{staticClass:"text"},[t._v(t._s(t.$t("nodeTagStyle.delete")))])])],1),e("div",{staticClass:"row"},[e("Color",{attrs:{color:t.fill},on:{change:t.updateTagFill}})],1)])},o=[],n=(i("0643"),i("4e3e"),i("aadb")),a=i("2f62"),l={components:{Color:n["a"]},props:{mindMap:{type:Object}},data(){return{show:!1,position:{left:0,top:0},node:null,index:0,text:"",fill:""}},computed:{...Object(a["c"])({isDark:t=>t.localConfig.isDark})},created(){this.mindMap.on("node_tag_click",this.onNodeTagClick),this.mindMap.on("scale",this.hide),this.mindMap.on("translate",this.hide),this.mindMap.on("svg_mousedown",this.hide),this.mindMap.on("expand_btn_click",this.hide)},beforeDestroy(){this.mindMap.off("node_tag_click",this.onNodeTagClick),this.mindMap.off("scale",this.hide),this.mindMap.off("translate",this.hide),this.mindMap.off("svg_mousedown",this.hide),this.mindMap.off("expand_btn_click",this.hide)},mounted(){document.body.appendChild(this.$refs.elRef)},methods:{onNodeTagClick(t,e,i,s){this.node=t,this.index=i,"string"===typeof e?this.text=e:(this.text=e.text,this.fill=e.style&&e.style.fill?e.style.fill:"");const{x:o,y:n,width:a,height:l}=s.rbox(),c=260,r=152;let d=o+a/2-c/2;d<0&&(d=0),d+c>window.innerWidth&&(d=window.innerWidth-c),this.position.left=d+"px";let h=n+l+5;h+r>window.innerHeight&&(h=window.innerHeight-r),this.position.top=h+"px",this.show=!0},updateTagText(){const t=this.text.trim();t&&this.updateTagInfo({text:t})},updateTagFill(t){this.updateTagInfo({style:{fill:t}}),this.fill=t},updateTagInfo({text:t,style:e}){if(!this.node)return;const i=[...this.node.getData("tag")];let s=null;"string"===typeof i[this.index]?s={text:i[this.index],style:{}}:(s=i[this.index],s.style||(s.style={})),t&&(s.text=t),e&&Object.keys(e).forEach(t=>{s.style[t]=e[t]}),i[this.index]=s,this.mindMap.execCommand("SET_NODE_TAG",this.node,i)},deleteTag(){if(!this.node)return;const t=[...this.node.getData("tag")];t.splice(this.index,1),this.mindMap.execCommand("SET_NODE_TAG",this.node,t),this.hide()},hide(){this.show=!1,this.node=null,this.index=0,this.text="",this.fill=""}}},c=l,r=(i("7cbe"),i("2877")),d=Object(r["a"])(c,s,o,!1,null,"403f420a",null);e["a"]=d.exports},"82d2":function(t,e,i){},8809:function(t,e,i){"use strict";i("1bf1")},"8c3c":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return t.showMiniMap?e("div",{ref:"navigatorBox",staticClass:"navigatorBox",class:{isDark:t.isDark},style:{width:t.width+"px"},on:{mousedown:t.onMousedown,mousemove:t.onMousemove}},[e("div",{ref:"svgBox",staticClass:"svgBox",style:{transform:`scale(${t.svgBoxScale})`,left:t.svgBoxLeft+"px",top:t.svgBoxTop+"px"}},[e("img",{attrs:{src:t.mindMapImg},on:{mousedown:function(t){t.preventDefault()}}})]),e("div",{staticClass:"windowBox",class:{withTransition:t.withTransition},style:t.viewBoxStyle,on:{mousedown:function(e){return e.stopPropagation(),t.onViewBoxMousedown.apply(null,arguments)},mousemove:t.onViewBoxMousemove}})]):t._e()},o=[],n=i("2f62"),a={props:{mindMap:{type:Object}},data(){return{showMiniMap:!1,timer:null,boxWidth:0,boxHeight:0,svgBoxScale:1,svgBoxLeft:0,svgBoxTop:0,viewBoxStyle:{left:0,top:0,bottom:0,right:0},mindMapImg:"",width:0,setSizeTimer:null,withTransition:!0}},computed:{...Object(n["c"])({isDark:t=>t.localConfig.isDark})},mounted(){this.setSize(),window.addEventListener("resize",this.setSize),this.$bus.$on("toggle_mini_map",this.toggle_mini_map),this.$bus.$on("data_change",this.data_change),this.$bus.$on("view_data_change",this.data_change),this.$bus.$on("node_tree_render_end",this.data_change),window.addEventListener("mouseup",this.onMouseup),this.mindMap.on("mini_map_view_box_position_change",this.onViewBoxPositionChange)},destroyed(){window.removeEventListener("resize",this.setSize),this.$bus.$off("toggle_mini_map",this.toggle_mini_map),this.$bus.$off("data_change",this.data_change),this.$bus.$off("view_data_change",this.data_change),this.$bus.$off("node_tree_render_end",this.data_change),window.removeEventListener("mouseup",this.onMouseup),this.mindMap.off("mini_map_view_box_position_change",this.onViewBoxPositionChange)},methods:{toggle_mini_map(t){this.showMiniMap=t,this.$nextTick(()=>{this.$refs.navigatorBox&&this.init(),this.$refs.svgBox&&this.drawMiniMap()})},data_change(){this.showMiniMap&&(clearTimeout(this.timer),this.timer=setTimeout(()=>{this.drawMiniMap()},500))},setSize(){clearTimeout(this.setSizeTimer),this.setSizeTimer=setTimeout(()=>{this.width=Math.min(window.innerWidth-80,370),this.$nextTick(()=>{this.showMiniMap&&(this.init(),this.drawMiniMap())})},300)},init(){let{width:t,height:e}=this.$refs.navigatorBox.getBoundingClientRect();this.boxWidth=t,this.boxHeight=e},drawMiniMap(){let{getImgUrl:t,viewBoxStyle:e,miniMapBoxScale:i,miniMapBoxLeft:s,miniMapBoxTop:o}=this.mindMap.miniMap.calculationMiniMap(this.boxWidth,this.boxHeight);t(t=>{this.mindMapImg=t}),this.viewBoxStyle=e,this.svgBoxScale=i,this.svgBoxLeft=s,this.svgBoxTop=o},onMousedown(t){this.mindMap.miniMap.onMousedown(t)},onMousemove(t){this.mindMap.miniMap.onMousemove(t)},onMouseup(t){this.withTransition||(this.withTransition=!0),this.mindMap.miniMap&&this.mindMap.miniMap.onMouseup(t)},onViewBoxMousedown(t){this.mindMap.miniMap.onViewBoxMousedown(t)},onViewBoxMousemove(t){this.mindMap.miniMap.onViewBoxMousemove(t)},onViewBoxPositionChange({left:t,right:e,top:i,bottom:s}){this.withTransition=!1,this.viewBoxStyle.left=t,this.viewBoxStyle.right=e,this.viewBoxStyle.top=i,this.viewBoxStyle.bottom=s}}},l=a,c=(i("f928"),i("2877")),r=Object(c["a"])(l,s,o,!1,null,"c2af69c6",null);e["a"]=r.exports},"8cb6":function(t,e,i){"use strict";i("2dad")},"8edea":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{ref:"noteContentViewer",staticClass:"noteContentViewer customScrollbar",style:{left:this.left+"px",top:this.top+"px",visibility:t.show?"visible":"hidden"},on:{click:function(t){t.stopPropagation()},mousedown:function(t){t.stopPropagation()},mousemove:function(t){t.stopPropagation()},mouseup:function(t){t.stopPropagation()},wheel:function(t){t.stopPropagation()}}},[e("div",{ref:"noteContentWrap",staticClass:"noteContentWrap customScrollbar"})])},o=[],n=(i("0643"),i("4e3e"),i("f059")),a=i.n(n),l=(i("fe5f"),{props:{mindMap:{type:Object,default(){return null}}},data(){return{editor:null,show:!1,left:0,top:0,node:null}},created(){this.$bus.$on("showNoteContent",this.onShowNoteContent),this.$bus.$on("hideNoteContent",this.hideNoteContent),document.body.addEventListener("click",this.hideNoteContent),this.$bus.$on("node_active",this.onNodeActive),this.$bus.$on("scale",this.onScale),this.$bus.$on("translate",this.onScale),this.$bus.$on("svg_mousedown",this.hideNoteContent),this.$bus.$on("expand_btn_click",this.hideNoteContent)},mounted(){this.mindMap.el.appendChild(this.$refs.noteContentViewer),this.initEditor()},beforeDestroy(){this.$bus.$off("showNoteContent",this.onShowNoteContent),this.$bus.$off("hideNoteContent",this.hideNoteContent),document.body.removeEventListener("click",this.hideNoteContent),this.$bus.$off("node_active",this.onNodeActive),this.$bus.$off("scale",this.onScale),this.$bus.$off("translate",this.onScale),this.$bus.$off("svg_mousedown",this.hideNoteContent),this.$bus.$off("expand_btn_click",this.hideNoteContent)},methods:{onNodeActive(...t){const e=[...t[1]];e.length>0?e[0]!==this.node&&this.hideNoteContent():this.hideNoteContent()},onShowNoteContent(t,e,i,s){this.node=s,this.editor.setMarkdown(t),this.handleALink(),this.updateNoteContentPosition(e,i),this.show=!0},handleALink(){const t=this.$refs.noteContentViewer.querySelectorAll("a");Array.from(t).forEach(t=>{t.setAttribute("target","_blank")})},updateNoteContentPosition(t,e){const{width:i,height:s}=this.$refs.noteContentViewer.getBoundingClientRect(),{right:o,bottom:n}=this.mindMap.elRect;this.left=t+i>o?o-i:t,this.top=e+s>n?n-s:e},onScale(){if(!this.node||!this.show)return;const{left:t,top:e}=this.node.getNoteContentPosition();this.updateNoteContentPosition(t,e)},hideNoteContent(){this.show=!1},initEditor(){this.editor||(this.editor=new a.a({el:this.$refs.noteContentWrap}))}}}),c=l,r=(i("79b3"),i("2877")),d=Object(r["a"])(c,s,o,!1,null,"19c1538a",null);e["a"]=d.exports},"95e4":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"nodeImageDialog",attrs:{title:t.$t("nodeImage.title"),visible:t.dialogVisible,width:t.isMobile?"90%":"600px",top:t.isMobile?"20px":"15vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"title"},[t._v("Method 1")]),e("ImgUpload",{ref:"ImgUpload",staticStyle:{"margin-bottom":"12px"},model:{value:t.img,callback:function(e){t.img=e},expression:"img"}}),e("div",{staticClass:"title"},[t._v("Method 2")]),e("div",{staticClass:"inputBox"},[e("span",{staticClass:"label"},[t._v("Please enter image URL")]),e("el-input",{attrs:{size:"mini",placeholder:"http://xxx.com/xx.jpg"},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:t.imgUrl,callback:function(e){t.imgUrl=e},expression:"imgUrl"}})],1),e("div",{staticClass:"title"},[t._v("Optional")]),e("div",{staticClass:"inputBox"},[e("span",{staticClass:"label"},[t._v(t._s(t.$t("nodeImage.imgTitle")))]),e("el-input",{attrs:{size:"mini"},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:t.imgTitle,callback:function(e){t.imgTitle=e},expression:"imgTitle"}})],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancel}},[t._v(t._s(t.$t("dialog.cancel")))]),e("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v(t._s(t.$t("dialog.confirm")))])],1)],1)},o=[],n=(i("0643"),i("4e3e"),i("5aa9")),a=i("d17d"),l={components:{ImgUpload:n["a"]},data(){return{dialogVisible:!1,img:"",imgUrl:"",imgTitle:"",activeNodes:null,isMobile:Object(a["X"])()}},created(){this.$bus.$on("node_active",this.handleNodeActive),this.$bus.$on("showNodeImage",this.handleShowNodeImage)},beforeDestroy(){this.$bus.$off("node_active",this.handleNodeActive),this.$bus.$off("showNodeImage",this.handleShowNodeImage)},methods:{handleNodeActive(...t){this.activeNodes=[...t[1]]},handleShowNodeImage(){if(this.reset(),this.activeNodes.length>0){let t=this.activeNodes[0],e=t.getImageUrl()||"";e&&(/^https?:\/\//.test(e)?this.imgUrl=e:this.img=e),this.imgTitle=t.getData("imageTitle")||""}this.dialogVisible=!0},cancel(){this.dialogVisible=!1,this.reset()},reset(){this.img="",this.imgTitle="",this.imgUrl=""},async confirm(){try{if(!this.img&&!this.imgUrl)return this.cancel(),void this.activeNodes.forEach(t=>{t.setImage(null)});let t=null,e="";this.img?(e=this.img,t=await this.$refs.ImgUpload.getSize()):this.imgUrl&&(e=this.imgUrl,t=await Object(a["F"])(e)),this.activeNodes.forEach(i=>{i.setImage({url:e||"none",title:this.imgTitle,width:t.width||100,height:t.height||100})}),this.cancel()}catch(t){console.log(t)}}}},c=l,r=(i("8809"),i("2877")),d=Object(r["a"])(c,s,o,!1,null,"41a15c4b",null);e["a"]=d.exports},a690:function(t,e,i){},b963:function(t,e,i){},bbc8:function(t,e,i){},bf95:function(t,e,i){"use strict";i("633b")},c463:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("viewer",{attrs:{images:t.images}},t._l(t.images,(function(t){return e("img",{key:t,attrs:{src:t}})})),0)},o=[],n={props:{mindMap:{type:Object,default(){return null}}},data(){return{images:[]}},mounted(){this.mindMap.on("node_img_dblclick",this.onNodeTmgDblclick)},beforeDestroy(){this.mindMap.off("node_img_dblclick",this.onNodeTmgDblclick)},methods:{onNodeTmgDblclick(t,e){e.stopPropagation(),e.preventDefault(),this.images=[t.getImageUrl()],this.$viewerApi({images:this.images})}}},a=n,l=i("2877"),c=Object(l["a"])(a,s,o,!1,null,null,null);e["a"]=c.exports},c9c0:function(t,e,i){"use strict";i("1b25")},ccac:function(t,e,i){},d4f4:function(t,e,i){"use strict";i("db60")},d593:function(t,e,i){"use strict";i("b963")},d5b5:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"navigatorContainer customScrollbar",class:{isDark:t.isDark}},[e("div",{staticClass:"item"},[e("el-select",{staticStyle:{width:"100px"},attrs:{size:"small"},on:{change:t.onLangChange},model:{value:t.lang,callback:function(e){t.lang=e},expression:"lang"}},t._l(t.langList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})})),1)],1),e("div",{staticClass:"item"},[e("el-tooltip",{attrs:{effect:"dark",content:t.$t("navigatorToolbar.backToRoot"),placement:"top"}},[e("div",{staticClass:"btn iconfont icondingwei",on:{click:t.backToRoot}})])],1),e("div",{staticClass:"item"},[e("div",{staticClass:"btn iconfont iconsousuo",on:{click:t.showSearch}})]),e("div",{staticClass:"item"},[e("MouseAction",{attrs:{isDark:t.isDark,mindMap:t.mindMap}})],1),e("div",{staticClass:"item"},[e("el-tooltip",{attrs:{effect:"dark",content:t.openMiniMap?t.$t("navigatorToolbar.closeMiniMap"):t.$t("navigatorToolbar.openMiniMap"),placement:"top"}},[e("div",{staticClass:"btn iconfont icondaohang1",on:{click:t.toggleMiniMap}})])],1),e("div",{staticClass:"item"},[e("el-tooltip",{attrs:{effect:"dark",content:t.isReadonly?t.$t("navigatorToolbar.edit"):t.$t("navigatorToolbar.readonly"),placement:"top"}},[e("div",{staticClass:"btn iconfont",class:[t.isReadonly?"iconyanjing":"iconbianji1"],on:{click:t.readonlyChange}})])],1),e("div",{staticClass:"item"},[e("Fullscreen",{attrs:{isDark:t.isDark,mindMap:t.mindMap}})],1),e("div",{staticClass:"item"},[e("Scale",{attrs:{isDark:t.isDark,mindMap:t.mindMap}})],1),e("div",{staticClass:"item"},[e("div",{staticClass:"btn iconfont",class:[t.isDark?"iconmoon_line":"iconlieri"],on:{click:t.toggleDark}})]),e("div",{staticClass:"item"},[e("Demonstrate",{attrs:{isDark:t.isDark,mindMap:t.mindMap}})],1),e("div",{staticClass:"item"},[e("el-dropdown",{on:{command:t.handleCommand}},[e("div",{staticClass:"btn el-icon-more"}),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"shortcutKey"}},[e("span",{staticClass:"iconfont iconjianpan"}),t._v(" "+t._s(t.$t("navigatorToolbar.shortcutKeys"))+" ")]),e("el-dropdown-item",{attrs:{command:"aiChat"}},[e("span",{staticClass:"iconfont iconAIshengcheng"}),t._v(" "+t._s(t.$t("navigatorToolbar.ai"))+" ")]),e("el-dropdown-item",{attrs:{command:"client"}},[e("span",{staticClass:"iconfont iconxiazai"}),t._v(" "+t._s(t.$t("navigatorToolbar.downloadClient"))+" ")]),e("el-dropdown-item",{attrs:{command:"github"}},[e("span",{staticClass:"iconfont icongithub"}),t._v(" Github ")]),e("el-dropdown-item",{attrs:{command:"site"}},[e("span",{staticClass:"iconfont iconwangzhan"}),t._v(" "+t._s(t.$t("navigatorToolbar.site"))+" ")]),e("el-dropdown-item",{attrs:{disabled:""}},[t._v(t._s(t.$t("navigatorToolbar.current"))+"v"+t._s(t.version))])],1)],1)],1)])},o=[],n=i("6d7b"),a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"fullscreenContainer",class:{isDark:t.isDark}},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("fullscreen.fullscreenShow"),placement:"top"}},[e("div",{staticClass:"btn iconfont iconquanping",on:{click:t.toFullscreenShow}})]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("fullscreen.fullscreenEdit"),placement:"top"}},[e("div",{staticClass:"btn iconfont iconquanping1",on:{click:t.toFullscreenEdit}})])],1)},l=[],c=i("ed08"),r={props:{mindMap:{type:Object},isDark:{type:Boolean}},data(){return{}},created(){document[c["c"]]=()=>{setTimeout(()=>{this.mindMap.resize()},1e3)}},methods:{toFullscreenShow(){Object(c["b"])(this.mindMap.el)},toFullscreenEdit(){Object(c["b"])(document.body)}}},d=r,h=(i("8cb6"),i("2877")),p=Object(h["a"])(d,a,l,!1,null,"f39d6434",null),u=p.exports,m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mouseActionContainer",class:{isDark:t.isDark}},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.useLeftKeySelectionRightKeyDrag?t.$t("mouseAction.tip2"):t.$t("mouseAction.tip1"),placement:"top"}},[e("div",{staticClass:"btn iconfont",class:[t.useLeftKeySelectionRightKeyDrag?"iconmouseR":"iconmouseL"],on:{click:t.toggleAction}})])],1)},f=[],g=i("2f62"),v={props:{mindMap:{type:Object},isDark:{type:Boolean}},data(){return{}},computed:{...Object(g["c"])({useLeftKeySelectionRightKeyDrag:t=>t.localConfig.useLeftKeySelectionRightKeyDrag})},methods:{...Object(g["b"])(["setLocalConfig"]),toggleAction(){let t=!this.useLeftKeySelectionRightKeyDrag;this.mindMap.updateConfig({useLeftKeySelectionRightKeyDrag:t}),this.setLocalConfig({useLeftKeySelectionRightKeyDrag:t})}}},b=v,_=(i("ea02"),Object(h["a"])(b,m,f,!1,null,"600bd935",null)),y=_.exports,C=i("f121"),w=i("9225"),$=i("365c"),k=i("7c54"),x=i("86c3"),S={components:{Scale:n["a"],Fullscreen:u,MouseAction:y,Demonstrate:x["a"]},props:{mindMap:{type:Object}},data(){return{version:k.version,langList:C["l"],lang:"",openMiniMap:!1}},computed:{...Object(g["c"])({isReadonly:t=>t.isReadonly,isDark:t=>t.localConfig.isDark})},created(){this.lang=Object($["c"])()},methods:{...Object(g["b"])(["setLocalConfig","setIsReadonly","setIsSourceCodeEdit","setActiveSidebar"]),readonlyChange(){this.setIsReadonly(!this.isReadonly),this.mindMap.setMode(this.isReadonly?"readonly":"edit")},toggleMiniMap(){this.openMiniMap=!this.openMiniMap,this.$bus.$emit("toggle_mini_map",this.openMiniMap)},onLangChange(t){w["a"].locale=t,Object($["g"])(t),this.$bus.$emit("lang_change")},showSearch(){this.$bus.$emit("show_search")},toggleDark(){this.setLocalConfig({isDark:!this.isDark})},handleCommand(t){if("shortcutKey"===t)return void this.setActiveSidebar("shortcutKey");if("aiChat"===t)return void this.setActiveSidebar("ai");if("client"===t)return void this.$bus.$emit("showDownloadTip",this.$t("navigatorToolbar.downloadClient"),this.$t("navigatorToolbar.downloadDesc"));let e="";switch(t){case"github":e="https://github.com/wanglin2/mind-map";break;case"helpDoc":e="https://wanglin2.github.io/mind-map-docs/help/help1.html";break;case"devDoc":e="https://wanglin2.github.io/mind-map-docs/start/introduction.html";break;case"site":e="https://wanglin2.github.io/mind-map-docs/";break;case"issue":e="https://github.com/wanglin2/mind-map/issues/new";break;default:break}const i=document.createElement("a");i.href=e,i.target="_blank",i.click()},backToRoot(){this.mindMap.renderer.setRootNodeCenter()},openSourceCodeEdit(){this.setIsSourceCodeEdit(!0)}}},M=S,N=(i("36e4"),Object(h["a"])(M,s,o,!1,null,"046a8496",null));e["a"]=N.exports},da0d:function(t,e,i){"use strict";i("05f0")},db49:function(t,e,i){},db60:function(t,e,i){},e411:function(t,e,i){"use strict";i("82d2")},ea02:function(t,e,i){"use strict";i("ec68")},ec68:function(t,e,i){},ee5c:function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("Sidebar",{ref:"sidebar",attrs:{title:t.$t("nodeIconSidebar.title")}},[e("div",{staticClass:"box",class:{isDark:t.isDark}},[e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:t.$t("nodeIconSidebar.icon"),name:"icon"}}),e("el-tab-pane",{attrs:{label:t.$t("nodeIconSidebar.sticker"),name:"image"}})],1),e("div",{staticClass:"boxContent"},["icon"===t.activeName?e("div",{staticClass:"iconBox"},t._l(t.nodeIconList,(function(i){return e("div",{key:i.name,staticClass:"item"},[e("div",{staticClass:"title"},[t._v(t._s(i.name))]),e("div",{staticClass:"list"},t._l(i.list,(function(s){return e("div",{key:s.name,staticClass:"icon",class:{selected:t.iconList.includes(i.type+"_"+s.name)},domProps:{innerHTML:t._s(t.getHtml(s.icon))},on:{click:function(e){return t.setIcon(i.type,s.name)}}})})),0)])})),0):t._e(),"image"===t.activeName?e("div",{staticClass:"imageBox"},t._l(t.nodeImageList,(function(i){return e("div",{key:i.name,staticClass:"item"},[e("div",{staticClass:"title"},[t._v(t._s(i.name))]),e("div",{staticClass:"list"},t._l(i.list,(function(i){return e("div",{key:i.url,staticClass:"icon",class:{selected:t.nodeImage===i.url},on:{click:function(e){return t.setImage(i)}}},[e("img",{attrs:{src:i.url,alt:""}})])})),0)])})),0):t._e()])],1)])},o=[],n=(i("14d9"),i("0643"),i("4e3e"),i("62a5")),a=i("2f62"),l=i("9b1e"),c=i("d17d"),r=i("d1f7"),d=i("de42"),h={components:{Sidebar:n["a"]},data(){return{activeName:"icon",nodeIconList:Object(c["fb"])([...l["b"],...r["a"]]),nodeImageList:[...d["a"]],iconList:[],nodeImage:"",activeNodes:[]}},computed:{...Object(a["c"])({activeSidebar:t=>t.activeSidebar,isDark:t=>t.localConfig.isDark})},watch:{activeSidebar(t){this.$refs.sidebar.show="nodeIconSidebar"===t}},created(){this.$bus.$on("node_active",this.handleNodeActive),this.$bus.$on("showNodeIcon",this.handleShowNodeIcon)},beforeDestroy(){this.$bus.$off("node_active",this.handleNodeActive),this.$bus.$off("showNodeIcon",this.handleShowNodeIcon)},methods:{handleNodeActive(...t){if(this.activeNodes=[...t[1]],this.activeNodes.length>0)if(1===this.activeNodes.length){let t=this.activeNodes[0];this.nodeImage=t.getData("image")||"",this.iconList=t.getData("icon")||[]}else this.nodeImage=[],this.iconList=[];else this.iconList=[],this.nodeImage=""},handleShowNodeIcon(){this.dialogVisible=!0},getHtml(t){return/^<svg/.test(t)?t:`<img src="${t}" />`},setIcon(t,e){this.activeNodes.forEach(i=>{const s=[...i.getData("icon")||[]];let o=t+"_"+e,n=s.findIndex(t=>t===o);if(-1!==n)s.splice(n,1);else{let e=s.findIndex(e=>e.split("_")[0]===t);-1!==e?s.splice(e,1,o):s.push(o)}i.setIcon(s),1===this.activeNodes.length&&(this.iconList=s)})},setImage(t){this.activeNodes.forEach(e=>{this.nodeImage=t.url,e.setImage({...t})})}}},p=h,u=(i("166a"),i("2877")),m=Object(u["a"])(p,s,o,!1,null,"d871bfb6",null);e["a"]=m.exports},f928:function(t,e,i){"use strict";i("12e4")}}]);