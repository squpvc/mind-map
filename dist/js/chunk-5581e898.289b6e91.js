(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5581e898"],{"048e":function(e,t,i){"use strict";var n=i("35e0"),a=i("d17d"),r=i("6ac9");class h extends n["a"]{constructor(e={},t){super(e),this.isUseLeft=t===r["a"].LAYOUT.LOGICAL_STRUCTURE_LEFT}doLayout(e){let t=[()=>{this.computedBaseValue()},()=>{this.computedTopValue()},()=>{this.adjustTopValue()},()=>{e(this.root)}];Object(a["c"])(t)}computedBaseValue(){let e=0;Object(a["yb"])(this.renderer.renderTree,null,(t,i,n,a,r,h)=>{let o=this.createNode(t,i,n,a,r,h);if(o.sortIndex=e,e++,n?this.setNodeCenter(o):this.isUseLeft?o.left=i._node.left-o.width-this.getMarginX(a):o.left=i._node.left+i._node.width+this.getMarginX(a),!t.data.expand)return!0},(e,t,i,n)=>{let a=!1===e.data.expand?0:e._node.children.length;e._node.childrenAreaHeight=a?e._node.children.reduce((e,t)=>e+t.height,0)+(a+1)*this.getMarginY(n+1):0;let r=e._node.checkHasGeneralization()?e._node._generalizationNodeHeight+this.getMarginY(n+1):0;e._node.childrenAreaHeight2=Math.max(e._node.childrenAreaHeight,r)},!0,0)}computedTopValue(){Object(a["yb"])(this.root,null,(e,t,i,n)=>{if(e.getData("expand")&&e.children&&e.children.length){let t=this.getMarginY(n+1),i=e.top+e.height/2-e.childrenAreaHeight/2,a=i+t;e.children.forEach(e=>{e.top=a,a+=e.height+t})}},null,!0)}adjustTopValue(){Object(a["yb"])(this.root,null,(e,t,i,n)=>{if(!e.getData("expand"))return;let a=e.childrenAreaHeight2-2*this.getMarginY(n+1)-e.height;a>0&&this.updateBrothers(e,a/2)},null,!0)}updateBrothers(e,t){if(e.parent){let i=e.parent.children,n=Object(a["H"])(e,i);i.forEach((i,a)=>{if(i.uid===e.uid||i.hasCustomPosition())return;let r=0;a<n?r=-t:a>n&&(r=t),i.top+=r,i.children&&i.children.length&&this.updateChildren(i.children,"top",r)}),this.updateBrothers(e.parent,t)}}renderLine(e,t,i,n){"curve"===n?this.renderLineCurve(e,t,i):"direct"===n?this.renderLineDirect(e,t,i):this.renderLineStraight(e,t,i)}renderLineStraight(e,t,i){if(e.children.length<=0)return[];let{left:n,top:a,width:r,height:h,expandBtnSize:o}=e;const{alwaysShowExpandBtn:d,notShowExpandBtn:l}=this.mindMap.opt;d&&!l||(o=0);let s=this.getMarginX(e.layerIndex+1),c=.6*(s-o);this.isUseLeft&&(c*=-1);let p=this.mindMap.themeConfig.nodeUseLineStyle;e.children.forEach((d,l)=>{let s;s=this.isUseLeft?0===e.layerIndex?n:n-o:0===e.layerIndex?n+r:n+r+o;let g=a+h/2,f=this.isUseLeft?d.left+d.width:d.left,u=d.top+d.height/2,L=p?d.width*(this.isUseLeft?-1:1):0;g=p&&!e.isRoot?g+h/2:g,u=p?u+d.height/2:u;let m=this.createFoldLine([[s,g],[s+c,g],[s+c,u],[f+L,u]]);this.setLineStyle(i,t[l],m,d)})}renderLineDirect(e,t,i){if(e.children.length<=0)return[];let{left:n,top:a,width:r,height:h,expandBtnSize:o}=e;const{alwaysShowExpandBtn:d,notShowExpandBtn:l}=this.mindMap.opt;d&&!l||(o=0);const{nodeUseLineStyle:s}=this.mindMap.themeConfig;e.children.forEach((d,l)=>{0===e.layerIndex&&(o=0);let c=this.isUseLeft?n-o:n+r+o,p=a+h/2,g=this.isUseLeft?d.left+d.width:d.left,f=d.top+d.height/2;p=s&&!e.isRoot?p+h/2:p,f=s?f+d.height/2:f;let u=s?` L ${this.isUseLeft?d.left:d.left+d.width},${f}`:"",L=`M ${c},${p} L ${g},${f}`+u;this.setLineStyle(i,t[l],L,d)})}renderLineCurve(e,t,i){if(e.children.length<=0)return[];let{left:n,top:a,width:r,height:h,expandBtnSize:o}=e;const{alwaysShowExpandBtn:d,notShowExpandBtn:l}=this.mindMap.opt;d&&!l||(o=0);const{nodeUseLineStyle:s,rootLineStartPositionKeepSameInCurve:c,rootLineKeepSameInCurve:p}=this.mindMap.themeConfig;e.children.forEach((d,l)=>{let g;0===e.layerIndex&&(o=0),g=this.isUseLeft?0!==e.layerIndex||c?n-o:n+r/2:0!==e.layerIndex||c?n+r+o:n+r/2;let f,u=a+h/2,L=this.isUseLeft?d.left+d.width:d.left,m=d.top+d.height/2,x="";u=s&&!e.isRoot?u+h/2:u,m=s?m+d.height/2:m,f=this.isUseLeft?s?` L ${d.left},${m}`:"":s?` L ${d.left+d.width},${m}`:"",x=e.isRoot&&!p?this.quadraticCurvePath(g,u,L,m)+f:this.cubicBezierPath(g,u,L,m)+f,this.setLineStyle(i,t[l],x,d)})}renderExpandBtn(e,t){let{width:i,height:n,expandBtnSize:a,layerIndex:r}=e;0===r&&(a=0);let{translateX:h,translateY:o}=t.transform(),d=this.mindMap.themeConfig.nodeUseLineStyle?n/2:0,l=this.isUseLeft?0-a:i,s=n/2+d;l===h&&s===o||t.translate(l-h,s-o)}renderGeneralization(e){e.forEach(e=>{let{left:t,top:i,bottom:n,right:a,generalizationLineMargin:r,generalizationNodeMargin:h}=this.getNodeGeneralizationRenderBoundaries(e,"h"),o=this.isUseLeft?t-r:a+r,d=o,l=i,s=o,c=n,p=d+(this.isUseLeft?-20:20),g=l+(c-l)/2,f=`M ${d},${l} Q ${p},${g} ${s},${c}`;e.generalizationLine.plot(f),e.generalizationNode.left=o+(this.isUseLeft?-h:h)-(this.isUseLeft?e.generalizationNode.width:0),e.generalizationNode.top=i+(n-i-e.generalizationNode.height)/2})}renderExpandBtnRect(e,t,i,n){this.isUseLeft?e.size(t,n).x(-t).y(0):e.size(t,n).x(i).y(0)}}t["a"]=h},"0a4c":function(e,t,i){"use strict";var n=i("35e0"),a=i("d17d"),r=i("6ac9");class h extends n["a"]{constructor(e={},t){super(e),this.layout=t}doLayout(e){let t=[()=>{this.computedBaseValue()},()=>{this.computedTopValue()},()=>{this.adjustLeftTopValue()},()=>{e(this.root)}];Object(a["c"])(t)}computedBaseValue(){Object(a["yb"])(this.renderer.renderTree,null,(e,t,i,n,a,h)=>{let o=this.createNode(e,t,i,n,a,h);if(i?this.setNodeCenter(o):(t._node.dir?o.dir=t._node.dir:this.layout===r["a"].LAYOUT.VERTICAL_TIMELINE2?o.dir=r["a"].LAYOUT_GROW_DIR.LEFT:this.layout===r["a"].LAYOUT.VERTICAL_TIMELINE3?o.dir=r["a"].LAYOUT_GROW_DIR.RIGHT:o.dir=a%2===0?r["a"].LAYOUT_GROW_DIR.RIGHT:r["a"].LAYOUT_GROW_DIR.LEFT,t._node.isRoot?o.left=t._node.left+(e._node.width>t._node.width?-(e._node.width-t._node.width)/2:(t._node.width-e._node.width)/2):o.left=o.dir===r["a"].LAYOUT_GROW_DIR.RIGHT?t._node.left+t._node.width+this.getMarginX(n):t._node.left-this.getMarginX(n)-o.width),!e.data.expand)return!0},(e,t,i,n)=>{if(i)return;let a=!1===e.data.expand?0:e._node.children.length;e._node.childrenAreaHeight=a?e._node.children.reduce((e,t)=>e+t.height,0)+(a+1)*this.getMarginY(n+1):0},!0,0)}computedTopValue(){Object(a["yb"])(this.root,null,(e,t,i,n,a)=>{if(e.getData("expand")&&e.children&&e.children.length){let t=this.getMarginY(n+1);if(i){let i=e.top+e.height,n=i+t;e.children.forEach(e=>{e.top=n,n+=e.height+t})}else{let t=this.getMarginY(n+1),i=e.top+e.height/2+t,a=i-e.childrenAreaHeight/2;e.children.forEach(e=>{e.top=a,a+=e.height+t})}}},null,!0)}adjustLeftTopValue(){Object(a["yb"])(this.root,null,(e,t,i,n)=>{if(!e.getData("expand"))return;if(i)return;let a=2*this.getMarginY(n+1)+e.height,r=e.childrenAreaHeight-a;r>0&&this.updateBrothers(e,r/2)},null,!0)}updateBrothers(e,t){if(e.parent){let i=e.parent.children,n=Object(a["H"])(e,i);i.forEach((i,a)=>{if(i.hasCustomPosition())return;if(!e.parent.isRoot&&i.uid===e.uid)return;let r=0;e.parent.isRoot?r=a<n?0:a>n?2*t:t:a<n?r=-t:a>n&&(r=t),i.top+=r,i.children&&i.children.length&&this.updateChildren(i.children,"top",r)}),this.updateBrothers(e.parent,t)}}updateBrothersTop(e,t){if(e.parent&&!e.parent.isRoot){let i=e.parent.children,n=Object(a["H"])(e,i);i.forEach((e,i)=>{if(e.hasCustomPosition())return;let a=0;i>n&&(a=t),e.top+=a,e.children&&e.children.length&&this.updateChildren(e.children,"top",a)}),this.updateBrothersTop(e.parent,t)}}renderLine(e,t,i,n){"curve"===n?this.renderLineCurve(e,t,i):"direct"===n?this.renderLineDirect(e,t,i):this.renderLineStraight(e,t,i)}renderLineStraight(e,t,i){if(e.children.length<=0)return[];let{expandBtnSize:n}=e;const{alwaysShowExpandBtn:a,notShowExpandBtn:h}=this.mindMap.opt;if(a&&!h||(n=0),e.isRoot){let n=e;e.children.forEach((a,r)=>{let h=n.top+n.height,o=a.top,d=e.left+e.width/2,l=`M ${d},${h} L ${d},${o}`;this.setLineStyle(i,t[r],l,a),n=a})}else if(e.dir===r["a"].LAYOUT_GROW_DIR.RIGHT){let a=e.left+e.width,r=e.top+e.height/2,h=this.getMarginX(e.layerIndex+1),o=.6*(h-n);e.children.forEach((e,n)=>{let h=e.left,d=e.top+e.height/2,l=this.createFoldLine([[a,r],[a+o,r],[a+o,d],[h,d]]);this.setLineStyle(i,t[n],l,e)})}else{let a=e.left,r=e.top+e.height/2,h=this.getMarginX(e.layerIndex+1),o=.6*(h-n);e.children.forEach((e,n)=>{let h=e.left+e.width,d=e.top+e.height/2,l=this.createFoldLine([[a,r],[a-o,r],[a-o,d],[h,d]]);this.setLineStyle(i,t[n],l,e)})}}renderLineDirect(e,t,i){if(e.children.length<=0)return[];let{left:n,top:a,width:h,height:o,expandBtnSize:d}=e;const{alwaysShowExpandBtn:l,notShowExpandBtn:s}=this.mindMap.opt;l&&!s||(d=0),e.children.forEach((l,s)=>{if(e.isRoot){let n=e;e.children.forEach((a,r)=>{let h=n.top+n.height,o=a.top,d=e.left+e.width/2,l=`M ${d},${h} L ${d},${o}`;this.setLineStyle(i,t[r],l,a),n=a})}else{let e=l.dir===r["a"].LAYOUT_GROW_DIR.LEFT?n-d:n+h+d,c=a+o/2,p=l.dir===r["a"].LAYOUT_GROW_DIR.LEFT?l.left+l.width:l.left,g=l.top+l.height/2,f=`M ${e},${c} L ${p},${g}`;this.setLineStyle(i,t[s],f,l)}})}renderLineCurve(e,t,i){if(e.children.length<=0)return[];let{left:n,top:a,width:h,height:o,expandBtnSize:d}=e;const{alwaysShowExpandBtn:l,notShowExpandBtn:s}=this.mindMap.opt;l&&!s||(d=0),e.children.forEach((l,s)=>{if(e.isRoot){let n=e;e.children.forEach((a,r)=>{let h=n.top+n.height,o=a.top,d=e.left+e.width/2,l=`M ${d},${h} L ${d},${o}`;this.setLineStyle(i,t[r],l,a),n=a})}else{let e=l.dir===r["a"].LAYOUT_GROW_DIR.LEFT?n-d:n+h+d,c=a+o/2,p=l.dir===r["a"].LAYOUT_GROW_DIR.LEFT?l.left+l.width:l.left,g=l.top+l.height/2,f=this.cubicBezierPath(e,c,p,g);this.setLineStyle(i,t[s],f,l)}})}renderExpandBtn(e,t){let{width:i,height:n,expandBtnSize:a,isRoot:h}=e;if(!h){let{translateX:h,translateY:o}=t.transform();e.dir===r["a"].LAYOUT_GROW_DIR.RIGHT?t.translate(i-h,n/2-o):t.translate(-a-h,n/2-o)}}renderGeneralization(e){e.forEach(e=>{let t=e.node.dir===r["a"].LAYOUT_GROW_DIR.LEFT,{top:i,bottom:n,left:a,right:h,generalizationLineMargin:o,generalizationNodeMargin:d}=this.getNodeGeneralizationRenderBoundaries(e,"h"),l=t?a-o:h+o,s=l,c=i,p=l,g=n,f=s+(t?-20:20),u=c+(g-c)/2,L=`M ${s},${c} Q ${f},${u} ${p},${g}`;e.generalizationLine.plot(this.transformPath(L)),e.generalizationNode.left=l+(t?-d:d)-(t?e.generalizationNode.width:0),e.generalizationNode.top=i+(n-i-e.generalizationNode.height)/2})}renderExpandBtnRect(e,t,i,n,a){a.dir===r["a"].LAYOUT_GROW_DIR.LEFT?e.size(t,n).x(-t).y(0):e.size(t,n).x(i).y(0)}}t["a"]=h},"0de5":function(e,t,i){"use strict";var n=i("ea0b"),a=i("90b8");t["a"]={transformToMarkdown:n["a"],transformMarkdownTo:a["a"]}},"1e30":function(e,t,i){"use strict";var n=i("990d"),a=i.n(n),r=i("b857"),h=i.n(r),o=i("d17d"),d=i("4984");const l=(e,t)=>new Promise((i,n)=>{a.a.loadAsync(e).then(async e=>{try{let a="",r=e.files["content.json"],o=e.files["content.xml"]||e.files["/content.xml"];if(r){let i=await r.async("string");a=await s(i,e.files,t)}else if(o){let e=await o.async("string"),t=h.a.xml2json(e);a=c(t)}a?i(a):n(new Error("解析失败"))}catch(a){n(a)}},e=>{n(e)})}),s=async(e,t,i)=>{e=JSON.parse(e);let n=null;e.length>1&&"function"===typeof i&&(n=await i(e)),n||(n=e[0]);const a=n.rootTopic,r={},h=[],l=async(e,i)=>{if(i.data={text:Object(o["bb"])(e.title)?"":e.title},e.notes){const t=e.notes.realHTML||e.notes.plain;i.data.note=t&&t.content||""}e.href&&/^https?:\/\//.test(e.href)&&(i.data.hyperlink=e.href),e.labels&&e.labels.length>0&&(i.data.tag=e.labels),Object(d["h"])(e,i,h,t);const n=[],a=[];i._summary&&n.push(i._summary),Array.isArray(e.summaries)&&e.summaries.length>0&&e.summaries.forEach(t=>{Object(d["a"])(n,a,()=>Object(d["e"])(e,t.topicId),t.range)}),i.data.generalization=n,i.children=[],e.children&&e.children.attached&&e.children.attached.length>0&&e.children.attached.forEach((e,t)=>{const n={};i.children.push(n),a[t]&&(n._summary=a[t]),l(e,n)})};return l(a,r),await Promise.all(h),r},c=e=>{const t=JSON.parse(e),i=t.elements,n=Object(d["d"])(i),a={},r=(e,t)=>{const i=e.elements;let n=Object(d["c"])(i,"title");n=n&&n.elements&&n.elements[0].text,t.data={text:Object(o["bb"])(n)?"":n};try{const e=Object(d["c"])(i,"notes");e&&(t.data.note=e.elements[0].elements[0].elements[0].text)}catch(s){console.log(s)}try{e.attributes&&e.attributes["xlink:href"]&&/^https?:\/\//.test(e.attributes["xlink:href"])&&(t.data.hyperlink=e.attributes["xlink:href"])}catch(s){console.log(s)}try{const e=Object(d["c"])(i,"labels");e&&(t.data.tag=e.elements.map(e=>e.elements[0].text))}catch(s){console.log(s)}const a=Object(d["c"])(i,"children"),h=[],l=[];try{t._summary&&h.push(t._summary);const e=Object(d["c"])(i,"summaries");e&&Array.isArray(e.elements)&&e.elements.length>0&&e.elements.forEach(e=>{Object(d["a"])(h,l,()=>Object(d["f"])(a,e.attributes["topic-id"]),e.attributes.range)})}catch(s){console.log(s)}if(t.data.generalization=h,t.children=[],a&&a.elements&&a.elements.length>0){const e=Object(d["b"])(a.elements,"attached");(e||[]).forEach((e,i)=>{const n={};t.children.push(n),l[i]&&(n._summary=l[i]),r(e,n)})}};return r(n,a),a},p=async(e,t)=>{const i="simpleMindMap_"+Date.now(),n=[];let r={},h=[],l=async(e,a,r)=>{let s={id:e.data.uid,structureClass:"org.xmind.ui.logic.right",title:Object(o["O"])(e.data.text),children:{attached:[]}};void 0!==e.data.note&&(s.notes={realHTML:{content:e.data.note},plain:{content:e.data.note}}),void 0!==e.data.hyperlink&&(s.href=e.data.hyperlink),void 0!==e.data.tag&&(s.labels=(e.data.tag||[]).map(e=>"object"===typeof e&&null!==e?e.text:e)),Object(d["i"])(e,a,h,n),r?(s.class="topic",a.id=i,a.class="sheet",a.title=t,a.extensions=[],a.topicPositioning="fixed",a.topicOverlapping="overlap",a.coreVersion="2.100.0",a.rootTopic=s):Object.keys(s).forEach(e=>{a[e]=s[e]});const{summary:c,summaries:p}=Object(d["j"])(e);r?p.length>0&&(a.rootTopic.children.summary=c,a.rootTopic.summaries=p):p.length>0&&(a.children.summary=c,a.summaries=p),e.children&&e.children.length>0&&e.children.forEach(e=>{let t={};l(e,t),s.children.attached.push(t)})};l(e,r,!0),await Promise.all(h);const s=[r],c=new a.a;c.file("content.json",JSON.stringify(s)),c.file("metadata.json",`{"modifier":"","dataStructureVersion":"2","creator":{"name":"mind-map"},"layoutEngineVersion":"3","activeSheetId":"${i}"}`),c.file("content.xml",Object(d["g"])());const p={"file-entries":{"content.json":{},"metadata.json":{},"Thumbnails/thumbnail.png":{}}};n.length>0&&n.forEach(e=>{p["file-entries"]["resources/"+e.name]={};const t=c.folder("resources");t.file(e.name,e.data,{base64:!0})}),c.file("manifest.json",JSON.stringify(p));const g=await c.generateAsync({type:"blob"});return g};t["a"]={parseXmindFile:l,transformXmind:s,transformOldXmind:c,transformToXmind:p}},"35e0":function(e,t,i){"use strict";var n=i("50c9"),a=i("6ac9"),r=i("fd85"),h=i("d17d");class o{constructor(e){this.renderer=e,this.mindMap=e.mindMap,this.draw=this.mindMap.draw,this.lineDraw=this.mindMap.lineDraw,this.root=null,this.lru=new r["a"](this.mindMap.opt.maxNodeCacheCount),this.rootNodeCenterOffset=null}doLayout(){throw new Error("【computed】方法为必要方法，需要子类进行重写！")}renderLine(){throw new Error("【renderLine】方法为必要方法，需要子类进行重写！")}renderExpandBtn(){throw new Error("【renderExpandBtn】方法为必要方法，需要子类进行重写！")}renderGeneralization(){}cacheNode(e,t){this.renderer.nodeCache[e]=t,this.lru.add(e,t)}checkIsNeedResizeSources(){return this.renderer.checkHasRenderSource(a["a"].CHANGE_THEME)}checkIsLayerTypeChange(e,t){return!(e>=2&&t>=2)&&(e>=2&&t<2||(e<2&&t>=2||void 0))}checkIsLayoutChangeRerenderExpandBtnPlaceholderRect(e){this.renderer.checkHasRenderSource(a["a"].CHANGE_LAYOUT)&&(e.needRerenderExpandBtnPlaceholderRect=!0)}checkIsNodeDataChange(e,t){return!!e&&(e="string"===typeof e?JSON.parse(e):e,e.isActive=t.isActive,e.expand=t.expand,e=JSON.stringify(e),e!==JSON.stringify(t))}checkNodeFixChange(e,t,i){let n=!1;this.mindMap.nodeInnerPrefixList.forEach(i=>{if(i.updateNodeData){const a=i.updateNodeData(e,t);a&&(n=a)}});let a=!1;return this.mindMap.nodeInnerPostfixList.forEach(t=>{if(t.updateNodeData){const n=t.updateNodeData(e,i);n&&(a=n)}}),n||a}createNode(e,t,i,a,r,o){const d={};this.mindMap.nodeInnerPrefixList.forEach(i=>{if(i.createNodeData){const[n,h]=i.createNodeData({data:e,parent:t,ancestors:o,layerIndex:a,index:r});d[n]=h}});const l={};this.mindMap.nodeInnerPostfixList.forEach(i=>{if(i.createNodeData){const[n,h]=i.createNodeData({data:e,parent:t,ancestors:o,layerIndex:a,index:r});l[n]=h}});const s=e.data.uid;let c=null;if(e&&e._node&&!this.renderer.reRender){c=e._node;const n=this.checkIsLayerTypeChange(c.layerIndex,a);c.reset(),c.layerIndex=a,i?c.isRoot=!0:c.parent=t._node,this.cacheNode(e._node.uid,c),this.checkIsLayoutChangeRerenderExpandBtnPlaceholderRect(c);const r=this.checkNodeFixChange(c,d,l),h=this.checkIsNeedResizeSources(),o=this.checkIsNodeDataChange(e._node.nodeDataSnapshot,e.data);(h||o||n||c.getData("resetRichText")||c.getData("needUpdate")||r)&&(c.getSize(),c.needLayout=!0),this.checkGetGeneralizationChange(c,h)}else if(!this.lru.has(s)&&!this.renderer.lastNodeCache[s]||this.renderer.reRender){const r=s||Object(h["r"])();c=new n["a"]({data:e,uid:r,renderer:this.renderer,mindMap:this.mindMap,draw:this.draw,layerIndex:a,isRoot:i,parent:i?null:t._node,...d}),e.data.uid=r,this.cacheNode(r,c),e._node=c}else{c=this.lru.get(s)||this.renderer.lastNodeCache[s];const n=JSON.stringify(c.getData()),r=this.checkIsLayerTypeChange(c.layerIndex,a);c.reset(),c.nodeData=c.handleData(e||{}),c.layerIndex=a,i?c.isRoot=!0:c.parent=t._node,this.cacheNode(s,c),this.checkIsLayoutChangeRerenderExpandBtnPlaceholderRect(c),e._node=c;const h=this.checkIsNeedResizeSources(),o=this.checkIsNodeDataChange(n,e.data),p=this.checkNodeFixChange(c,d,l);(h||o||r||c.getData("resetRichText")||c.getData("needUpdate")||p)&&(c.getSize(),c.needLayout=!0),this.checkGetGeneralizationChange(c,h)}return e.data.isActive&&this.renderer.addNodeToActiveList(c),-1!==this.mindMap.renderer.findActiveNodeIndex(c)&&c.setData({isActive:!0}),i?this.root=c:t._node.addChildren(c),c}checkGetGeneralizationChange(e,t){const i=e.getData("generalization");i&&e._generalizationList&&e._generalizationList.length>0&&e._generalizationList.forEach((e,n)=>{const a=e.generalizationNode,r=a.getData(),h=i[n];(t||h&&JSON.stringify(r)!==JSON.stringify(h))&&(h&&(a.nodeData.data=h),a.getSize(),a.needLayout=!0)})}formatPosition(e,t,i){return"number"===typeof e?e:void 0!==a["d"][e]?t*a["d"][e]:/^\d\d*%$/.test(e)?Number.parseFloat(e)/100*t:(t-i)/2}formatInitRootNodePosition(e){const{CENTER:t}=a["a"].INIT_ROOT_NODE_POSITION;return(!e||!Array.isArray(e)||e.length<2)&&(e=[t,t]),e}setNodeCenter(e,t){let{initRootNodePosition:i}=this.mindMap.opt;i=this.formatInitRootNodePosition(t||i),e.left=this.formatPosition(i[0],this.mindMap.width,e.width),e.top=this.formatPosition(i[1],this.mindMap.height,e.height)}getRootCenterOffset(e,t){if(this.rootNodeCenterOffset)return this.rootNodeCenterOffset;let{initRootNodePosition:i}=this.mindMap.opt;const{CENTER:n}=a["a"].INIT_ROOT_NODE_POSITION;if(i=this.formatInitRootNodePosition(i),i[0]===n&&i[1]===n)this.rootNodeCenterOffset={x:0,y:0};else{const i={width:e,height:t},a={width:e,height:t};this.setNodeCenter(i,[n,n]),this.setNodeCenter(a),this.rootNodeCenterOffset={x:a.left-i.left,y:a.top-i.top}}return this.rootNodeCenterOffset}updateChildren(e,t,i){e.forEach(e=>{e[t]+=i,e.children&&e.children.length&&!e.hasCustomPosition()&&this.updateChildren(e.children,t,i)})}updateChildrenPro(e,t){e.forEach(e=>{Object.keys(t).forEach(i=>{e[i]+=t[i]}),e.children&&e.children.length&&!e.hasCustomPosition()&&this.updateChildrenPro(e.children,t)})}getNodeAreaWidth(e,t=!1){let i=[],n=0,a=(e,r)=>{t&&e.checkHasGeneralization()&&(n+=e._generalizationNodeWidth),e.children.length?(r+=e.width/2,e.children.forEach(e=>{a(e,r)})):(r+=e.width,i.push(r))};return a(e,0),Math.max(...i)+n}quadraticCurvePath(e,t,i,n,a=!1){let r,h;return a?(r=e+.8*(i-e),h=t+.2*(n-t)):(r=e+.2*(i-e),h=t+.8*(n-t)),`M ${e},${t} Q ${r},${h} ${i},${n}`}cubicBezierPath(e,t,i,n,a=!1){let r,h,o,d;return a?(r=e,h=t+(n-t)/2,o=i,d=h):(r=e+(i-e)/2,h=t,o=r,d=n),`M ${e},${t} C ${r},${h} ${o},${d} ${i},${n}`}computeNewPoint(e,t,i=0){return e[0]===t[0]?t[1]>e[1]?[t[0],t[1]-i]:[t[0],t[1]+i]:e[1]===t[1]?t[0]>e[0]?[t[0]-i,t[1]]:[t[0]+i,t[1]]:void 0}createFoldLine(e){const{lineRadius:t}=this.mindMap.themeConfig,i=e.length;let n="",a="";if(i>=3&&t>0){const n=e[i-3],r=e[i-2],h=e[i-1],o=n[0].toFixed(0)===r[0].toFixed(0)&&r[0].toFixed(0)===h[0].toFixed(0)||n[1].toFixed(0)===r[1].toFixed(0)&&r[1].toFixed(0)===h[1].toFixed(0);if(!o){const o=this.computeNewPoint(n,r,t),d=this.computeNewPoint(h,r,t);a=`Q ${r[0]},${r[1]} ${d[0]},${d[1]}`,e.splice(i-2,1,o,a)}}return e.forEach((e,t)=>{if("string"===typeof e)n+=e;else{const[i,a]=e;n+=0===t?`M ${i},${a}`:`L ${i},${a}`}}),n}getMarginX(e){const{themeConfig:t,opt:i}=this.mindMap,{second:n,node:a}=t,r=2*i.hoverRectPadding;return 1===e?n.marginX+r:a.marginX+r}getMarginY(e){const{themeConfig:t,opt:i}=this.mindMap,{second:n,node:a}=t,r=2*i.hoverRectPadding;return 1===e?n.marginY+r:a.marginY+r}getNodeWidthWithGeneralization(e){return Math.max(e.width,e.checkHasGeneralization()?e._generalizationNodeWidth:0)}getNodeHeightWithGeneralization(e){return Math.max(e.height,e.checkHasGeneralization()?e._generalizationNodeHeight:0)}getNodeBoundaries(e,t){let{generalizationLineMargin:i,generalizationNodeMargin:n}=this.mindMap.themeConfig,a=e=>{let i=1/0,r=-1/0,h=1/0,o=-1/0;e.children&&e.children.length>0&&e.children.forEach(e=>{let{left:d,right:l,top:s,bottom:c}=a(e),p=e.checkHasGeneralization()&&e.getData("expand")?e._generalizationNodeWidth+n:0,g=e.checkHasGeneralization()&&e.getData("expand")?e._generalizationNodeHeight+n:0;d-("h"===t?p:0)<i&&(i=d-("h"===t?p:0)),l+("h"===t?p:0)>r&&(r=l+("h"===t?p:0)),s<h&&(h=s),c+("v"===t?g:0)>o&&(o=c+("v"===t?g:0))});let d={left:e.left,right:e.left+e.width,top:e.top,bottom:e.top+e.height};return{left:d.left<i?d.left:i,right:d.right>r?d.right:r,top:d.top<h?d.top:h,bottom:d.bottom>o?d.bottom:o}},{left:r,right:h,top:o,bottom:d}=a(e);return{left:r,right:h,top:o,bottom:d,generalizationLineMargin:i,generalizationNodeMargin:n}}getChildrenBoundaries(e,t,i=0,n){let{generalizationLineMargin:a,generalizationNodeMargin:r}=this.mindMap.themeConfig;const h=e.children.slice(i,n+1);let o=1/0,d=-1/0,l=1/0,s=-1/0;return h.forEach(e=>{const i=this.getNodeBoundaries(e,t);o=i.left<o?i.left:o,d=i.right>d?i.right:d,l=i.top<l?i.top:l,s=i.bottom>s?i.bottom:s}),{left:o,right:d,top:l,bottom:s,generalizationLineMargin:a,generalizationNodeMargin:r}}getNodeGeneralizationRenderBoundaries(e,t){let i=null;return i=e.range?this.getChildrenBoundaries(e.node,t,e.range[0],e.range[1]):this.getNodeBoundaries(e.node,t),i}getNodeActChildrenLength(e){return e.nodeData.children&&e.nodeData.children.length}setLineStyle(e,t,i,n){t.plot(this.transformPath(i)),e&&e(t,n,!0)}transformPath(e){const{customTransformNodeLinePath:t}=this.mindMap.opt;return t?t(e):e}}t["a"]=o},"3cd1":function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("d17d");const a=e=>e.richText?Object(n["hb"])(e.text):e.text,r=e=>new Array(e).fill("   ").join(""),h=e=>{let t="";return Object(n["yb"])(e,null,(e,i,n,h)=>{t+=r(h),t+=" "+a(e.data);const o=e.data.generalization;Array.isArray(o)?t+=o.map(e=>` [${a(e)}]`):o&&o.text&&(t+=` [${a(o)}]`),t+="\n\n"},()=>{},!0),t}},"6b5a":function(e,t,i){"use strict";var n=i("35e0"),a=i("d17d"),r=i("6ac9"),h={top:{renderExpandBtn({node:e,btn:t,expandBtnSize:i,translateX:n,translateY:a,width:r,height:h}){e.parent&&e.parent.isRoot?t.translate(.3*r-i/2-n,-i/2-a):t.translate(.3*r-i/2-n,h+i/2-a)},renderLine({node:e,line:t,top:i,x:n,lineLength:r,height:h,expandBtnSize:o,maxy:d,ctx:l}){e.parent&&e.parent.isRoot?t.plot(l.transformPath(`M ${n},${i} L ${n+r},${i-Math.tan(Object(a["u"])(l.mindMap.opt.fishboneDeg))*r}`)):t.plot(l.transformPath(`M ${n},${i+h+o} L ${n},${d}`))},computedLeftTopValue({layerIndex:e,node:t,ctx:i}){if(e>=1&&t.children){let n=i.getMarginY(e+1),a=t.left+t.width*i.childIndent,r=t.top+t.height+(i.getNodeActChildrenLength(t)>0?t.expandBtnSize:0)+n;t.children.forEach(e=>{e.left=a,e.top+=r,r+=e.height+(i.getNodeActChildrenLength(e)>0?e.expandBtnSize:0)+n})}},adjustLeftTopValueBefore({node:e,parent:t,ctx:i,layerIndex:n}){let a=e.children.length,r=i.getMarginY(n+1);if(t&&!t.isRoot&&a>0){let t=e.children.reduce((e,t)=>e+t.height+(i.getNodeActChildrenLength(t)>0?t.expandBtnSize:0)+r,0);i.updateBrothersTop(e,t)}},adjustLeftTopValueAfter({parent:e,node:t,ctx:i}){if(e&&e.isRoot){let e=i.getMarginY(t.layerIndex+1),n=t.expandBtnSize+e;t.children.forEach(e=>{let r=i.getNodeAreaHeight(e),h=e.top,o=e.left;e.top=t.top-(e.top-t.top)-r+t.height,e.left=t.left+t.width*i.indent+(r+n)/Math.tan(Object(a["u"])(i.mindMap.opt.fishboneDeg)),n+=r,i.updateChildrenPro(e.children,{top:e.top-h,left:e.left-o})})}}},bottom:{renderExpandBtn({node:e,btn:t,expandBtnSize:i,translateX:n,translateY:a,width:r,height:h}){e.parent&&e.parent.isRoot?t.translate(.3*r-i/2-n,h+i/2-a):t.translate(.3*r-i/2-n,-i/2-a)},renderLine({node:e,line:t,top:i,x:n,lineLength:r,height:h,miny:o,ctx:d}){e.parent&&e.parent.isRoot?t.plot(d.transformPath(`M ${n},${i+h} L ${n+r},${i+h+Math.tan(Object(a["u"])(d.mindMap.opt.fishboneDeg))*r}`)):t.plot(d.transformPath(`M ${n},${i} L ${n},${o}`))},computedLeftTopValue({layerIndex:e,node:t,ctx:i}){let n=i.getMarginY(e+1);if(1===e&&t.children){let e=t.left+t.width*i.childIndent,a=t.top+t.height+(i.getNodeActChildrenLength(t)>0?t.expandBtnSize:0)+n;t.children.forEach(t=>{t.left=e,t.top=a+(i.getNodeActChildrenLength(t)>0?t.expandBtnSize:0),a+=t.height+(i.getNodeActChildrenLength(t)>0?t.expandBtnSize:0)+n})}if(e>1&&t.children){let e=t.left+t.width*i.childIndent,a=t.top-(i.getNodeActChildrenLength(t)>0?t.expandBtnSize:0)-n;t.children.forEach(t=>{t.left=e,t.top=a-t.height,a-=t.height+(i.getNodeActChildrenLength(t)>0?t.expandBtnSize:0)+n})}},adjustLeftTopValueBefore({node:e,ctx:t,layerIndex:i}){let n=t.getMarginY(i+1),a=e.children.length;if(i>2&&a>0){let i=e.children.reduce((e,i)=>e+i.height+(t.getNodeActChildrenLength(i)>0?i.expandBtnSize:0)+n,0);t.updateBrothersTop(e,-i)}},adjustLeftTopValueAfter({parent:e,node:t,ctx:i}){if(e&&e.isRoot){let e=i.getMarginY(t.layerIndex+1),n=0,r=t.expandBtnSize;t.children.forEach(h=>{let o=i.getNodeActChildrenLength(h)>0,d=i.getNodeAreaHeight(h),l=o?d-h.height-(o?h.expandBtnSize:0):0;l-=o?e:0;let s=n+l,c=h.left;h.top+=s,h.left=t.left+t.width*i.indent+(d+r)/Math.tan(Object(a["u"])(i.mindMap.opt.fishboneDeg)),n+=l,r+=d,i.updateChildrenPro(h.children,{top:s,left:h.left-c})})}}}},o=i("6682"),d=i("a751");class l extends n["a"]{constructor(e={},t){super(e),this.layout=t,this.indent=.3,this.childIndent=.5,this.fishTail=null,this.maxx=0,this.headRatio=1,this.tailRatio=.6,this.paddingXRatio=.3,this.fishHeadPathStr="M4,181 C4,181, 0,177, 4,173 Q 96.09523809523809,0, 288.2857142857143,0 L 288.2857142857143,354 Q 48.047619047619044,354, 8,218.18367346938777 C8,218.18367346938777, 6,214.18367346938777, 8,214.18367346938777 L 41.183673469387756,214.18367346938777 Z",this.fishTailPathStr="M 606.9342905223708 0 Q 713.1342905223709 -177 819.3342905223708 -177 L 766.2342905223709 0 L 819.3342905223708 177 Q 713.1342905223709 177 606.9342905223708 0 z",this.bindEvent(),this.extendShape(),this.beforeChange=this.beforeChange.bind(this)}nodeIsRemoveAllLines(e){return e.isRoot||1===e.layerIndex}isFishbone2(){return this.layout===r["a"].LAYOUT.FISHBONE2}bindEvent(){this.isFishbone2()&&(this.onCheckUpdateFishTail=this.onCheckUpdateFishTail.bind(this),this.mindMap.on("afterExecCommand",this.onCheckUpdateFishTail))}unBindEvent(){this.mindMap.off("afterExecCommand",this.onCheckUpdateFishTail)}extendShape(){this.isFishbone2()&&this.mindMap.addShape({name:"fishHead",createShape:e=>{const t=Object(o["i"])(`<path d="${this.fishHeadPathStr}"></path>`),{width:i,height:n}=e.shapeInstance.getNodeSize();return t.size(i,n),t},getPadding:({width:e,height:t,paddingX:i,paddingY:n})=>{e+=2*i,t+=2*n;let a=this.paddingXRatio*e,r=0;e+=2*a;const h=e/this.headRatio;return r=(h-t)/2,{paddingX:a,paddingY:r}}})}doLayout(e){let t=[()=>{this.computedBaseValue(),this.addFishTail()},()=>{this.computedLeftTopValue()},()=>{this.adjustLeftTopValue(),this.updateFishTailPosition()},()=>{e(this.root)}];Object(a["c"])(t)}addFishTail(){if(!this.isFishbone2())return;const e=this.mindMap.lineDraw.findOne(".smm-layout-fishbone-tail");e?this.fishTail=e:(this.fishTail=Object(o["i"])(`<path d="${this.fishTailPathStr}"></path>`),this.fishTail.addClass("smm-layout-fishbone-tail"));const t=this.root.height,i=t*this.tailRatio;this.fishTail.size(i,t),this.styleFishTail(),this.mindMap.lineDraw.add(this.fishTail)}onCheckUpdateFishTail(e,t,i){if("SET_NODE_DATA"===e){let e=!1;Object.keys(i).forEach(t=>{d["b"].includes(t)&&(e=!0)}),e&&this.styleFishTail()}}styleFishTail(){this.root.style.shape(this.fishTail)}removeFishTail(){const e=this.mindMap.lineDraw.findOne(".smm-layout-fishbone-tail");e&&e.remove()}updateFishTailPosition(){this.isFishbone2()&&this.fishTail.x(this.maxx).cy(this.root.top+this.root.height/2)}computedBaseValue(){Object(a["yb"])(this.renderer.renderTree,null,(e,t,i,n,a,h)=>{i&&this.isFishbone2()&&(e.data.shape="fishHead");let o=this.createNode(e,t,i,n,a,h);if(i)this.setNodeCenter(o);else if(t._node.dir?o.dir=t._node.dir:o.dir=a%2===0?r["a"].LAYOUT_GROW_DIR.TOP:r["a"].LAYOUT_GROW_DIR.BOTTOM,t._node.isRoot){let e=this.getMarginY(n);const i=this.isFishbone2()?t._node.height/4:0;this.checkIsTop(o)?o.top=t._node.top-o.height-e+i:o.top=t._node.top+t._node.height+e-i}if(!e.data.expand)return!0},null,!0,0)}computedLeftTopValue(){Object(a["yb"])(this.root,null,(e,t,i,n)=>{if(e.isRoot){let t=this.getMarginX(n+1);const i=this.isFishbone2()?2:1;let a=e.left+e.width+e.height/i+t,r=e.left+e.width+e.height/i+t;e.children.forEach(e=>{this.checkIsTop(e)?(e.left=a,a+=e.width+t):(e.left=r+20,r+=e.width+t)})}let a={layerIndex:n,node:e,ctx:this};this.checkIsTop(e)?h.top.computedLeftTopValue(a):h.bottom.computedLeftTopValue(a)},null,!0)}adjustLeftTopValue(){Object(a["yb"])(this.root,null,(e,t,i,n)=>{if(!e.getData("expand"))return;let a={node:e,parent:t,layerIndex:n,ctx:this};this.checkIsTop(e)?h.top.adjustLeftTopValueBefore(a):h.bottom.adjustLeftTopValueBefore(a)},(e,t)=>{let i={parent:t,node:e,ctx:this};if(this.checkIsTop(e)?h.top.adjustLeftTopValueAfter(i):h.bottom.adjustLeftTopValueAfter(i),e.isRoot){let t=0,i=0,n=-1/0;e.children.forEach(e=>{if(this.checkIsTop(e)){e.left+=t,this.updateChildren(e.children,"left",t);let{left:i,right:a}=this.getNodeBoundaries(e,"h");a>n&&(n=a),t+=a-i}else{e.left+=i,this.updateChildren(e.children,"left",i);let{left:t,right:a}=this.getNodeBoundaries(e,"h");a>n&&(n=a),i+=a-t}}),this.maxx=n}},!0)}getNodeAreaHeight(e){let t=0,i=e=>{let n=this.getMarginY(e.layerIndex);t+=e.height+(this.getNodeActChildrenLength(e)>0?e.expandBtnSize:0)+n,e.children.length&&e.children.forEach(e=>{i(e)})};return i(e),t}updateBrothersLeft(e){let t=e.children,i=0;t.forEach(e=>{e.left+=i,e.children&&e.children.length&&this.updateChildren(e.children,"left",i);let{left:t,right:n}=this.getNodeBoundaries(e,"h"),a=n-t,r=a-e.width;r>0&&(i+=r)})}updateBrothersTop(e,t){if(e.parent&&!e.parent.isRoot){let i=e.parent.children,n=Object(a["H"])(e,i);i.forEach((e,i)=>{if(e.hasCustomPosition())return;let a=0;i>n&&(a=t),e.top+=a,e.children&&e.children.length&&this.updateChildren(e.children,"top",a)}),this.checkIsTop(e)?this.updateBrothersTop(e.parent,t):this.updateBrothersTop(e.parent,3===e.layerIndex?0:t)}}checkIsTop(e){return e.dir===r["a"].LAYOUT_GROW_DIR.TOP}renderLine(e,t,i){if(1!==e.layerIndex&&e.children.length<=0)return[];let{top:n,height:r,expandBtnSize:o}=e;const{alwaysShowExpandBtn:d,notShowExpandBtn:l}=this.mindMap.opt;d&&!l||(o=0);let s=e.children.length;if(e.isRoot){let t=-1/0;e.children.forEach(n=>{n.left>t&&(t=n.left);let r=this.getMarginY(n.layerIndex),h=n.left,o=e.height/2+r-(this.isFishbone2()?e.height/4:0),d=o/Math.tan(Object(a["u"])(this.mindMap.opt.fishboneDeg)),l=this.lineDraw.path();this.checkIsTop(n)?l.plot(this.transformPath(`M ${h-d},${n.top+n.height+o} L ${n.left},${n.top+n.height}`)):l.plot(this.transformPath(`M ${h-d},${n.top-o} L ${h},${n.top}`)),e.style.line(l),e._lines.push(l),i&&i(l,e)});let n=e.top+e.height/2,r=e.height/2+this.getMarginY(e.layerIndex+1),h=this.lineDraw.path();const o=this.isFishbone2()?this.maxx:t-r/Math.tan(Object(a["u"])(this.mindMap.opt.fishboneDeg));h.plot(this.transformPath(`M ${e.left+e.width},${n} L ${o},${n}`)),e.style.line(h),e._lines.push(h),i&&i(h,e)}else{let a=-1/0,d=1/0,l=-1/0,c=e.left+e.width*this.indent;if(e.children.forEach((n,r)=>{n.left>l&&(l=n.left);let h=n.top+n.height/2;if(h>a&&(a=h),h<d&&(d=h),e.layerIndex>1){let e=`M ${c},${h} L ${n.left},${h}`;this.setLineStyle(i,t[r],e,n)}}),s>=0){let t=this.lineDraw.path();o=s>0?o:0;let p=l-e.left-e.width*this.indent;p=Math.max(p,0);let g={node:e,line:t,top:n,x:c,lineLength:p,height:r,expandBtnSize:o,maxy:a,miny:d,ctx:this};this.checkIsTop(e)?h.top.renderLine(g):h.bottom.renderLine(g),e.style.line(t),e._lines.push(t),i&&i(t,e)}}}renderExpandBtn(e,t){let{width:i,height:n,expandBtnSize:a,isRoot:r}=e;if(!r){let{translateX:r,translateY:o}=t.transform(),d={node:e,btn:t,expandBtnSize:a,translateX:r,translateY:o,width:i,height:n};this.checkIsTop(e)?h.top.renderExpandBtn(d):h.bottom.renderExpandBtn(d)}}renderGeneralization(e){e.forEach(e=>{let{top:t,bottom:i,right:n,generalizationLineMargin:a,generalizationNodeMargin:r}=this.getNodeGeneralizationRenderBoundaries(e,"h"),h=n+a,o=t,d=n+a,l=i,s=h+20,c=o+(l-o)/2,p=`M ${h},${o} Q ${s},${c} ${d},${l}`;e.generalizationLine.plot(this.transformPath(p)),e.generalizationNode.left=n+r,e.generalizationNode.top=t+(i-t-e.generalizationNode.height)/2})}renderExpandBtnRect(e,t,i,n,a){let h="";h=a.dir===r["a"].LAYOUT_GROW_DIR.TOP?1===a.layerIndex?r["a"].LAYOUT_GROW_DIR.TOP:r["a"].LAYOUT_GROW_DIR.BOTTOM:1===a.layerIndex?r["a"].LAYOUT_GROW_DIR.BOTTOM:r["a"].LAYOUT_GROW_DIR.TOP,h===r["a"].LAYOUT_GROW_DIR.TOP?e.size(i,t).x(0).y(-t):e.size(i,t).x(0).y(n)}beforeChange(){this.isFishbone2()&&(this.root.nodeData.data.shape=r["a"].SHAPE.RECTANGLE,this.removeFishTail(),this.unBindEvent(),this.mindMap.removeShape("fishHead"))}}t["a"]=l},"791b":function(e,t,i){"use strict";var n=i("35e0"),a=i("d17d");class r extends n["a"]{constructor(e={}){super(e)}doLayout(e){let t=[()=>{this.computedBaseValue()},()=>{this.computedLeftTopValue()},()=>{this.adjustLeftTopValue()},()=>{e(this.root)}];Object(a["c"])(t)}computedBaseValue(){Object(a["yb"])(this.renderer.renderTree,null,(e,t,i,n,a,r)=>{let h=this.createNode(e,t,i,n,a,r);if(i?this.setNodeCenter(h):t._node.isRoot&&(h.top=t._node.top+t._node.height+this.getMarginX(n)),!e.data.expand)return!0},(e,t,i,n)=>{if(i){let t=!1===e.data.expand?0:e._node.children.length;e._node.childrenAreaWidth=t?e._node.children.reduce((e,t)=>e+t.width,0)+(t+1)*this.getMarginX(n+1):0}},!0,0)}computedLeftTopValue(){Object(a["yb"])(this.root,null,(e,t,i,n)=>{if(e.getData("expand")&&e.children&&e.children.length){let t=this.getMarginX(n+1),a=this.getMarginY(n+1);if(i){let i=e.left+e.width/2-e.childrenAreaWidth/2,n=i+t;e.children.forEach(e=>{e.left=n,n+=e.width+t})}else{let t=e.top+this.getNodeHeightWithGeneralization(e)+a+(this.getNodeActChildrenLength(e)>0?e.expandBtnSize:0);e.children.forEach(i=>{i.left=e.left+.5*e.width,i.top=t,t+=this.getNodeHeightWithGeneralization(i)+a+(this.getNodeActChildrenLength(i)>0?i.expandBtnSize:0)})}}},null,!0)}adjustLeftTopValue(){Object(a["yb"])(this.root,null,(e,t,i,n)=>{if(!e.getData("expand"))return;if(t&&t.isRoot){let t=this.getNodeAreaWidth(e,!0),i=t-e.width;i>0&&this.updateBrothersLeft(e,i)}let a=e.children.length;if(t&&!t.isRoot&&a>0){let t=this.getMarginY(n+1),i=e.children.reduce((e,t)=>e+this.getNodeHeightWithGeneralization(t)+(this.getNodeActChildrenLength(t)>0?t.expandBtnSize:0),0)+a*t;this.updateBrothersTop(e,i)}},(e,t,i)=>{if(i){let{right:t,left:i}=this.getNodeBoundaries(e,"h"),n=t-i,a=e.left-i-(n-e.width)/2;this.updateChildren(e.children,"left",a)}},!0)}updateBrothersLeft(e,t){if(e.parent){let i=e.parent.children,n=Object(a["H"])(e,i);i.forEach((e,i)=>{e.hasCustomPosition()||i<=n||(e.left+=t,e.children&&e.children.length&&this.updateChildren(e.children,"left",t))}),this.updateBrothersLeft(e.parent,t)}}updateBrothersTop(e,t){if(e.parent&&!e.parent.isRoot){let i=e.parent.children,n=Object(a["H"])(e,i);i.forEach((e,i)=>{if(e.hasCustomPosition())return;let a=0;i>n&&(a=t),e.top+=a,e.children&&e.children.length&&this.updateChildren(e.children,"top",a)}),this.updateBrothersTop(e.parent,t)}}renderLine(e,t,i){if(e.children.length<=0)return[];let{left:n,top:a,width:r,height:h,expandBtnSize:o}=e;const{alwaysShowExpandBtn:d,notShowExpandBtn:l}=this.mindMap.opt;d&&!l||(o=0);let s=e.children.length,c=this.getMarginX(e.layerIndex+1);if(e.isRoot){let o=n+r/2,d=a+h,l=.7*c,p=1/0,g=-1/0;e.children.forEach((e,n)=>{let a=e.left+e.width/2,r=e.top;a<p&&(p=a),a>g&&(g=a);let h=this.mindMap.themeConfig.nodeUseLineStyle?` L ${e.left},${r} L ${e.left+e.width},${r}`:"",o=`M ${a},${d+l} L ${a},${d+l>r?r+e.height:r}`+h;this.setLineStyle(i,t[n],o,e)}),p=Math.min(p,o),g=Math.max(g,o);let f=this.lineDraw.path();if(e.style.line(f),f.plot(this.transformPath(`M ${o},${d} L ${o},${d+l}`)),e._lines.push(f),i&&i(f,e),s>0){let t=this.lineDraw.path();e.style.line(t),t.plot(this.transformPath(`M ${p},${d+l} L ${g},${d+l}`)),e._lines.push(t),i&&i(t,e)}}else{let n=a+h,r=-1/0,d=e.left+.3*e.width;if(e.children.forEach((h,o)=>{let l=h.top+h.height/2;l>r&&(r=l);let s="",c=h.left,p=h.left+h.width<d,g=!1;p?c=h.left+h.width:h.left<d&&h.left+h.width>d&&(g=!0,l=h.top,r=l),l>a&&l<n?s=`M ${p?e.left:e.left+e.width},${l} L ${c},${l}`:l<n?(g&&(l=h.top+h.height,c=d),s=`M ${d},${a} L ${d},${l} L ${c},${l}`):(g&&(c=d),s=`M ${d},${l} L ${c},${l}`);let f=this.mindMap.themeConfig.nodeUseLineStyle?` L ${c},${l-h.height/2} L ${c},${l+h.height/2}`:"";s+=f,this.setLineStyle(i,t[o],s,h)}),s>0){let t=this.lineDraw.path();o=s>0?o:0,e.style.line(t),r<n+o?t.hide():(t.plot(this.transformPath(`M ${d},${n+o} L ${d},${r}`)),t.show()),e._lines.push(t),i&&i(t,e)}}}renderExpandBtn(e,t){let{width:i,height:n,expandBtnSize:a,isRoot:r}=e;if(!r){let{translateX:e,translateY:r}=t.transform();t.translate(.3*i-a/2-e,n+a/2-r)}}renderGeneralization(e){e.forEach(e=>{let{top:t,bottom:i,right:n,generalizationLineMargin:a,generalizationNodeMargin:r}=this.getNodeGeneralizationRenderBoundaries(e,"h"),h=n+a,o=t,d=n+a,l=i,s=h+20,c=o+(l-o)/2,p=`M ${h},${o} Q ${s},${c} ${d},${l}`;e.generalizationLine.plot(this.transformPath(p)),e.generalizationNode.left=n+r,e.generalizationNode.top=t+(i-t-e.generalizationNode.height)/2})}renderExpandBtnRect(e,t,i,n,a){e.size(i,t).x(0).y(n)}}t["a"]=r},"8ecc":function(e,t,i){"use strict";var n=i("35e0"),a=i("d17d"),r=i("6ac9");class h extends n["a"]{constructor(e={}){super(e)}doLayout(e){let t=[()=>{this.computedBaseValue()},()=>{this.computedTopValue()},()=>{this.adjustTopValue()},()=>{e(this.root)}];Object(a["c"])(t)}computedBaseValue(){Object(a["yb"])(this.renderer.renderTree,null,(e,t,i,n,a,h)=>{let o=this.createNode(e,t,i,n,a,h);if(i?this.setNodeCenter(o):(t._node.dir?o.dir=t._node.dir:o.dir=o.getData("dir")||(a%2===0?r["a"].LAYOUT_GROW_DIR.RIGHT:r["a"].LAYOUT_GROW_DIR.LEFT),o.left=o.dir===r["a"].LAYOUT_GROW_DIR.RIGHT?t._node.left+t._node.width+this.getMarginX(n):t._node.left-this.getMarginX(n)-o.width),!e.data.expand)return!0},(e,t,i,n)=>{if(!e.data.expand)return e._node.leftChildrenAreaHeight=0,void(e._node.rightChildrenAreaHeight=0);let a=0,h=0,o=0,d=0;e._node.children.forEach(e=>{e.dir===r["a"].LAYOUT_GROW_DIR.LEFT?(a++,o+=e.height):(h++,d+=e.height)}),e._node.leftChildrenAreaHeight=o+(a+1)*this.getMarginY(n+1),e._node.rightChildrenAreaHeight=d+(h+1)*this.getMarginY(n+1);let l=e._node.checkHasGeneralization()?e._node._generalizationNodeHeight+this.getMarginY(n+1):0;e._node.leftChildrenAreaHeight2=Math.max(e._node.leftChildrenAreaHeight,l),e._node.rightChildrenAreaHeight2=Math.max(e._node.rightChildrenAreaHeight,l)},!0,0)}computedTopValue(){Object(a["yb"])(this.root,null,(e,t,i,n)=>{if(e.getData("expand")&&e.children&&e.children.length){let t=this.getMarginY(n+1),i=e.top+e.height/2+t,a=i-e.leftChildrenAreaHeight/2,h=i-e.rightChildrenAreaHeight/2;e.children.forEach(e=>{e.dir===r["a"].LAYOUT_GROW_DIR.LEFT?(e.top=a,a+=e.height+t):(e.top=h,h+=e.height+t)})}},null,!0)}adjustTopValue(){Object(a["yb"])(this.root,null,(e,t,i,n)=>{if(!e.getData("expand"))return;let a=2*this.getMarginY(n+1)+e.height,r=e.leftChildrenAreaHeight2-a,h=e.rightChildrenAreaHeight2-a;(r>0||h>0)&&this.updateBrothers(e,r/2,h/2)},null,!0)}updateBrothers(e,t,i){if(e.parent){let n=e.parent.children.filter(t=>t.dir===e.dir),h=Object(a["H"])(e,n);n.forEach((e,n)=>{if(e.hasCustomPosition())return;let a=0,o=e.dir===r["a"].LAYOUT_GROW_DIR.LEFT?t:i;n<h?a=-o:n>h&&(a=o),e.top+=a,e.children&&e.children.length&&this.updateChildren(e.children,"top",a)}),this.updateBrothers(e.parent,t,i)}}renderLine(e,t,i,n){"curve"===n?this.renderLineCurve(e,t,i):"direct"===n?this.renderLineDirect(e,t,i):this.renderLineStraight(e,t,i)}renderLineStraight(e,t,i){if(e.children.length<=0)return[];let{left:n,top:a,width:h,height:o,expandBtnSize:d}=e;const{alwaysShowExpandBtn:l,notShowExpandBtn:s}=this.mindMap.opt;l&&!s||(d=0);let c=this.getMarginX(e.layerIndex+1),p=.6*(c-d),g=this.mindMap.themeConfig.nodeUseLineStyle;e.children.forEach((l,s)=>{let c=0,f=0,u=g?l.width:0;l.dir===r["a"].LAYOUT_GROW_DIR.LEFT?(f=-p,c=0===e.layerIndex?n:n-d,u=-u):(f=p,c=0===e.layerIndex?n+h:n+h+d);let L=a+o/2,m=l.dir===r["a"].LAYOUT_GROW_DIR.LEFT?l.left+l.width:l.left,x=l.top+l.height/2;L=g&&!e.isRoot?L+o/2:L,x=g?x+l.height/2:x;let y=this.createFoldLine([[c,L],[c+f,L],[c+f,x],[m+u,x]]);this.setLineStyle(i,t[s],y,l)})}renderLineDirect(e,t,i){if(e.children.length<=0)return[];let{left:n,top:a,width:h,height:o,expandBtnSize:d}=e;const{alwaysShowExpandBtn:l,notShowExpandBtn:s}=this.mindMap.opt;l&&!s||(d=0);const{nodeUseLineStyle:c}=this.mindMap.themeConfig;e.children.forEach((l,s)=>{0===e.layerIndex&&(d=0);let p=l.dir===r["a"].LAYOUT_GROW_DIR.LEFT?n-d:n+h+d,g=a+o/2,f=l.dir===r["a"].LAYOUT_GROW_DIR.LEFT?l.left+l.width:l.left,u=l.top+l.height/2;g=c&&!e.isRoot?g+o/2:g,u=c?u+l.height/2:u;let L="";c&&(L=l.dir===r["a"].LAYOUT_GROW_DIR.LEFT?` L ${l.left},${u}`:` L ${l.left+l.width},${u}`);let m=`M ${p},${g} L ${f},${u}`+L;this.setLineStyle(i,t[s],m,l)})}renderLineCurve(e,t,i){if(e.children.length<=0)return[];let{left:n,top:a,width:h,height:o,expandBtnSize:d}=e;const{alwaysShowExpandBtn:l,notShowExpandBtn:s}=this.mindMap.opt;l&&!s||(d=0);const{nodeUseLineStyle:c,rootLineKeepSameInCurve:p,rootLineStartPositionKeepSameInCurve:g}=this.mindMap.themeConfig;e.children.forEach((l,s)=>{0===e.layerIndex&&(d=0);let f=0!==e.layerIndex||g?l.dir===r["a"].LAYOUT_GROW_DIR.LEFT?n-d:n+h+d:n+h/2,u=a+o/2,L=l.dir===r["a"].LAYOUT_GROW_DIR.LEFT?l.left+l.width:l.left,m=l.top+l.height/2,x="";u=c&&!e.isRoot?u+o/2:u,m=c?m+l.height/2:m;let y="";c&&(y=l.dir===r["a"].LAYOUT_GROW_DIR.LEFT?` L ${l.left},${m}`:` L ${l.left+l.width},${m}`),x=e.isRoot&&!p?this.quadraticCurvePath(f,u,L,m)+y:this.cubicBezierPath(f,u,L,m)+y,this.setLineStyle(i,t[s],x,l)})}renderExpandBtn(e,t){let{width:i,height:n,expandBtnSize:a}=e,{translateX:h,translateY:o}=t.transform(),d=this.mindMap.themeConfig.nodeUseLineStyle?n/2:0,l=e.dir===r["a"].LAYOUT_GROW_DIR.LEFT?0-a:i,s=n/2+d;if(l===h&&s===o)return;let c=l-h,p=s-o;t.translate(c,p)}renderGeneralization(e){e.forEach(e=>{let t=e.node.dir===r["a"].LAYOUT_GROW_DIR.LEFT,{top:i,bottom:n,left:a,right:h,generalizationLineMargin:o,generalizationNodeMargin:d}=this.getNodeGeneralizationRenderBoundaries(e,"h"),l=t?a-o:h+o,s=l,c=i,p=l,g=n,f=s+(t?-20:20),u=c+(g-c)/2,L=`M ${s},${c} Q ${f},${u} ${p},${g}`;e.generalizationLine.plot(L),e.generalizationNode.left=l+(t?-d:d)-(t?e.generalizationNode.width:0),e.generalizationNode.top=i+(n-i-e.generalizationNode.height)/2})}renderExpandBtnRect(e,t,i,n,a){a.dir===r["a"].LAYOUT_GROW_DIR.LEFT?e.size(t,n).x(-t).y(0):e.size(t,n).x(i).y(0)}}t["a"]=h},"90b8":function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("ce88");const a=e=>{let t="";return(e.children||[]).forEach(e=>{["inlineCode","text"].includes(e.type)?t+=e.value||"":t+=a(e)}),t},r=e=>{let t=[],i=(e,t)=>{for(let n=0;n<e.length;n++){let r=e[n],h={};if(h.data={text:a(r)},h.children=[],t.push(h),r.children.length>1)for(let e=1;e<r.children.length;e++){let t=r.children[e];"list"===t.type&&i(t.children,h.children)}}};return i(e.children,t),t},h=e=>{const t=Object(n["a"])(e);let i={children:[]},h=[i.children],o=i.children,d=[-1],l=-1;for(let n=0;n<t.children.length;n++){let e=t.children[n];if("heading"===e.type){if(!e.children[0])continue;let t={};if(t.data={text:a(e)},t.children=[],e.depth>l)o.push(t),h.push(t.children),o=t.children,d.push(e.depth),l=e.depth;else if(e.depth===l)h.pop(),o=h[h.length-1],d.pop(),l=d[d.length-1],o.push(t),h.push(t.children),o=t.children,d.push(e.depth),l=e.depth;else while(d.length)if(h.pop(),o=h[h.length-1],d.pop(),l=d[d.length-1],l<e.depth){o.push(t),h.push(t.children),o=t.children,d.push(e.depth),l=e.depth;break}}else"list"===e.type&&o.push(...r(e))}return i.children[0]}},aea3:function(e,t,i){"use strict";var n=i("35e0"),a=i("d17d");class r extends n["a"]{constructor(e={}){super(e)}doLayout(e){let t=[()=>{this.computedBaseValue()},()=>{this.computedLeftValue()},()=>{this.adjustLeftValue()},()=>{e(this.root)}];Object(a["c"])(t)}computedBaseValue(){Object(a["yb"])(this.renderer.renderTree,null,(e,t,i,n,a,r)=>{let h=this.createNode(e,t,i,n,a,r);if(i?this.setNodeCenter(h):h.top=t._node.top+t._node.height+this.getMarginX(n),!e.data.expand)return!0},(e,t,i,n)=>{let a=!1===e.data.expand?0:e._node.children.length;e._node.childrenAreaWidth=a?e._node.children.reduce((e,t)=>e+t.width,0)+(a+1)*this.getMarginY(n+1):0;let r=e._node.checkHasGeneralization()?e._node._generalizationNodeWidth+this.getMarginY(n+1):0;e._node.childrenAreaWidth2=Math.max(e._node.childrenAreaWidth,r)},!0,0)}computedLeftValue(){Object(a["yb"])(this.root,null,(e,t,i,n)=>{if(e.getData("expand")&&e.children&&e.children.length){let t=this.getMarginY(n+1),i=e.left+e.width/2-e.childrenAreaWidth/2,a=i+t;e.children.forEach(e=>{e.left=a,a+=e.width+t})}},null,!0)}adjustLeftValue(){Object(a["yb"])(this.root,null,(e,t,i,n)=>{if(!e.getData("expand"))return;let a=e.childrenAreaWidth2-2*this.getMarginY(n+1)-e.width;a>0&&this.updateBrothers(e,a/2)},null,!0)}updateBrothers(e,t){if(e.parent){let i=e.parent.children,n=Object(a["H"])(e,i);i.forEach((e,i)=>{if(e.hasCustomPosition())return;let a=0;i<n?a=-t:i>n&&(a=t),e.left+=a,e.children&&e.children.length&&this.updateChildren(e.children,"left",a)}),this.updateBrothers(e.parent,t)}}renderLine(e,t,i,n){"curve"===n?this.renderLineCurve(e,t,i):"direct"===n?this.renderLineDirect(e,t,i):this.renderLineStraight(e,t,i)}renderLineCurve(e,t,i){if(e.children.length<=0)return[];let{left:n,top:a,width:r,height:h,expandBtnSize:o}=e;const{alwaysShowExpandBtn:d,notShowExpandBtn:l}=this.mindMap.opt;d&&!l||(o=0);const{nodeUseLineStyle:s,rootLineStartPositionKeepSameInCurve:c,rootLineKeepSameInCurve:p}=this.mindMap.themeConfig;e.children.forEach((d,l)=>{0===e.layerIndex&&(o=0);let g=n+r/2,f=0!==e.layerIndex||c?a+h+o:a+h/2,u=d.left+d.width/2,L=d.top,m="",x=s?` L ${d.left},${L} L ${d.left+d.width},${L}`:"";m=e.isRoot&&!p?this.quadraticCurvePath(g,f,u,L,!0)+x:this.cubicBezierPath(g,f,u,L,!0)+x,this.setLineStyle(i,t[l],m,d)})}renderLineDirect(e,t,i){if(e.children.length<=0)return[];let{left:n,top:a,width:r,height:h}=e;const{nodeUseLineStyle:o}=this.mindMap.themeConfig;let d=n+r/2,l=a+h;e.children.forEach((e,n)=>{let a=e.left+e.width/2,r=e.top,h=o?` L ${e.left},${r} L ${e.left+e.width},${r}`:"",s=`M ${d},${l} L ${a},${r}`+h;this.setLineStyle(i,t[n],s,e)})}renderLineStraight(e,t,i){if(e.children.length<=0)return[];let{left:n,top:a,width:r,height:h,expandBtnSize:o,isRoot:d}=e;const{alwaysShowExpandBtn:l,notShowExpandBtn:s}=this.mindMap.opt;l&&!s||(o=0);let c=n+r/2,p=a+h,g=this.getMarginX(e.layerIndex+1),f=.7*g,u=1/0,L=-1/0,m=e.children.length;e.children.forEach((e,n)=>{let a=e.left+e.width/2,r=p+f>e.top?e.top+e.height:e.top;a<u&&(u=a),a>L&&(L=a);let h=this.mindMap.themeConfig.nodeUseLineStyle?` L ${e.left},${r} L ${e.left+e.width},${r}`:"",o=`M ${a},${p+f} L ${a},${r}`+h;this.setLineStyle(i,t[n],o,e)}),u=Math.min(c,u),L=Math.max(c,L);let x=this.lineDraw.path();if(e.style.line(x),o=m>0&&!d?o:0,x.plot(this.transformPath(`M ${c},${p+o} L ${c},${p+f}`)),e._lines.push(x),i&&i(x,e),m>0){let t=this.lineDraw.path();e.style.line(t),t.plot(this.transformPath(`M ${u},${p+f} L ${L},${p+f}`)),e._lines.push(t),i&&i(t,e)}}renderExpandBtn(e,t){let{width:i,height:n,expandBtnSize:a}=e,{translateX:r,translateY:h}=t.transform();t.translate(i/2-a/2-r,n+a/2-h)}renderGeneralization(e){e.forEach(e=>{let{bottom:t,left:i,right:n,generalizationLineMargin:a,generalizationNodeMargin:r}=this.getNodeGeneralizationRenderBoundaries(e,"v"),h=i,o=t+a,d=n,l=t+a,s=h+(d-h)/2,c=o+20,p=`M ${h},${o} Q ${s},${c} ${d},${l}`;e.generalizationLine.plot(this.transformPath(p)),e.generalizationNode.top=t+r,e.generalizationNode.left=i+(n-i-e.generalizationNode.width)/2})}renderExpandBtnRect(e,t,i,n,a){e.size(i,t).x(0).y(n)}}t["a"]=r},ea0b:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("d17d");const a=e=>e.richText?Object(n["hb"])(e.text):e.text,r=e=>new Array(e).fill("#").join(""),h=e=>new Array(e-6).fill("   ").join("")+"*",o=e=>{let t="";return Object(n["yb"])(e,null,(e,i,n,o)=>{const d=o+1;t+=d<=6?r(d):h(d),t+=" "+a(e.data);const l=e.data.generalization;if(Array.isArray(l))t+=l.map(e=>` [${a(e)}]`);else if(l&&l.text){const e=a(l);t+=` [${e}]`}t+="\n\n",e.data.note&&(t+=e.data.note+"\n\n")},()=>{},!0),t}},eab3:function(e,t,i){"use strict";var n=i("35e0"),a=i("d17d"),r=i("6ac9");class h extends n["a"]{constructor(e={},t){super(e),this.layout=t}doLayout(e){let t=[()=>{this.computedBaseValue()},()=>{this.computedLeftTopValue()},()=>{this.adjustLeftTopValue()},()=>{e(this.root)}];Object(a["c"])(t)}computedBaseValue(){Object(a["yb"])(this.renderer.renderTree,null,(e,t,i,n,a,h)=>{let o=this.createNode(e,t,i,n,a,h);if(i?this.setNodeCenter(o):(this.layout===r["a"].LAYOUT.TIMELINE2?t._node.dir?o.dir=t._node.dir:o.dir=a%2===0?r["a"].LAYOUT_GROW_DIR.BOTTOM:r["a"].LAYOUT_GROW_DIR.TOP:o.dir="",t._node.isRoot&&(o.top=t._node.top+(e._node.height>t._node.height?-(e._node.height-t._node.height)/2:(t._node.height-e._node.height)/2))),!e.data.expand)return!0},null,!0,0)}computedLeftTopValue(){Object(a["yb"])(this.root,null,(e,t,i,n,a)=>{if(e.getData("expand")&&e.children&&e.children.length){let t=this.getMarginX(n+1),a=this.getMarginY(n+1);if(i){let i=e.left+e.width,n=i+t;e.children.forEach(e=>{e.left=n,n+=e.width+t})}else{let t=e.top+e.height+a+(this.getNodeActChildrenLength(e)>0?e.expandBtnSize:0);e.children.forEach(i=>{i.left=e.left+.5*e.width,i.top=t,t+=i.height+a+(this.getNodeActChildrenLength(i)>0?i.expandBtnSize:0)})}}},null,!0)}adjustLeftTopValue(){Object(a["yb"])(this.root,null,(e,t,i,n)=>{if(!e.getData("expand"))return;e.isRoot&&this.updateBrothersLeft(e);let a=e.children.length;if(t&&!t.isRoot&&a>0){let t=this.getMarginY(n+1),i=e.children.reduce((e,t)=>e+t.height+(this.getNodeActChildrenLength(t)>0?t.expandBtnSize:0),0)+a*t;this.updateBrothersTop(e,i)}},(e,t,i,n)=>{t&&t.isRoot&&e.dir===r["a"].LAYOUT_GROW_DIR.TOP&&e.children.forEach(t=>{let i=this.getNodeAreaHeight(t),n=t.top;t.top=e.top-(t.top-e.top)-i+e.height,this.updateChildren(t.children,"top",t.top-n)})},!0)}getNodeAreaHeight(e){let t=0,i=e=>{t+=e.height+(this.getNodeActChildrenLength(e)>0?e.expandBtnSize:0)+this.getMarginY(e.layerIndex),e.children.length&&e.children.forEach(e=>{i(e)})};return i(e),t}updateBrothersLeft(e){let t=e.children,i=0;t.forEach(e=>{e.left+=i,e.children&&e.children.length&&this.updateChildren(e.children,"left",i);let{left:t,right:n}=this.getNodeBoundaries(e,"h"),a=n-t,r=a-e.width;r>0&&(i+=r)})}updateBrothersTop(e,t){if(e.parent&&!e.parent.isRoot){let i=e.parent.children,n=Object(a["H"])(e,i);i.forEach((e,i)=>{if(e.hasCustomPosition())return;let a=0;i>n&&(a=t),e.top+=a,e.children&&e.children.length&&this.updateChildren(e.children,"top",a)}),this.updateBrothersTop(e.parent,t)}}renderLine(e,t,i){if(e.children.length<=0)return[];let{left:n,top:a,width:h,height:o,expandBtnSize:d}=e;const{alwaysShowExpandBtn:l,notShowExpandBtn:s}=this.mindMap.opt;l&&!s||(d=0);let c=e.children.length;if(e.isRoot){let n=e;e.children.forEach((a,r)=>{let h=n.left+n.width,o=a.left,d=e.top+e.height/2,l=`M ${h},${d} L ${o},${d}`;this.setLineStyle(i,t[r],l,a),n=a})}else{let n=-1/0,h=1/0,l=e.left+.3*e.width;if(e.children.forEach((e,a)=>{let r=e.top+e.height/2;r>n&&(n=r),r<h&&(h=r);let o=`M ${l},${r} L ${e.left},${r}`;this.setLineStyle(i,t[a],o,e)}),c>0){let t=this.lineDraw.path();d=c>0?d:0,e.parent&&e.parent.isRoot&&e.dir===r["a"].LAYOUT_GROW_DIR.TOP?t.plot(this.transformPath(`M ${l},${a} L ${l},${h}`)):t.plot(this.transformPath(`M ${l},${a+o+d} L ${l},${n}`)),e.style.line(t),e._lines.push(t),i&&i(t,e)}}}renderExpandBtn(e,t){let{width:i,height:n,expandBtnSize:a,isRoot:h}=e;if(!h){let{translateX:h,translateY:o}=t.transform();e.parent&&e.parent.isRoot&&e.dir===r["a"].LAYOUT_GROW_DIR.TOP?t.translate(.3*i-a/2-h,-a/2-o):t.translate(.3*i-a/2-h,n+a/2-o)}}renderGeneralization(e){e.forEach(e=>{let{top:t,bottom:i,right:n,generalizationLineMargin:a,generalizationNodeMargin:r}=this.getNodeGeneralizationRenderBoundaries(e,"h"),h=n+a,o=t,d=n+a,l=i,s=h+20,c=o+(l-o)/2,p=`M ${h},${o} Q ${s},${c} ${d},${l}`;e.generalizationLine.plot(this.transformPath(p)),e.generalizationNode.left=n+r,e.generalizationNode.top=t+(i-t-e.generalizationNode.height)/2})}renderExpandBtnRect(e,t,i,n,a){if(this.layout===r["a"].LAYOUT.TIMELINE)e.size(i,t).x(0).y(n);else{let h="";h=a.dir===r["a"].LAYOUT_GROW_DIR.TOP&&1===a.layerIndex?r["a"].LAYOUT_GROW_DIR.TOP:r["a"].LAYOUT_GROW_DIR.BOTTOM,h===r["a"].LAYOUT_GROW_DIR.TOP?e.size(i,t).x(0).y(-t):e.size(i,t).x(0).y(n)}}}t["a"]=h}}]);